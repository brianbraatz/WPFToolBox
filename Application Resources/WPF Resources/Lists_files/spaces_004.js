registerNamespace("Spaces.Lists");Spaces.Lists.Strings=new function(){this.lists_deleteitemerror="There was an error while deleting your item.  Please try again later.";this.lists_savetimeout="Due to the high volume of activity on Spaces right now, your item may not have been saved. To avoid duplication, please check to see if your item was saved before trying again.";this.lists_saveerror="There was an error while saving your item.  Please try again later.";this.lists_savetooltip="Save this item";this.lists_canceltooltip="Cancel editing this item";this.lists_deletetooltip="Delete this item";this.lists_edittooltip="Edit this item";this.lists_editerror="There was an error editing the item.  Please try refreshing the page.";this.lists_createlistname="List name:";this.lists_itempicker_paging="Results {0}-{1} of {2}";this.lists_itempicker_instructions="Select a result to automatically add information to this list item";this.lists_itempicker_listitem="thumbnail image";this.lists_itempicker_previous="Previous";this.lists_itempicker_next="Next";this.lists_renametext="Edit list information, and then click {0}Save{1}.";this.lists_editdescriptionname="List description:";this.lists_deletelistwarning="You are about to delete the list {0}.";this.lists_validateerror="One or more required fields are not filled out.  Please fill in the required fields and try again.";this.lists_book_lookupFailed="We saved your list item, but did not find any matching results from Amazon. Please check the information you entered and check the checkbox if you wish to look up this item again.";this.lists_music_songartistconnector="by";this.lists_music_songhelp="Song (required):";this.lists_music_artisthelp="Artist (required):";this.lists_music_albumhelp="Album:";this.lists_music_webaddresshelp="Web Address:";this.lists_music_getinfofromAmazon="";this.lists_music_songtitle="Song";this.lists_music_artisttitle="Artist";this.lists_music_albumtitle="Album";this.lists_book_nametitle="Title";this.lists_book_Authortitle="Author";this.lists_book_isbntitle="ISBN";this.lists_book_authorhelp="Author:";this.lists_book_isbndisplay="ISBN:";this.lists_book_urldisplay="Web address:";this.lists_createtitle="Add a list";this.lists_taskcreatenew="Add a list";this.lists_createhelptext="Enter the name of the list, select the list type, and then click {0}Add{1}.";this.lists_createlistname="List name:";this.lists_createlisttype="List type:";this.lists_music_createhelptext="Enter the name of the music list, and then click {0}Add{1}.";this.lists_defaultnewname="New Music List";this.lists_changelist="Edit list information";this.mainnav_Links="Custom list";this.mainnav_Booklist="Book list";this.mainnav_FriendList="Blog list";this.mainnav_Movielist="Movie list";this.lists_savewait="Please wait...";this.lists_savetimeout="Due to the high volume of activity on Spaces right now, your item may not have been saved. To avoid duplication, please check to see if your item was saved before trying again.";this.lists_deleteitemerror="There was an error while deleting your item.  Please try again later.";this.lists_deletelisterror="There was an error while deleting your list.  Please try again later, or try refreshing the page.";this.lists_renamelisterror="There was an error while editing your list.  Please try again later.";this.lists_deletelisttitle="Delete this list";this.lists_deleteitem="You are about to delete the list item {0}.";this.lists_deleteitemtitle="Delete this list item";this.lists_createbutton="Add";this.lists_music_importexpandtooltip="Click to show all of the songs in this playlist";this.lists_music_importcollapsetooltip="Click to hide all of the songs in this playlist";this.Photos_ShowContactPic="Use my profile information";this.lists_movie_namehelp="Title (required):";this.lists_movie_expand="Show detailed information about this movie.";this.lists_movie_collapse="Hide detailed information about this movie.";this.lists_movie_detailLoading="Loading...";this.lists_movie_serviceUnavailable="MSN Movies service is temporarily unavailable. Please try again later.";this.lists_movie_yearreleased="Year released:";this.lists_movie_genre="Genre";this.lists_movie_mpaa="MPAA";this.lists_movie_director="Director";this.lists_movie_cast="Cast";this.lists_movie_autopopulate="Add the thumbnail and movie details from MSN Movies";this.lists_movie_detailword="Details";this.lists_movie_multipleresults="Choose the title that matches your list item, and then click {0}Select{1}. If there is no match, select {0}None of these{1} to continue without adding a picture and link.";this.lists_movie_lookupfailed="We saved your list item, but did not find any matching results from MSN Movies. Please check the information you entered and check the checkbox if you wish to look up this item again.";this.lists_movie_matchSelectorCoverArt="Cover Art";this.lists_movie_matchSelectorListTitle="Title";this.lists_movie_matchSelectorListYearReleased="Year Released";this.lists_movie_savewithmsneerror="We saved your list item, but there were difficulties retrieving the movie thumbnail and details from MSN Movies. Please try again later.";this.lists_movie_selectbutton="Select";this.lists_movie_selecttooltip="Save the selected matching result from below.";this.lists_movie_canceltooltip="Cancel and give up adding a movie item.";this.lists_movie_onDvd="On DVD";this.lists_movie_viewTrailer="View trailer";this.lists_movie_inTheaters="In theaters";this.lists_movie_nodetailfound="Movie details cannot be retrieved at this time. ";this.lists_movie_noneofthese="None of these";this.lists_movie_photoGallery="Photo gallery";this.lists_movie_videoClips="Video clips";this.lists_movie_cannotDisplayDetail="Cannot display movie details at this time. Please try again later.";this.lists_reorder_loadingwaittext="Processing the re-order request..."};registerNamespace("Spaces.Lists");Spaces.Lists.AddListEntry=function(j,c){Spaces.Lists.AddListEntry.initializeBase(this,arguments);var a,b=null,f=null,e=this,h=null,d=Spaces.Lists.Helper,m=100,n=0,i=null,g=null,s="n",t="a";this._ToolbarStateNormal=s;this._ToolbarStateAdd=t;var l=null,k=null;this.initialize=function(){Spaces.Lists.AddListEntry.callBaseMethod(this,"initialize",arguments);m=parseInt(c.max_count);n=parseInt(c.intial_count);h=c.zero_entries_id;l=c.edit_disabled_icon;k=c.delete_disabled_icon;e.registerFor("Spaces.ActionToolbar.Toolbar",r);e.registerFor("Live_Spaces_Ads",u)};Spaces.Lists.AddListEntry.registerBaseMethod(this,"initialize");this.dispose=function(){j=null;e=null;if(b)b.detachEvent("onclick",p);b=null;a=null;h=null;g=null;i=null;f=null;Spaces.Lists.AddListEntry.callBaseMethod(this,"dispose",arguments)};Spaces.Lists.AddListEntry.registerBaseMethod(this,"dispose");this.GetAddAreaElement=function(){return j};this.SetCurrentListElement=function(a){i=a};this.UpdateHelpTextDisplay=function(a){d.ShowHideElement(h,a)};this.SetInitialFocusElementId=function(a){g=a};function r(c,b){if(b){a=c;o()}else a=null}function u(b,a){if(a)f=b;else f=null}this.RefreshAd=function(){if(f)f.refreshOnce()};this.DisableEditListInfoLink=function(){if(a!=null){var b=a.GetToolbarItem("editlistinfoentry");if(b)b.Disable()}};function o(){if(a!=null){b=a.GetToolbarItem(c.add_id);if(b){b.attachEvent("onclick",p);q()}else window.setTimeout(o,1000)}}function q(){if(b)if(n>=m)b.Disable();else b.Enable()}this.UpdateAddLink=function(a){if(b)if(a>=m)b.Disable();else b.Enable()};function p(){if(a){e.RefreshAd();e.fire("firstclick");a.Disable()}d.ShowHideElement(h,false);j.style.display="";document.getElementById("addhidebg").style.display="block";document.getElementById("addhidebg").style.height=d.ReturnScreenHeight()+"px";document.getElementById("addhidebg").style.width=d.ReturnScreenWidth()+"px";if(i&&l&&k)d.DisableRows(i,l,k);if(document.getElementById(g))document.getElementById(g).focus()}this.ReEnableUI=function(){if(a)a.Enable()};this.DisableToolbar=function(){if(a)a.Disable()};this.EnableToolbar=function(){if(a)a.Enable()};this.getToolbar=function(){return a};this.HideArea=function(){j.style.display="none"}};Spaces.Lists.AddListEntry.registerClass("Spaces.Lists.AddListEntry","$Binding");Spaces.Lists.AddListEntry.Events=new $Enum("firstclick");Spaces.Lists.AddListEntry.Params=new $Enum("max_count","intial_count","add_id","zero_entries_id","edit_disabled_icon","delete_disabled_icon");function DeleteRow(d,f,i,m,l){var a,h,g,o,n=195,b,c,k=i.format(m).encodeHtml()+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>";b=document.getElementById(d).parentElement;for(var e=0;e<b.childNodes.length;e++){a=document.getElementById(d).parentElement.childNodes[e];if(a.id==d){c=a.firstChild;if(c.children[0]==null||c.children[0].children[0]!=null&&c.children[0].children[0].tagName=="IMG")c=a.cells[1];g=new ComplexDialogData([k,null],null,null,Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),null,null,true);function j(){_sd_Post(GetActionUrl(f),"itemid="+d+"&MethodType=delete&FormMethod=post");if(document.getElementById(d).parentElement.childNodes.length==4){var c=document.getElementById(f),g=c.getAttribute("nolist");document.getElementById(g).style.display="block";c.style.display="none"}b.removeChild(a);do{a=b.childNodes[e];h=a.childNodes[0].className;b.removeChild(a)}while(h.search(/line/i)==-1&&b.childNodes.length>e)}Spaces.PopOvers.SimplePopOver("Confirmation",l,g,null,j,event.srcElement);break}}}function showHideElement(a,b){if(document.getElementById(a)!=null)if(document.getElementById(a).style.display=="none")document.getElementById(a).style.display="block";else document.getElementById(a).style.display="none";if(document.getElementById(b)!=null)document.getElementById(b).focus()}function SimpleEncode(a){a=a.replace(/%/g,"%25");a=a.replace(/&/g,"%26");a=a.replace(/\+/g,"%2b");return a}var playLists,selectedPlaylist;function ExpandMusicRow(g){var d=document.getElementById("expander"+g);for(var a=0;a<d.webBindings.length;a++)if(Object.compare(d.webBindings[a],Spaces.Controls.HoverButton)){var i=$Config.Themes.url+"hig/img/";if(d.expanded==false){d.webBindings[a].ChangeImage(i+"glyph/expand_~Right~_rest_~BodyTextLuminance~.gif",i+"glyph/expand_~Right~_hover_~BodyTextLuminance~.gif");d.alt=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_importcollapsetooltip");d.expanded=true}else{d.webBindings[a].ChangeImage(i+"glyph/collapse_~Right~_rest_~BodyTextLuminance~.gif",i+"glyph/collapse_~Right~_hover_~BodyTextLuminance~.gif");d.alt=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_importexpandtooltip");d.expanded=false}break}if(document.getElementById("songRow"+g)==null){var l=document.getElementById("row"+g).parentElement,f=playLists.item(g),h,m,j,k,e,b,l,c;h=document.createElement("tr");h.id="songRow"+g;h.className="ListRow";h.appendChild(document.createElement("td"));h.appendChild(document.createElement("td"));j=document.createElement("td");j.colSpan=3;k=document.createElement("<table border='0' cellpadding='0' cellspacing='0' width='100%' class='fixedTable'>");musicTbody=document.createElement("tbody");for(a=0;a<f.count;a++){if(CheckIfBrokenUrgeList(f.item(a).getItemInfo("sourceURL"),f.item(a).getItemInfo("name")))continue;e=document.createElement("tr");b=document.createElement("<td class='listcell' width='200'>");c=document.createElement("nobr");c.appendChild(document.createTextNode(f.item(a).name));b.appendChild(c);e.appendChild(b);b=document.createElement("<td class='listcell' width='200'>");c=document.createElement("nobr");c.appendChild(document.createTextNode(f.item(a).getItemInfo("Author")));b.appendChild(c);e.appendChild(b);b=document.createElement("<td class='listcell'>");c=document.createElement("nobr");c.appendChild(document.createTextNode(f.item(a).getItemInfo("WM/AlbumTitle")));b.appendChild(c);e.appendChild(b);musicTbody.appendChild(e);if(a!=f.count-1){e=document.createElement("tr");e.appendChild(document.createElement("<td colspan=3 class='line'></td>"));musicTbody.appendChild(e)}}k.appendChild(musicTbody);j.appendChild(k);h.appendChild(j);l.insertBefore(h,document.getElementById("row"+g).nextSibling)}else showHideElement(document.getElementById("songRow"+g).id)}function CheckIfBrokenUrgeList(b,c){var a="vnd.ms.wmpcp://CP/",d="CP";if(b.indexOf(a)!=-1&&c=="CP")return true;return false}function CreatePlayListTable(){playLists=wmpPlayer.playlistCollection.getAll();if(playLists.count==0)document.getElementById("NoPlaylists").style.display="block";else{a();function a(){var e=0;if(typeof Spaces!="undefined"&&typeof Spaces.Controls!="undefined"&&typeof Spaces.Controls.HoverButton!="undefined"&&typeof Web!="undefined"&&typeof Web.Network!="undefined"){var c=Web.Network.createBatch(Array.$Prioritizer.Priorities.High),d=$Config.Themes.url+"hig/img/";c.add(Web.Network.Type.Image,d+"glyph/expand_~Right~_rest_~BodyTextLuminance~.gif");c.add(Web.Network.Type.Image,d+"glyph/expand_~Right~_hover_~BodyTextLuminance~.gif");c.add(Web.Network.Type.Image,d+"glyph/collapse_~Right~_rest_~BodyTextLuminance~.gif");c.add(Web.Network.Type.Image,d+"glyph/collapse_~Right~_hover_~BodyTextLuminance~.gif");c.execute(b)}else if(e++<30)setTimeout(a,1000);}function b(){var a,c,d,e,f;for(var b=0;b<playLists.count;b++){a=document.createElement("tr");a.id="row"+b;a.name="row"+b;a.className="ListRow";f=document.createElement("a");f.href="#";f.onclick=CreateExpanderFunction(b);d=document.createElement("img");var g=$Config.Themes.url+"hig/img/";d.src=g+"glyph/collapse_~Right~_rest_~BodyTextLuminance~.gif";d.alt=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_importexpandtooltip");f.appendChild(d);d.id="expander"+b;d.expanded=false;var h=new Spaces.Controls.HoverButton(d,{hoversrc:g+"glyph/collapse_~Right~_hover_~BodyTextLuminance~.gif"});h.initialize();e=document.createElement("<input type='radio' name='playlist'>");e.setAttribute("value",b);try{e.playList=playLists.item(b);c=document.createElement("td");c.noWrap="nowrap";c.appendChild(e);c.appendChild(f);a.appendChild(c);c=document.createElement("<td class='ellipse bold' colspan='4'>");c.noWrap="nowrap";c.appendChild(document.createTextNode(playLists.item(b).name));a.appendChild(c)}catch(i){continue}document.getElementById("importTable").children[1].appendChild(a);a=document.createElement("tr");a.appendChild(document.createElement("<td type='line' colspan='3' class='line'></td>"));document.getElementById("importTable").children[1].appendChild(a);if(b==0)e.checked=true}document.getElementById("nextPlaylist").style.display="inline"}}}function CreateExpanderFunction(a){return function(){ExpandMusicRow(a);event.returnValue=false;return false}}function ShowMusicFailed(){document.getElementById("importMusicFailed").style.display="block";document.getElementById("importFailMsg").style.display="block"}function GetWmpAccess(){var b=true,c=false,a;if(typeof wmpPlayer!="undefined"&&wmpPlayer.Settings!=null){a=wmpPlayer.versionInfo.split(".");if(a[0].valueOf()>=9){if(wmpPlayer.Settings.mediaAccessRights!="read"&&wmpPlayer.Settings.mediaAccessRights!="full")wmpPlayer.Settings.requestMediaAccessRights("read");if(wmpPlayer.Settings.mediaAccessRights!="read"&&wmpPlayer.Settings.mediaAccessRights!="full"){document.location=musicListUrl;return}b=false;CreatePlayListTable()}}if(b){document.getElementById("musicForm").style.display="none";ShowMusicFailed()}}function ValidateCheckBox(a){if(a.checked==true)if(selectedItems>=c_maxListItems){alert(maxItemsText);a.checked=false}else selectedItems++;else selectedItems--}function RenderSelectedPlaylist(f){var e,d,j,i,h,c,b,g;selectedPlaylist=f;h=document.getElementById("importTable2");j=h.children[1];e=document.createElement("tr");e.className="ListRow";e.appendChild(d=document.createElement("td"));d=document.createElement("<td class='ellipse bold'>");d.noWrap="nowrap";d.colSpan=4;d.appendChild(document.createTextNode(f.name));e.appendChild(d);j.appendChild(e);e=document.createElement("tr");e.className="ListRow";e.appendChild(document.createElement("td"));d=document.createElement("td");d.colSpan=4;h=document.createElement("<table border='0' cellpadding='0' cellspacing='0' width='100%' class='fixedTable'>");musicTbody=document.createElement("tbody");for(var a=0;a<f.count;a++){if(CheckIfBrokenUrgeList(f.item(a).getItemInfo("sourceURL"),f.item(a).getItemInfo("name")))continue;c=document.createElement("tr");c.index=a;b=document.createElement("<td class='listcell'>");b.align="right";i=document.createElement("<input type='checkbox'>");i.id="songChk"+a;i.onclick=Function("ValidateCheckBox(this);");b.appendChild(i);c.appendChild(b);b=document.createElement("<td class='listcell' width='200'>");g=document.createElement("nobr");g.appendChild(document.createTextNode(f.item(a).name));b.appendChild(g);c.appendChild(b);b=document.createElement("<td class='listcell' width='200'>");g=document.createElement("nobr");g.appendChild(document.createTextNode(f.item(a).getItemInfo("Author")));b.appendChild(g);c.appendChild(b);b=document.createElement("<td class='listcell' width='200'>");g=document.createElement("nobr");g.appendChild(document.createTextNode(f.item(a).getItemInfo("WM/AlbumTitle")));b.appendChild(g);c.appendChild(b);musicTbody.appendChild(c);if(a!=f.count-1){c=document.createElement("tr");c.appendChild(document.createElement("td"));c.appendChild(document.createElement("<td colspan=3 class='line'></td>"));musicTbody.appendChild(c)}}h.appendChild(musicTbody);d.appendChild(h);e.appendChild(d);j.appendChild(e);for(var a=0;a<c_maxListItems;a++)if(document.getElementById("songChk"+a)!=null){document.getElementById("songChk"+a).checked=true;selectedItems++}else break}function SelectPlayList(){var a=null;if(playLists.count==1)a=musicForm.playlist.playList;else for(var b=0;b<playLists.count;b++)if(musicForm.playlist[b]!=null&&musicForm.playlist[b].checked){a=musicForm.playlist[b].playList;break}if(a==null)return;document.getElementById("importTable").style.display="none";document.getElementById("importTable2").style.display="block";document.getElementById("nextPlaylist").style.display="none";document.getElementById("copyPlaylist").style.display="inline";document.getElementById("playlistClearAll").style.display="inline";if(a.count>c_maxListItems)document.getElementById("playlistSelect100").style.display="inline";else document.getElementById("playlistSelectAll").style.display="inline";document.getElementById("importHelpText").innerHTML=importHelpPage2;RenderSelectedPlaylist(a)}function SelectAll(){selectedItems=0;for(var a=0;a<selectedPlaylist.count&&a<c_maxListItems;a++)if(document.getElementById("songChk"+a)!=null){document.getElementById("songChk"+a).checked=true;selectedItems++}}function ClearAll(){for(var a=0;a<selectedPlaylist.count;a++)if(document.getElementById("songChk"+a)!=null)document.getElementById("songChk"+a).checked=false;selectedItems=0}function CopyPlaylist(){var a=0,j,h=C_CANARY_COOKIE_NAME+"="+encodeURI(GetCookieValue(C_CANARY_COOKIE_NAME))+"&MethodType=import&FormMethod=post&playlist=",f,i,b,d,c,e;e=selectedPlaylist.name;if(e.length>c_title_max_length)e=e.substring(0,c_title_max_length-1);h+=e;for(var g=0;g<selectedPlaylist.count&&a<c_maxListItems;g++)if(document.getElementById("songChk"+g)!=null)if(document.getElementById("songChk"+g).checked==true){f=selectedPlaylist.item(g);b=f.getItemInfo("Title");d=f.getItemInfo("WM/AlbumTitle");c=f.getItemInfo("Author");if(b.length>c_song_max_length)b=b.substring(0,c_song_max_length-1);if(d.length>c_album_max_length)d=d.substring(0,c_album_max_length-1);if(c.length>c_artist_max_length)c=c.substring(0,c_artist_max_length-1);h+="&title"+a+"="+SimpleEncode(b)+"&author"+a+"="+SimpleEncode(c)+"&album"+a+"="+SimpleEncode(d)+"&wmid"+a+"="+SimpleEncode(f.getItemInfo("WM/WMContentID"));a++}XMLHttpAsyncEx(h,postUrl,false)}function XMLHttpAsyncEx(c,e,b){var a=[];a["Exception"]=false;a["ResponseText"]="";var d=typeof b!="undefined"&&b==true?"GET":"POST";xmlhttp=GetXmlHttpObject();try{if(xmlhttp!=null){xmlhttp.open(d,e,true);xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){var a=xmlhttp.responseText;location.href=a}};xmlhttp.send(c);DisplayPopupSimple(this,true,false,true);document.getElementById("importTable2").disabled=true}}catch(f){a["Exception"]=true}return a}function dismissSimple(c,b){var a=true;if(b=="Cancel")a=false;return a}function DisplayPopupSimple(i,g,h,f){var a=new Spaces.Controls.Popover,b=[],c=document.createElement("div");c.innerHTML="";var e=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_movie_detailLoading"),d=document.createElement("div");d.innerHTML="<BR><b>"+e+"</b><BR><BR>";b["header"]=c;b["body"]=d;a.width=350;a.header=b.header;a.body=b.body;a.modal=f;a.showFooter=false;a.addButton("Cancel","",false,true);a.show(dismissSimple,null)}function _sd_Post(d,c){var b=XMLHttpEx(c,d,false),a=b.ResponseText;if(!b.Exception&&b.Status=="200"){if(a.toLowerCase().indexOf("http")==0)location.href=a}else location.href=c_errorUrl;return a}function GetActionUrl(a){return document.getElementById("ActionUrl:"+a).getAttribute("url")}registerNamespace("Spaces.Lists");Spaces.Lists.RenameMenuItem=function(i,a){Spaces.Lists.RenameMenuItem.initializeBase(this,arguments);a=this.getParameters();var c=this,g=25,b;this.initialize=function(b){Spaces.Lists.RenameMenuItem.getBaseMethod(this,"initialize","Spaces.ActionToolbar.MenuItem").call(this,b);g=parseInt(a.name_max_len);c.attachEvent("onclick",d)};this.dispose=function(a){i=null;c.detachEvent("onclick",d);c=null;b=null;Spaces.Lists.RenameMenuItem.getBaseMethod(this,"dispose","Spaces.ActionToolbar.MenuItem").call(this,a)};function d(){var f=[Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_createlistname"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_editdescriptionname")],d=[a.old_name,a.old_description],c=[a.name_max_len,a.desc_max_len],b=Spaces.Utility.GetString(Spaces.Lists.Strings,a.rename_key).format('<span class="bold">',"</span>"),g=null,e=new ComplexDialogData(f,d,b,Spaces.Utility.GetString(Spaces.Common.Strings,"global_save"),null,c);Spaces.PopOvers.SimplePopOver("AddOrEditList",Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_changelist"),e,null,h,event.srcElement);event.returnValue=false;return false}function h(c){if(!(c&&c.obj&&c.obj.ReturnValues&&c.obj.ReturnValues.length>1))return;var g=c.obj.ReturnValues[0],d=c.obj.ReturnValues[1];if(!b)b=Spaces.Lists.Utility.GetListFppService(a.fppurl);Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Low,false,Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"));b.rename_list(Spaces.Lists.Utility.StringToListType(a.list_type),a.list_id,g,d,f,null,e,a.ms_timeout)}function f(){location.reload()}function e(){Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Med,false,Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_renamelisterror"))}};Spaces.Lists.RenameMenuItem.registerClass("Spaces.Lists.RenameMenuItem","Spaces.ActionToolbar.MenuItem");Spaces.Lists.RenameMenuItem.Params=new $Enum("rename_key","old_name","old_description","name_max_len","desc_max_len","fppurl","list_id","list_type","ms_timeout","enabled_icon","href","state","id");registerNamespace("Spaces.Lists");Spaces.Lists.DeleteMenuItem=function(h,a){Spaces.Lists.DeleteMenuItem.initializeBase(this,arguments);a=this.getParameters();var b=this;this.initialize=function(d){Spaces.Lists.DeleteMenuItem.getBaseMethod(this,"initialize","Spaces.ActionToolbar.MenuItem").call(this,d);iMaxLength=parseInt(a.name_max_len);b.attachEvent("onclick",c)};this.dispose=function(a){h=null;b.detachEvent("onclick",c);b=null;Spaces.Lists.DeleteMenuItem.getBaseMethod(this,"dispose","Spaces.ActionToolbar.MenuItem").call(this,a)};function c(){var b=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_deletelistwarning").format(a.list_name).encodeHtml()+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",c=new ComplexDialogData([b,null],null,null,Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),null,null,true);Spaces.PopOvers.SimplePopOver("Confirmation",Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_deletelisttitle"),c,null,f,event.srcElement);event.returnValue=false;return false}function f(){Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Low,false,Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"));setTimeout(g,0)}function g(){gblDirtyBit=0;var c="MethodType=deletelist&FormMethod=post&itemid="+a.cnsid,b=XMLHttpEx(c,window.location.href);if(b.Exception==false&&b.Status=="200"&&b.ResponseText.startsWith("http"))e(b.ResponseText);else d()}function e(a){window.location=a}function d(){Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Med,false,Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_deletelisterror"))}};Spaces.Lists.DeleteMenuItem.registerClass("Spaces.Lists.DeleteMenuItem","Spaces.ActionToolbar.MenuItem");Spaces.Lists.DeleteMenuItem.Params=new $Enum("cnsid","list_name","enabled_icon","href","state","id");registerNamespace("Spaces.Lists.Utility");Spaces.Lists.Utility.GetGLink=function(b,a,c,e){var d=function(){var f=c.replace("-","_"),d=new Image;d.src=a+"/_1_0SA"+f+"/"+e+"?"+b.href;return true};return d};Spaces.Lists.Utility.StringToListType=function(b){var a=null,c=b;switch(b){case "custom":a=ListService.ListType.Custom;break;case "blog":a=ListService.ListType.Blog;break;case "book":a=ListService.ListType.Book;break;case "music":a=ListService.ListType.Music;break;case "classified":a=ListService.ListType.Classified;break;case "movie":a=ListService.ListType.Movie}return a};Spaces.Lists.Utility.GetListFppService=function(b){var a=new ListService.FppProxySettings;a.Version=ListService.FppVersion.TWO;a.CanaryToken=C_CANARY_COOKIE_NAME;return ListService.initializeEx("http://"+window.location.hostname+b,a)};registerNamespace("Spaces.Lists.NotificationBar");Spaces.Lists.NotificationBar.getArguments=function(){if(!Spaces.Lists.NotificationBar._arguments)Spaces.Lists.NotificationBar._arguments={imgsrclow:$Config.Themes.url+"hig/img/progress_loading.gif",imgsrcmed_shield:$Config.Themes.url+"hig/img/notification/warning.gif",imgsrcmed:$Config.Themes.url+"hig/img/notification/warning.gif",imgsrchigh_shield:$Config.Themes.url+"hig/img/notification/warning.gif",imgsrchigh:$Config.Themes.url+"hig/img/notification/warning.gif"};return Spaces.Lists.NotificationBar._arguments};Spaces.Lists.NotificationBar.getInstance=function(){if(!Spaces.Lists.NotificationBar._instance){var a=document.getElementById("ListErrorArea");Spaces.Lists.NotificationBar._instance=Web.Bindings.attachElementBindingSync(a,"Spaces.Controls.NotificationBar",null,Spaces.Lists.NotificationBar.getArguments())}return Spaces.Lists.NotificationBar._instance};function GLink(b,d,f,c){var a=f.replace("-","_"),e=new Image;e.src=d+"/_1_0SA"+a+"/"+c+"?"+b.href}if(!String.isNullOrEmpty)String.isNullOrEmpty=function(a,b){return null==a||""==(b?a.trim():a)};function _sd_Post(d,c){var b=XMLHttpEx(c,d,false),a=b.ResponseText;if(!b.Exception&&b.Status=="200"){if(a.toLowerCase().indexOf("http")==0)location.href=a}else location.href=c_errorUrl;return a}function GetActionUrl(a){return document.getElementById("ActionUrl:"+a).getAttribute("url")}function GLink(b,d,f,c){var a=f.replace("-","_"),e=new Image;e.src=d+"/_1_0SA"+a+"/"+c+"?"+b.href}registerNamespace("Spaces.Lists");Spaces.Lists.RatingsArea=function(m,d){Spaces.Lists.RatingsArea.initializeBase(this,arguments);d=this.getParameters();var p=this,l=m,c,b=d.cnshandle,j=d.clientid,k=d.rating,a=Spaces.Lists.RatingsArea.Images;this.initialize=function(){Spaces.Lists.RatingsArea.callBaseMethod(this,"initialize",arguments);c=new $Memory.Groups;e()};this.dispose=function(a){Spaces.Lists.RatingsArea.callBaseMethod(this,"dispose",arguments);if(c){c.dispose(a);c=null}};function e(){var j,m=5,f,d,e;j=l;for(e=1;e<=m;e++){f=document.createElement("a");f.id="rate"+e+b;var n=e*1;f.href="#";f.setAttribute("rating",e);c.create(null).Events.register(f,{onclick:g});d=document.createElement("img");d.setAttribute("border","0");d.setAttribute("alt",c_ratingsTooltip);d.setAttribute("rating",e);d.className="star";if(e<=k){d.src=a.on;d.height=a.height;d.width=a.width}else{d.src=a.off;d.height=a.height;d.width=a.width}d.id=e+"star"+b;c.create(null).Events.register(d,{onmouseover:h});c.create(null).Events.register(d,{onmouseout:i});f.appendChild(d);j.appendChild(f)}}function h(){var d,c;for(d=5;d>0;d--){c=document.getElementById(d+"star"+b);if(d<=event.srcElement.getAttribute("rating")){c.oldSrc=c.src;c.src=a.selected;c.height=a.height;c.width=a.width}else{if(c.oldSrc==null)c.oldSrc=c.src;c.src=a.off;c.height=a.height;c.width=a.width}}}function i(){var d,c;for(d=5;d>0;d--){c=document.getElementById(d+"star"+b);if(c.oldSrc==null){c.src=a.off;c.height=a.height;c.width=a.width}else c.src=c.oldSrc}}function f(e){var c,f,d;tableCell=document.createElement("td");for(c=1;c<6;c++){star=document.getElementById(c+"star"+b);if(c<=e){star.src=a.selected;star.height=a.height;star.width=a.width}else{star.src=a.off;star.height=a.height;star.width=a.width}d=star.parentElement.parentElement;tableCell.appendChild(star);star.className="";star.onmouseover=null;star.onmouseout=null}d.innerHTML=tableCell.innerHTML}function g(){var c,h=GetActionUrl(j),a=event.srcElement.getAttribute("rating"),g="ListId="+b+"&FormMethod=post&MethodType=rateimage&rating="+a+"&"+C_CANARY_COOKIE_NAME+"="+encodeURI(GetCookieValue(C_CANARY_COOKIE_NAME)),e="<center><img src='"+PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"star_u.gif")+"'>&nbsp;"+c_rateConfirmation.replace("{0}",a)+"</center>";dataArray=new ComplexDialogData([e,null],null,null,null,null,null,true);Spaces.PopOvers.SimplePopOver("Confirmation",null,dataArray,null,d,document.getElementById("rate"+a+b));function d(a){c=_sd_Post(h,g);a.Popover.hide();f(c);if(document.getElementById("musicRatingText")!=null)document.getElementById("musicRatingText").innerText=c_ratedMusic;return false}event.returnValue=false}};Spaces.Lists.RatingsArea.registerClass("Spaces.Lists.RatingsArea","$Binding");Spaces.Lists.RatingsArea.Params=new $Enum("clientid","cnshandle","rating");Spaces.Lists.RatingsArea.Images=new Array(3);Spaces.Lists.RatingsArea.SetupImages=function(){var a=Spaces.Lists.RatingsArea.Images;a.height=12;a.width=13;a.on=PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"star_b.gif");a.off=PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"star_d.gif");a.selected=PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"star_u.gif")};Spaces.Lists.RatingsArea.SetupImages();registerNamespace("Spaces.Lists");Spaces.Lists.AddListLink=function(f,c){Spaces.Lists.AddListLink.initializeBase(this,arguments);c=this.getParameters();var e=this,d=false,i,h,b=Spaces.Utility.GetString,a=Spaces.Lists.Strings;e.initialize=function(){Spaces.Lists.AddListLink.callBaseMethod(this,"initialize",arguments);if(c.is_music=="true")d=true;i=parseInt(c.maxlength);h=parseInt(c.desc_maxlength);f.attachEvent("onclick",j)};e.dispose=function(){f.detachEvent("onclick",j);f=null;e=null;b=null;a=null;Spaces.Lists.AddListLink.callBaseMethod(this,"dispose",arguments)};function j(){var g,e,c,f,m,k,j;if(d){g=b(a,"lists_music_createhelptext").format("<span class='bold'>","</span>");f="AddOrEditList";e=[b(a,"lists_createlistname"),b(a,"lists_editdescriptionname")];c=[b(a,"lists_defaultnewname"),""]}else{g=b(a,"lists_createhelptext").format("<span class='bold'>","</span>");f="NameDropDown";e=[b(a,"lists_createlistname"),b(a,"lists_editdescriptionname"),b(a,"lists_createlisttype")];c=null}m=b(a,"lists_createtitle");j=[i,h];k=new ComplexDialogData(e,c,g,b(a,"lists_createbutton"),null,j);Spaces.PopOvers.SimplePopOver(f,m,k,null,l,event.srcElement);event.returnValue=false;return false}function l(h){var a;try{var f;if(d)f="addmusiclist";else f="addlist";var e="MethodType="+f+"&FormMethod=post&";for(var b=0;b<h.obj.ReturnValues.length;b++){if(b!=0)e+="&";e+="value"+(b+1)+"="+SimpleEncode(h.obj.ReturnValues[b])}if(d)e+="&listType=musiclist";a=XMLHttpEx(e,c.posturl,false)}catch(j){g();return}if(a){var i=a.ResponseText;if(!a.Exception&&a.Status=="200")if(i.toLowerCase().indexOf("http")==0){k(i);return}}g()}function k(a){window.location=a}function g(){window.location=c_errorUrl+"?mt=lists.createerror"}};Spaces.Lists.AddListLink.registerClass("Spaces.Lists.AddListLink","$Binding");Spaces.Lists.AddListLink.Params=new $Enum("spacemkt","is_music","maxlength","desc_maxlength","posturl");registerNamespace("Spaces.Lists");Spaces.Lists.MusicList=function(S,d){Spaces.Lists.MusicList.initializeBase(this,arguments);d=this.getParameters();var a=Spaces.Lists.Helper,r=Spaces.Lists.Helper.ActionType,L=this,c,l=null,h=S,ib=null,o=null,z=null,V=3,I=2,k,y=null,N=null,x=null,M=null,e=null,gb="Song",yb="Artist",zb="Album",Bb="Description",u="TN",fb="nf",m=null,A="link_",j="input_",wb="EditBtn",rb="input_O1",f=[j+"addSong",j+"addArtist",j+"addAlbum",j+"addDescription",j+"addWebAddr"],v=[j+"addSong",j+"addArtist"],b=[j+"editSong",j+"editArtist",j+"editAlbum",j+"editDescription",j+"editWebAddr"],D=[j+"editSong",j+"editArtist"],H=["editSearchBtn","editSaveBtn","editClearAllBtn","editCancelBtn"],Z=["searchBtn","saveBtn","clearAllBtn","cancelBtn"],s="editThumbnailCB",Q=f[3],P=b[3],O="musicEditControl",ob="actionType",K=null,F=a.Mode.None,R=null,B="div_addControlNotification",C="div_editControlNotification",p=null,Gb="ta_maxlength",n=a.Mode.None,g=null,i=-1,J="addSearchDiv",ab="editSearchDiv",E=a.Mode.None,jb="";this.initialize=function(){c=new $Memory.Groups;c.create(null).Events.register(S,{onclick:Cb});ib=d.list_id;if(h.rows.length==I)h.style.display="none";y=d.edit_icon;N=d.edit_disabled_icon;x=d.delete_icon;M=d.delete_disabled_icon;K=d.zero_entries_id;jb=d.theme;Spaces.Lists.MusicList.callBaseMethod(this,"initialize",arguments);L.registerFor("Spaces.Lists.AddListEntry",ub);L.registerFor("Spaces.Lists.ItemPicker",pb);L.registerFor("Spaces.Lists.Reorder",qb)};Spaces.Lists.MusicList.registerBaseMethod(this,"initialize");this.dispose=function(d){Spaces.Lists.MusicList.callBaseMethod(this,"dispose",arguments);if(c){c.dispose(d);c=null}k=null;h=null;S=null;l=null;L=null;a=null;m=null;f=null;v=null;b=null;D=null;H=null;v=null;K=null;if(o){o.unload();o=null}z=null};Spaces.Lists.MusicList.registerBaseMethod(this,"dispose");function ub(a,b){if(b){l=a;c.create(null).Events.register(a,{firstclick:hb});l.SetInitialFocusElementId(f[0]);l.SetCurrentListElement(h)}}function qb(b,a){if(a)z=b}function pb(a,b){if(b){o=a;c.create(null).Events.register(a,{ItemPickerElementClicked:mb})}}function U(){if(o){o.unload();g=null;i=-1}}function mb(b){if(g){i=b.Package;if(i==-1)a.ProcessAddModeWebAddrOnItemPickerChange(n,f[4]);else kb()};}function kb(){if(g&&i!=-1)if(n==a.Mode.Add){for(var c=0;c<3;c++)a.SetAndAdjustTextBoxStrToMaxLength(f[c],g[i].FieldValues[c]);a.SetAndAdjustTextBoxStrToMaxLength(f[4],g[i].WebAddress);document.getElementById(f[4]).disabled=true;w()}else{for(var c=0;c<3;c++)a.SetAndAdjustTextBoxStrToMaxLength(b[c],g[i].FieldValues[c]);a.SetAndAdjustTextBoxStrToMaxLength(b[4],g[i].WebAddress);q()}}function hb(){var a=null;for(var b=0;b<v.length;b++){a=document.getElementById(v[b]);if($Browser.isIE()){c.create(null).Events.register(a,{onkeyup:w});c.create(null).Events.register(a,{onpropertychange:w})}else{c.create(null).Events.register(a,{onkeyup:w});c.create(null).Events.register(a,{onchange:w})}}a=document.getElementById(Q);if($Browser.isIE()){c.create(null).Events.register(a,{onkeyup:G});c.create(null).Events.register(a,{onpropertychange:G})}else{c.create(null).Events.register(a,{onkeyup:G});c.create(null).Events.register(a,{onchange:G})}l.detachEvent("firstclick",hb);c.create(null).Events.register(l.GetAddAreaElement(),{onclick:tb});w()}var w=function(){a.ProcessFieldChange(Z[0],v);a.ProcessFieldChange(Z[1],v)},G=function(){a.ResetTextAreaStrToMaxLength(Q)},t=function(){a.ResetTextAreaStrToMaxLength(P)};function tb(d){var b=null;if(d){b=d.target;if(!b)b=d.srcElement;var e=b.getAttribute(ob),c=a.GetActionType(e);if(e&&!b.disabled){if(!p)p=Spaces.Controls.NotificationBar.Importance;if(c==r.Save){E=a.Mode.None;Eb()}else if(c==r.Search){n=a.Mode.Add;U();eb();E=a.Mode.Search}else if(c==r.Cancel){a.ProcessAddAreaCancelClick(h,l,f,I,K,y,x,o,J,B);E=a.Mode.None}else if(c==r.ClearAll){a.ClearAllFields(f,o,J);E=a.Mode.None}w()}}}function Eb(){a.PrepareToProcessAdd(l,v);if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);var c="",b=document.getElementById(f[4]),e=b.value;if(g&&i!=-1){c=g[i].ThumbnailUrl;e=g[i].WebAddress}a.ResetTextAreaStrToMaxLength(Q);try{k.add_music_entry(ib,document.getElementById(f[0]).value,document.getElementById(f[1]).value,document.getElementById(f[2]).value,document.getElementById(f[3]).value,e,c,jb,vb,null,cb,d.ms_timeout);b.disabled=false}catch(h){cb()}}function vb(b){a.ProcessAddSuccess(h,b,l,f,V,I,K,y,x,o,J,B);g=null;if(z)z.UpdateSOValuesOnAdd()}function cb(b){a.ProcessAddFailure(l,ListService,b,"lists_savetimeout","lists_saveerror")}function Cb(f){var c=null;if(f){c=f.target;if(!c)c=f.srcElement;var j=c.getAttribute("actionType");if(j&&!c.disabled){if(c.getAttribute("rowId")&&F!=a.Mode.Edit)e=c.getAttribute("rowId");if(!p)p=Spaces.Controls.NotificationBar.Importance;m=[gb+e,yb+e,zb+e,Bb+e];var g=document.getElementById(e),d=a.GetActionType(j);if(d==r.Edit&&!g.disabled&&F!=a.Mode.Edit){xb(e,m);W(true);q();F=a.Mode.Edit}else if(d==r.Delete&&!g.disabled&&F!=a.Mode.Edit)Ab(e);else if(d==r.Save)Db(e);else if(d==r.Search){n=a.Mode.Edit;U();eb()}else if(d==r.ClearAll){var i="";if(document.getElementById("div_"+s).style.display!="none")i=document.getElementById(b[b.length-1]).value;a.ClearAllFields(b,o,ab);document.getElementById(b[b.length-1]).value=i}else if(d==r.Cancel){db();h.deleteRow(document.getElementById(O).rowIndex);document.getElementById(e).style.display=""}}}}function xb(f,k){var m=document.getElementById(f);R=m;a.PrepareEditMode(h,l,m,O,gblEditControlHtml,6,H,b,k,N,M);var g=document.getElementById(b[b.length-1]),e=document.getElementById(A+k[0]);if(e&&e.href)document.getElementById(b[b.length-1]).value=e.href;var i=false;if(document.getElementById("div_"+u+f).style.display!="none"){var j=document.getElementById("img_"+u+f);if(j&&j.src)i=true}if(i){var d=document.getElementById(s);if(d){if(d.checked)g.disabled="disabled";c.create(null).Events.register(d,{onclick:T})}d=null;g=null}else{document.getElementById(s).checked="";document.getElementById("div_"+s).style.display="none"}if(document.getElementById(b[0]))document.getElementById(b[0]).focus()}function T(){a.ProcessAffiliateCheckChanged(s,b[b.length-1])}function db(){W(false);a.EnableRows(h,y,x);l.EnableToolbar();a.DisposeIemPickerIfExists(o);F=a.Mode.None;g=null;i=-1;if(document.getElementById(s))document.getElementById(s).detachEvent("onclick",T)}function W(d){for(var e=0;e<D.length;e++){var a=document.getElementById(D[e]);if($Browser.isIE())if(d){c.create(null).Events.register(a,{onkeyup:q});c.create(null).Events.register(a,{onpropertychange:q})}else{a.detachEvent("onkeyup",q);a.detachEvent("onpropertychange",q)}else if(d){c.create(null).Events.register(a,{onkeyup:q});c.create(null).Events.register(a,{onchange:q})}else{a.detachEvent("onkeyup",q);a.detachEvent("onchange",q)}a=null}var b=document.getElementById(P);if($Browser.isIE())if(d){c.create(null).Events.register(b,{onkeyup:t});c.create(null).Events.register(b,{onpropertychange:t})}else{b.detachEvent("onkeyup",t);b.detachEvent("onpropertychange",t)}else if(d){c.create(null).Events.register(b,{onkeyup:t});c.create(null).Events.register(b,{onchange:t})}else{b.detachEvent("onkeyup",t);b.detachEvent("onchange",t)}}function q(){a.ProcessFieldChange(H[0],D);a.ProcessFieldChange(H[1],D)}function Db(e){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),p.Low,C);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);a.ResetTextAreaStrToMaxLength(P);var j=a.ReturnCurrentThumbnailUrl(e,s,g,i,u),h=a.ReturnCurrentWebAddress(s,b[4],g,i,A+m[0]),c=null,f=document.getElementById(rb);if(f)c=f.getAttribute("SO");else c=document.getElementById(wb+e).getAttribute("SO");k.update_music_entry(e,document.getElementById(b[0]).value,document.getElementById(b[1]).value,document.getElementById(b[2]).value,document.getElementById(b[3]).value,h,j,c,nb,null,bb,d.ms_timeout)}catch(l){bb()}}function nb(b){if(R)R.style.display="";var f=[b.Title.encodeHtml(),b.Artist.encodeHtml(),b.Album.encodeHtml(),b.Description.encodeHtml()],c=[b.TitleUrl,b.ArtistUrl,b.AlbumUrl,""];for(var a=0;a<m.length;a++){var g=document.getElementById(A+m[a]);if(m[a]&&g&&c[a]!=""){g.href=c[a];g.innerHTML=f[a]}else if(m[a]&&c[a]=="")document.getElementById(m[a]).innerHTML=f[a];else if(m[a]){var i='<a href="'+c[a]+'" id="'+A+m[a]+'" target="_blank">'+f[a]+"</a>";document.getElementById(m[a]).innerHTML=i}}if(b.AlbumCoverUrl){var d=document.getElementById(A+u+e);d.href=b.TitleUrl;d.innerHTML='<img id="img_'+u+e+'" src="'+b.AlbumCoverUrl+'" />';document.getElementById("div_"+u+e).style.display=""}else{var d=document.getElementById(A+u+e);if(d)d.innerHTML="";document.getElementById("div_"+u+e).style.display="none"}db();h.deleteRow(document.getElementById(O).rowIndex)}function bb(){a.ProcessFailure(h,"lists_saveerror",p,C,y,x)}function eb(){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),p.Low,n==a.Mode.Edit?C:B);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);var g="",c="",e="";if(n==a.Mode.Edit){g=document.getElementById(b[0]).value;c=document.getElementById(b[1]).value;e=document.getElementById(b[2]).value}if(n==a.Mode.Add){g=document.getElementById(f[0]).value;c=document.getElementById(f[1]).value;e=document.getElementById(f[2]).value}k.music_search_affiliate(g,c,e,lb,null,Y,d.ms_timeout)}catch(h){Y()}}function lb(b){if(n==a.Mode.Add&&E==a.Mode.None)return;g=b;a.ProcessSearchSuccess(b,a.ListType.Music,n==a.Mode.Add?J:ab,n==a.Mode.Edit?C:B,p,d.itempicker_noresults,d.itempicker_blanksquareimage,d.itempicker_blankrectangleimage)}function Y(){a.ProcessSearchFailure(h,"lists_saveerror",p,n==a.Mode.Edit?C:B)}function Ab(c){var b=document.getElementById(gb+c).innerText;a.ShowDeleteConfirmation(b,Fb)}function sb(){var b=a.ProcessDeleteSuccess(h,e,V,I,l,y,x);if(z)z.UpdateSOValuesOnDelete(b)}function Fb(){a.PrepareSaveDeleteListEntry(h,"lists_savewait",p.Low,"div_"+fb+e,N,M);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);var b=ListService.ListType.Music;k.delete_list_entry(b,e,sb,null,X,d.ms_timeout)}catch(c){X()}}function X(){a.ProcessFailure(h,"lists_music_deleteerror",p,"div_"+fb+e,y,x)}};Spaces.Lists.MusicList.registerClass("Spaces.Lists.MusicList","$Binding");Spaces.Lists.MusicList.Params=new $Enum("fppurl","ms_timeout","list_id","edit_icon","edit_disabled_icon","delete_icon","delete_disabled_icon","zero_entries_id","itempicker_noresults","itempicker_blanksquareimage","itempicker_blankrectangleimage","theme");registerNamespace("Spaces.Lists");Spaces.Lists.BookList=function(T,d){Spaces.Lists.BookList.initializeBase(this,arguments);d=this.getParameters();var a=Spaces.Lists.Helper,q=Spaces.Lists.Helper.ActionType,M=this,F,c,l=null,h=T,jb=null,s=null,z=null,W=3,J=2,k,y=null,O=null,x=null,N=null,e=null,gb="Name",zb="Author",Cb="ISBN",Bb="Description",u="TN",hb="nf",j=null,A="link_",m="input_",xb="EditBtn",rb="input_O1",f=[m+"addName",m+"addAuthor",m+"addISBN",m+"addDescription",m+"addUrl"],v=new Array(m+"addName"),b=[m+"editName",m+"editAuthor",m+"editISBN",m+"editDescription",m+"editUrl"],D=new Array(m+"editName"),I=["editSearchBtn","editSaveBtn","editClearAllBtn","editCancelBtn"],ab=["searchBtn","saveBtn","clearAllBtn","cancelBtn"],r="editThumbnailCB",R=f[3],Q=b[3],P="bookEditControl",ob="actionType",L=null,G=a.Mode.None,S=null,B="div_addControlNotification",C="div_editControlNotification",o=null,Hb="ta_maxlength",n=a.Mode.None,g=null,i=-1,K="addSearchDiv",bb="editSearchDiv",E=a.Mode.None,kb;this.initialize=function(){F=new $Memory.Groups;c=F.create(null);c.Events.register(T,{onclick:Db});jb=d.list_id;if(h.rows.length==J)h.style.display="none";y=d.edit_icon;O=d.edit_disabled_icon;x=d.delete_icon;N=d.delete_disabled_icon;L=d.zero_entries_id;kb=d.theme;Spaces.Lists.BookList.callBaseMethod(this,"initialize",arguments);M.registerFor("Spaces.Lists.AddListEntry",vb);M.registerFor("Spaces.Lists.ItemPicker",pb);M.registerFor("Spaces.Lists.Reorder",qb)};Spaces.Lists.BookList.registerBaseMethod(this,"initialize");this.dispose=function(c){Spaces.Lists.BookList.callBaseMethod(this,"dispose",arguments);if(F){F.dispose(c);F=null}k=null;h=null;T=null;l=null;M=null;a=null;j=null;f=null;v=null;b=null;D=null;I=null;v=null;L=null;s=null;z=null};Spaces.Lists.BookList.registerBaseMethod(this,"dispose");function vb(a,b){if(b){l=a;c.Events.register(a,{firstclick:ib});l.SetInitialFocusElementId(f[0]);l.SetCurrentListElement(h)}}function qb(b,a){if(a)z=b}function pb(a,b){if(b){s=a;c.Events.register(a,{ItemPickerElementClicked:mb})}}function V(){if(s){s.unload();g=null;i=-1}}function mb(b){if(g){i=b.Package;if(i==-1)a.ProcessAddModeWebAddrOnItemPickerChange(n,f[4]);else lb()};}function lb(){if(g&&i!=-1)if(n==a.Mode.Add){for(var c=0;c<3;c++)a.SetAndAdjustTextBoxStrToMaxLength(f[c],g[i].FieldValues[c]);a.SetAndAdjustTextBoxStrToMaxLength(f[4],g[i].WebAddress);document.getElementById(f[4]).disabled=true;w()}else{for(var c=0;c<3;c++)a.SetAndAdjustTextBoxStrToMaxLength(b[c],g[i].FieldValues[c]);a.SetAndAdjustTextBoxStrToMaxLength(b[4],g[i].WebAddress);p()}}function ib(){var a=null;for(var b=0;b<v.length;b++){a=document.getElementById(v[b]);if($Browser.isIE()){c.Events.register(a,{onkeyup:w});c.Events.register(a,{onpropertychange:w})}else{c.Events.register(a,{onkeyup:w});c.Events.register(a,{onchange:w})}}a=document.getElementById(R);if($Browser.isIE()){c.Events.register(a,{onkeyup:H});c.Events.register(a,{onpropertychange:H})}else{c.Events.register(a,{onkeyup:H});c.Events.register(a,{onchange:H})}l.detachEvent("firstclick",ib);c.Events.register(l.GetAddAreaElement(),{onclick:tb});w()}var w=function(){a.ProcessFieldChange(ab[0],v);a.ProcessFieldChange(ab[1],v)},H=function(){a.ResetTextAreaStrToMaxLength(R)},t=function(){a.ResetTextAreaStrToMaxLength(Q)};function tb(d){var b=null;if(d){b=d.target;if(!b)b=d.srcElement;var e=b.getAttribute(ob),c=a.GetActionType(e);if(e&&!b.disabled){if(!o)o=Spaces.Controls.NotificationBar.Importance;if(c==q.Save){Fb();E=a.Mode.None}else if(c==q.Search){E=a.Mode.Search;n=a.Mode.Add;V();fb()}else if(c==q.Cancel){a.ProcessAddAreaCancelClick(h,l,f,J,L,y,x,s,K,B);E=a.Mode.None}else if(c==q.ClearAll){a.ClearAllFields(f,s,K);E=a.Mode.None}w()}}}function Fb(){a.PrepareToProcessAdd(l,v);if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);a.ResetTextAreaStrToMaxLength(R);var c="",b=document.getElementById(f[4]),e=b.value;if(g&&i!=-1){c=g[i].ThumbnailUrl;e=g[i].WebAddress}try{k.add_book_entry(jb,document.getElementById(f[0]).value,document.getElementById(f[1]).value,document.getElementById(f[2]).value,document.getElementById(f[3]).value,e,c,kb,wb,null,db,d.ms_timeout);b.disabled=false}catch(h){db()}}function wb(b){a.ProcessAddSuccess(h,b,l,f,W,J,L,y,x,s,K,B);g=null;if(z)z.UpdateSOValuesOnAdd()}function db(b){a.ProcessAddFailure(l,ListService,b,"lists_savetimeout","lists_saveerror")}function Db(f){var c=null;if(f){c=f.target;if(!c)c=f.srcElement;var k=c.getAttribute("actionType");if(k&&!c.disabled){if(c.getAttribute("rowId")&&G!=a.Mode.Edit)e=c.getAttribute("rowId");if(!o)o=Spaces.Controls.NotificationBar.Importance;j=[gb+e,zb+e,Cb+e,Bb+e];var g=document.getElementById(e),d=a.GetActionType(k);if(d==q.Edit&&!g.disabled&&G!=a.Mode.Edit){yb(e,j);X(true);p();G=a.Mode.Edit}else if(d==q.Delete&&!g.disabled&&G!=a.Mode.Edit)Ab(e);else if(d==q.Save)Eb(e);else if(d==q.Search){n=a.Mode.Edit;V();fb()}else if(d==q.ClearAll){var i="";if(document.getElementById("div_"+r).style.display!="none")i=document.getElementById(b[b.length-1]).value;a.ClearAllFields(b,s,bb);document.getElementById(b[b.length-1]).value=i}else if(d==q.Cancel){eb();h.deleteRow(document.getElementById(P).rowIndex);document.getElementById(e).style.display=""}}}}function yb(f,k){var m=document.getElementById(f);S=m;a.PrepareEditMode(h,l,m,P,gblEditControlHtml,6,I,b,k,O,N);var e=document.getElementById(A+k[0]);if(e&&e.href)document.getElementById(b[b.length-1]).value=e.href;var i=false;if(document.getElementById("div_"+u+f).style.display!="none"){var j=document.getElementById("img_"+u+f);if(j&&j.src)i=true}var g=document.getElementById(b[b.length-1]);if(i){var d=document.getElementById(r);if(d){if(d.checked)g.disabled="disabled";c.Events.register(d,{onclick:U})}d=null;g=null}else{document.getElementById(r).checked="";document.getElementById("div_"+r).style.display="none"}if(document.getElementById(b[0]))document.getElementById(b[0]).focus()}function U(){a.ProcessAffiliateCheckChanged(r,b[b.length-1])}function eb(){X(false);a.EnableRows(h,y,x);l.EnableToolbar();a.DisposeIemPickerIfExists(s);G=a.Mode.None;g=null;i=-1;if(document.getElementById(r))document.getElementById(r).detachEvent("onclick",U)}function X(d){for(var e=0;e<D.length;e++){var a=document.getElementById(D[e]);if($Browser.isIE())if(d){c.Events.register(a,{onkeyup:p});c.Events.register(a,{onpropertychange:p})}else{a.detachEvent("onkeyup",p);a.detachEvent("onpropertychange",p)}else if(d){c.Events.register(a,{onkeyup:p});c.Events.register(a,{onchange:p})}else{a.detachEvent("onkeyup",p);a.detachEvent("onchange",p)}a=null}var b=document.getElementById(Q);if($Browser.isIE())if(d){c.Events.register(b,{onkeyup:t});c.Events.register(b,{onpropertychange:t})}else{b.detachEvent("onkeyup",t);b.detachEvent("onpropertychange",t)}else if(d){c.Events.register(b,{onkeyup:t});c.Events.register(b,{onchange:t})}else{b.detachEvent("onkeyup",t);b.detachEvent("onchange",t)}}function p(){a.ProcessFieldChange(I[0],D);a.ProcessFieldChange(I[1],D)}function Eb(e){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),o.Low,C);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);a.ResetTextAreaStrToMaxLength(Q);var l=a.ReturnCurrentThumbnailUrl(e,r,g,i,u),h=a.ReturnCurrentWebAddress(r,b[4],g,i,A+j[0]),c=null,f=document.getElementById(rb);if(f)c=f.getAttribute("SO");else c=document.getElementById(xb+e).getAttribute("SO");k.update_book_entry(e,document.getElementById(b[0]).value,document.getElementById(b[1]).value,document.getElementById(b[2]).value,document.getElementById(b[3]).value,h,l,c,ub,null,cb,d.ms_timeout)}catch(m){cb()}}function ub(b){if(S)S.style.display="";var d=[b.Title.encodeHtml(),b.Author.encodeHtml(),b.Isbn.encodeHtml(),b.Description.encodeHtml()],c=[b.Url,"","",""];for(var a=0;a<j.length;a++){var g=document.getElementById(A+j[a]);if(j[a]&&g&&c[a]!=""){g.href=c[a];g.innerHTML=d[a]}else if(j[a]&&c[a]=="")document.getElementById(j[a]).innerHTML=d[a];else if(j[a]){var i='<a href="'+c[a]+'" id="'+A+j[a]+'" target="_blank">'+d[a]+"</a>";document.getElementById(j[a]).innerHTML=i}if(d[a].trim()=="")document.getElementById("div_"+j[a]).style.display="none";else document.getElementById("div_"+j[a]).style.display=""}if(b.CoverUrl){var f=document.getElementById(A+u+e);f.href=b.Url;f.innerHTML='<img id="img_'+u+e+'" src="'+b.CoverUrl+'" />';document.getElementById("div_"+u+e).style.display=""}else{var f=document.getElementById(A+u+e);if(f)f.innerHTML="";document.getElementById("div_"+u+e).style.display="none"}eb();h.deleteRow(document.getElementById(P).rowIndex)}function cb(){a.ProcessFailure(h,"lists_book_saveerror",o,C,y,x)}function fb(){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),o.Low,n==a.Mode.Edit?C:B);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);var e="",c="",g="";if(n==a.Mode.Edit){e=document.getElementById(b[0]).value;c=document.getElementById(b[1]).value;g=document.getElementById(b[2]).value}if(n==a.Mode.Add){e=document.getElementById(f[0]).value;c=document.getElementById(f[1]).value;g=document.getElementById(f[2]).value}k.book_search_affiliate(e,c,g,nb,null,Z,d.ms_timeout)}catch(h){Z()}}function nb(b){if(n==a.Mode.Add&&E==a.Mode.None)return;g=b;a.ProcessSearchSuccess(b,a.ListType.Book,n==a.Mode.Add?K:bb,n==a.Mode.Edit?C:B,o,d.itempicker_noresults,d.itempicker_blanksquareimage,d.itempicker_blankrectangleimage)}function Z(){a.ProcessSearchFailure(h,"lists_book_saveerror",o,n==a.Mode.Edit?C:B)}function Ab(c){var b=document.getElementById(gb+c).innerText;a.ShowDeleteConfirmation(b,Gb)}function sb(){var b=a.ProcessDeleteSuccess(h,e,W,J,l,y,x);if(z)z.UpdateSOValuesOnDelete(b)}function Gb(){a.PrepareSaveDeleteListEntry(h,"lists_savewait",o.Low,"div_"+hb+e,O,N);try{if(!k)k=Spaces.Lists.Utility.GetListFppService(d.fppurl);var b=ListService.ListType.Book;k.delete_list_entry(b,e,sb,null,Y,d.ms_timeout)}catch(c){Y()}}function Y(){a.ProcessFailure(h,"lists_music_deleteerror",o,"div_"+hb+e,y,x)}};Spaces.Lists.BookList.registerClass("Spaces.Lists.BookList","$Binding");Spaces.Lists.BookList.Params=new $Enum("fppurl","ms_timeout","list_id","edit_icon","edit_disabled_icon","delete_icon","delete_disabled_icon","affiliate_enabled","zero_entries_id","itempicker_noresults","itempicker_blanksquareimage","itempicker_blankrectangleimage","theme");registerNamespace("Spaces.Lists");Spaces.Lists.GenericList=function(H,c){Spaces.Lists.GenericList.initializeBase(this,arguments);c=this.getParameters();var a=Spaces.Lists.Helper,n=Spaces.Lists.Helper.ActionType,G=this,v,b,e=null,d=H,U=null,J=3,y=2,s=null,i,p=null,C=null,o=null,B=null,f=null,Q="Name",hb="Description",kb="Url",R="nf",g=null,T="link_",m="input_",eb="EditBtn",Y="input_O1",k=[m+"addName",m+"addUrl",m+"addDescription"],q=new Array(m+"addName"),j=[m+"editName",m+"editUrl",m+"editDescription"],x=new Array(m+"editName"),L=["editSaveBtn","editClearAllBtn","editCancelBtn"],E=k[2],z=j[2],D="genericEditControl",W="actionType",A=null,u="",F=null,nb="div_addControlNotification",I="div_editControlNotification",t=null,ob="ta_maxlength",V="";this.initialize=function(){v=new $Memory.Groups;b=v.create(null);b.Events.register(H,{onclick:ib});U=c.list_id;if(d.rows.length==y)d.style.display="none";p=c.edit_icon;C=c.edit_disabled_icon;o=c.delete_icon;B=c.delete_disabled_icon;V=c.theme;A=c.zero_entries_id;Spaces.Lists.GenericList.callBaseMethod(this,"initialize",arguments);G.registerFor("Spaces.Lists.AddListEntry",cb);G.registerFor("Spaces.Lists.Reorder",X)};Spaces.Lists.GenericList.registerBaseMethod(this,"initialize");this.dispose=function(b){Spaces.Lists.GenericList.callBaseMethod(this,"dispose",arguments);if(v){v.dispose(b);v=null}i=null;d=null;H=null;e=null;G=null;a=null;g=null;k=null;q=null;j=null;x=null;L=null;q=null;A=null;s=null};Spaces.Lists.GenericList.registerBaseMethod(this,"dispose");function cb(a,c){if(c){e=a;b.Events.register(a,{firstclick:S});e.SetInitialFocusElementId(k[0]);e.SetCurrentListElement(d)}}function X(b,a){if(a)s=b}function S(){var a=null;for(var c=0;c<q.length;c++){a=document.getElementById(q[c]);if($Browser.isIE()){b.Events.register(a,{onkeyup:r});b.Events.register(a,{onpropertychange:r})}else{b.Events.register(a,{onkeyup:r});b.Events.register(a,{onchange:r})}}a=document.getElementById(E);if($Browser.isIE()){b.Events.register(a,{onkeyup:w});b.Events.register(a,{onpropertychange:w})}else{b.Events.register(a,{onkeyup:w});b.Events.register(a,{onchange:w})}e.detachEvent("firstclick",S);b.Events.register(e.GetAddAreaElement(),{onclick:ab});r()}var r=function(){a.ProcessFieldChange("saveBtn",q)},w=function(){a.ResetTextAreaStrToMaxLength(E)},l=function(){a.ResetTextAreaStrToMaxLength(z)};function ab(f){var b=null;if(f){b=f.target;if(!b)b=f.srcElement;var g=b.getAttribute(W),c=a.GetActionType(g);if(g){if(c==n.Save){if(!b.disabled)lb()}else if(c==n.Cancel)a.ProcessAddAreaCancelClick(d,e,k,y,A,p,o);else if(c==n.ClearAll)a.ClearAllFields(k);r()}}}function lb(){a.PrepareToProcessAdd(e,q);if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);a.ResetTextAreaStrToMaxLength(E);try{i.add_general_entry(U,document.getElementById(k[0]).value,document.getElementById(k[1]).value,document.getElementById(k[2]).value,V,db,null,O,c.ms_timeout)}catch(b){O()}}function db(b){a.ProcessAddSuccess(d,b,e,k,J,y,A,p,o);if(s)s.UpdateSOValuesOnAdd()}function O(b){a.ProcessAddFailure(e,ListService,b,"lists_savetimeout","lists_saveerror")}function ib(e){var b=null;if(e){b=e.target;if(!b)b=e.srcElement;var k=b.getAttribute("actionType");if(k&&!b.disabled){if(b.getAttribute("rowId")&&u!="Edit")f=b.getAttribute("rowId");if(!t)t=Spaces.Controls.NotificationBar.Importance;g=[Q+f,kb+f,hb+f];var i=document.getElementById(f),c=a.GetActionType(k);if(c==n.Edit&&!i.disabled&&u!="Edit"){fb(f,g);K(true);h();u="Edit"}else if(c==n.Delete&&!i.disabled&&u!="Edit")gb(f);else if(c==n.Save){jb(f);u=""}else if(c==n.ClearAll){a.ClearAllFields(j);h()}else if(c==n.Cancel){P();d.deleteRow(document.getElementById(D).rowIndex);document.getElementById(f).style.display="";u=""}}}}function fb(f,b){var c=document.getElementById(f);F=c;a.PrepareEditMode(d,e,c,D,gblEditControlHtml,6,L,j,b,C,B);document.getElementById(z).value=document.getElementById(b[2]).innerText;if(document.getElementById(j[0]))document.getElementById(j[0]).focus()}function P(){K(false);a.EnableRows(d,p,o);e.EnableToolbar()}function K(d){for(var e=0;e<x.length;e++){var a=document.getElementById(x[e]);if($Browser.isIE())if(d){b.Events.register(a,{onkeyup:h});b.Events.register(a,{onpropertychange:h})}else{a.detachEvent("onkeyup",h);a.detachEvent("onpropertychange",h)}else if(d){b.Events.register(a,{onkeyup:h});b.Events.register(a,{onchange:h})}else{a.detachEvent("onkeyup",h);a.detachEvent("onchange",h)}a=null}var c=document.getElementById(z);if($Browser.isIE())if(d){b.Events.register(c,{onkeyup:l});b.Events.register(c,{onpropertychange:l})}else{c.detachEvent("onkeyup",l);c.detachEvent("onpropertychange",l)}else if(d){b.Events.register(c,{onkeyup:l});b.Events.register(c,{onchange:l})}else{c.detachEvent("onkeyup",l);c.detachEvent("onchange",l)}}function h(){a.ProcessFieldChange("editSaveBtn",x)}function jb(e){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),t.Low,I);try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);a.ResetTextAreaStrToMaxLength(z);var b=null,d=document.getElementById(Y);if(d)b=d.getAttribute("SO");else b=document.getElementById(eb+e).getAttribute("SO");i.update_general_entry(e,document.getElementById(j[0]).value,document.getElementById(j[1]).value,document.getElementById(j[2]).value,b,bb,null,N,c.ms_timeout)}catch(f){N()}}function bb(c){if(F)F.style.display="";var b=[c.Name.encodeHtml(),c.Url,c.Description.encodeHtml()],f=["",c.Url,""];for(var a=0;a<g.length;a++){var e=document.getElementById(T+g[a]);if(g[a]&&e&&b[a]!=""){e.href=b[a];e.innerHTML=b[a]}else if(g[a]&&f[a]=="")document.getElementById(g[a]).innerHTML=b[a];else if(g[a]){var h='<a href="'+f[a]+'" id="'+T+g[a]+'" target="_blank">'+b[a]+"</a>";document.getElementById(g[a]).innerHTML=h}}P();d.deleteRow(document.getElementById(D).rowIndex)}function N(){a.ProcessFailure(d,"lists_saveerror",t,I,p,o)}function gb(c){var b=document.getElementById(Q+c).innerText;a.ShowDeleteConfirmation(b,mb)}function Z(){var b=a.ProcessDeleteSuccess(d,f,J,y,e,p,o);if(s)s.UpdateSOValuesOnDelete(b)}function mb(){a.PrepareSaveDeleteListEntry(d,"lists_savewait",t.Low,"div_"+R+f,C,B);try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);var b;b=ListService.ListType.Custom;i.delete_list_entry(b,f,Z,null,M,c.ms_timeout)}catch(e){M()}}function M(){a.ProcessFailure(d,"lists_deleteitemerror",t,"div_"+R+f,p,o)}};Spaces.Lists.GenericList.registerClass("Spaces.Lists.GenericList","$Binding");Spaces.Lists.GenericList.Params=new $Enum("fppurl","ms_timeout","list_id","edit_icon","edit_disabled_icon","delete_icon","delete_disabled_icon","affiliate_enabled","zero_entries_id","theme");registerNamespace("Spaces.Lists");Spaces.Lists.MovieList=function(Z,c){Spaces.Lists.MovieList.initializeBase(this,arguments);c=this.getParameters();var a=Spaces.Lists.Helper,r=Spaces.Lists.Helper.ActionType,U=this,H,f,k=null,h=Z,pb=null,o=null,A=null,db=3,L=2,i,u=null,P=null,t=null,N=null,b=null,nb="Title",R="YearRel",Jb="Description",x="TN",Mb="div_dt",F="nf",m=null,v="link_",B="input_",Fb="EditBtn",zb="input_O1",j=[B+"addTitle",B+"addDescription",B+"addUrl"],y=new Array(j[0]),d=[B+"editTitle",B+"editDescription",B+"editUrl"],E=new Array(d[0]),K=["editSearchBtn","editSaveBtn","editClearAllBtn","editCancelBtn"],hb=["searchBtn","saveBtn","clearAllBtn","cancelBtn"],p="editThumbnailCB",Q="Url",X=j[1],W=d[1],V="movieEditControl",wb="actionType",S=null,I=a.Mode.None,Y=null,C="div_addControlNotification",D="div_editControlNotification",l=null,Pb="ta_maxlength",n=a.Mode.None,e=null,g=-1,M="addSearchDiv",ib="editSearchDiv",G=a.Mode.None,qb="",s,T,Gb="";this.initialize=function(){H=new $Memory.Groups;f=H.create("listitem");f.Events.register(Z,{onclick:Kb});pb=c.list_id;if(h.rows.length==L)h.style.display="none";u=c.edit_icon;P=c.edit_disabled_icon;t=c.delete_icon;N=c.delete_disabled_icon;S=c.zero_entries_id;qb=c.theme;s=c.affiliate_enabled=="true"?true:false;T=c.is_author_mode=="True"?true:false;Gb=c.details_link_text;Spaces.Lists.MovieList.callBaseMethod(this,"initialize",arguments);U.registerFor("Spaces.Lists.AddListEntry",Cb);U.registerFor("Spaces.Lists.ItemPicker",xb);U.registerFor("Spaces.Lists.Reorder",yb)};Spaces.Lists.MovieList.registerBaseMethod(this,"initialize");this.dispose=function(b){Spaces.Lists.MovieList.callBaseMethod(this,"dispose",arguments);if(H){H.dispose(b);H=null}i=null;h=null;Z=null;k=null;U=null;a=null;m=null;j=null;y=null;d=null;E=null;K=null;y=null;S=null;if(o){o.unload();o=null}A=null};Spaces.Lists.MovieList.registerBaseMethod(this,"dispose");function Cb(a,b){if(b){k=a;f.Events.register(a,{firstclick:ob});k.SetInitialFocusElementId(j[0]);k.SetCurrentListElement(h)}}function yb(b,a){if(a)A=b}function xb(a,b){if(b){o=a;f.Events.register(a,{ItemPickerElementClicked:tb})}}function cb(){if(o){o.unload();e=null;g=-1}}function tb(b){if(e){g=b.Package;if(g==-1)a.ProcessAddModeWebAddrOnItemPickerChange(n,j[2]);else rb()};}function rb(){if(e&&g!=-1)if(n==a.Mode.Add){a.SetAndAdjustTextBoxStrToMaxLength(j[0],e[g].FieldValues[0]);a.SetAndAdjustTextBoxStrToMaxLength(j[2],e[g].WebAddress);document.getElementById(j[2]).disabled=true;z()}else{a.SetAndAdjustTextBoxStrToMaxLength(d[0],e[g].FieldValues[0]);a.SetAndAdjustTextBoxStrToMaxLength(d[2],e[g].WebAddress);q()}}function ob(){var a=null;for(var b=0;b<y.length;b++){a=document.getElementById(y[b]);if($Browser.isIE()){f.Events.register(a,{onkeyup:z});f.Events.register(a,{onpropertychange:z})}else{f.Events.register(a,{onkeyup:z});f.Events.register(a,{onchange:z})}}a=document.getElementById(X);if($Browser.isIE()){f.Events.register(a,{onkeyup:J});f.Events.register(a,{onpropertychange:J})}else{f.Events.register(a,{onkeyup:J});f.Events.register(a,{onchange:J})}k.detachEvent("firstclick",ob);f.Events.register(k.GetAddAreaElement(),{onclick:Bb});z()}var z=function(){a.ProcessFieldChange(hb[0],y);a.ProcessFieldChange(hb[1],y)},J=function(){a.ResetTextAreaStrToMaxLength(X)},w=function(){a.ResetTextAreaStrToMaxLength(W)};function Bb(d){var b=null;if(d){b=d.target;if(!b)b=d.srcElement;var e=b.getAttribute(wb),c=a.GetActionType(e);if(e&&!b.disabled){if(!l)l=Spaces.Controls.NotificationBar.Importance;if(c==r.Save){Nb();G=a.Mode.None}else if(c==r.Search){G=a.Mode.Search;n=a.Mode.Add;cb();mb()}else if(c==r.Cancel){a.ProcessAddAreaCancelClick(h,k,j,L,S,u,t,o,M,C);G=a.Mode.None}else if(c==r.ClearAll){a.ClearAllFields(j,o,M);G=a.Mode.None}z()}}}function Nb(){a.PrepareToProcessAdd(k,y);if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);a.ResetTextAreaStrToMaxLength(X);var m="",h="",l="",d="",b=document.getElementById(j[2]),f=b.value;if(e&&g!=-1){m=e[g].Id;h=e[g].FieldValues[1];l=e[g].FieldValues[2];d=e[g].ThumbnailUrl;f=e[g].WebAddress}try{i.add_movie_entry(pb,document.getElementById(j[0]).value,f,document.getElementById(j[1]).value,m,d,h,l,c.details_glyph_rest,qb,s,Db,null,kb,c.ms_timeout);b.disabled=false}catch(n){kb()}}function Db(b){a.ProcessAddSuccess(h,b,k,j,db,L,S,u,t,o,M,C);e=null;if(A)A.UpdateSOValuesOnAdd()}function kb(b){a.ProcessAddFailure(k,ListService,b,"lists_savetimeout","lists_saveerror")}function Kb(g){var c=null;if(g){c=g.target;if(!c)c=g.srcElement;var k=c.getAttribute("actionType");if(k&&!c.disabled){if(c.getAttribute("rowId")&&I!=a.Mode.Edit)b=c.getAttribute("rowId");if(!l)l=Spaces.Controls.NotificationBar.Importance;var f=c.getAttribute("movieId");if(f&&f.lTrim())Eb(f);else{m=[nb+b,Jb+b];var i=document.getElementById(b),e=a.GetActionType(k);if(e==r.Edit&&!i.disabled&&I!=a.Mode.Edit){Hb(b,m);eb(true);q();I=a.Mode.Edit}else if(e==r.Delete&&!i.disabled&&I!=a.Mode.Edit)Ib(b);else if(e==r.Save)Lb(b);else if(e==r.Search){n=a.Mode.Edit;cb();mb()}else if(e==r.ClearAll){var j="";if(s&&document.getElementById("div_"+p).style.display!="none")j=document.getElementById(d[d.length-1]).value;a.ClearAllFields(d,o,ib);document.getElementById(d[d.length-1]).value=j}else if(e==r.Cancel){lb();h.deleteRow(document.getElementById(V).rowIndex);document.getElementById(b).style.display=""}}}}}function Eb(e){var d=document.getElementById("div_details"+b);if(d.innerHTML.trim()!=""&&d.style.display!="none")O(false,b);else if(d.innerHTML.trim()!=""&&d.style.display=="none")O(true,b);else{if(T){a.DisableRows(h,P,N);a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),l.Low,"div_"+F+b)}try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);i.lookup_movie_detail(e,ub,null,bb,c.ms_timeout)}catch(f){bb()}}}function O(a,b){var d=document.getElementById("div_details"+b);d.style.display=a?"":"none";document.getElementById("img_dt"+b).src=a?c.details_glyph_expanded:c.details_glyph_rest}function ub(c){document.getElementById("div_details"+b).innerHTML=c;if(T){a.HideNotification("div_"+F+b);a.EnableRows(h,u,t)}O(true,b)}function bb(){if(T){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_movie_nodetailfound"),l.High,"div_"+F+b);a.EnableRows(h,u,t)}}function Hb(e,l){var m=document.getElementById(e);Y=m;a.PrepareEditMode(h,k,m,V,gblEditControlHtml,6,K,d,l,P,N);var b=null;if(s)b=document.getElementById(v+l[0]);else b=document.getElementById(v+Q+e);if(b&&b.href)document.getElementById(d[2]).value=b.href;var i=false;if(document.getElementById("div_"+x+e).style.display!="none"){var j=document.getElementById("img_"+x+e);if(j&&j.src)i=true}if(s){var g=document.getElementById(d[d.length-1]);if(i){var c=document.getElementById(p);if(c){if(c.checked)g.disabled="disabled";f.Events.register(c,{onclick:ab})}c=null;g=null}else{document.getElementById(p).checked="";document.getElementById("div_"+p).style.display="none"}}if(document.getElementById(d[0]))document.getElementById(d[0]).focus()}function ab(){a.ProcessAffiliateCheckChanged(p,d[d.length-1])}function lb(){eb(false);a.EnableRows(h,u,t);k.EnableToolbar();a.DisposeIemPickerIfExists(o);I=a.Mode.None;e=null;g=-1;if(document.getElementById(p))document.getElementById(p).detachEvent("onclick",ab)}function eb(c){for(var d=0;d<E.length;d++){var a=document.getElementById(E[d]);if($Browser.isIE())if(c){f.Events.register(a,{onkeyup:q});f.Events.register(a,{onpropertychange:q})}else{a.detachEvent("onkeyup",q);a.detachEvent("onpropertychange",q)}else if(c){f.Events.register(a,{onkeyup:q});f.Events.register(a,{onchange:q})}else{a.detachEvent("onkeyup",q);a.detachEvent("onchange",q)}a=null}var b=document.getElementById(W);if($Browser.isIE())if(c){f.Events.register(b,{onkeyup:w});f.Events.register(b,{onpropertychange:w})}else{b.detachEvent("onkeyup",w);b.detachEvent("onpropertychange",w)}else if(c){f.Events.register(b,{onkeyup:w});f.Events.register(b,{onchange:w})}else{b.detachEvent("onkeyup",w);b.detachEvent("onchange",w)}}function q(){a.ProcessFieldChange(K[0],E);a.ProcessFieldChange(K[1],E)}function Lb(f){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),l.Low,D);try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);a.ResetTextAreaStrToMaxLength(W);var k="",h="";if(s){k=a.ReturnCurrentThumbnailUrl(f,p,e,g,x);h=a.ReturnCurrentWebAddress(p,d[2],e,g,v+m[0])}else h=document.getElementById(d[2]).value;var b="",r="",t="",q=false;if(e&&g!=-1){b=e[g].Id;r=e[g].FieldValues[1];t=e[g].FieldValues[2];q=true}else if(s){b=document.getElementById("a_dt"+f).getAttribute("movieId");if(!b)b="";else{var n=document.getElementById(p);if(n&&!n.checked)b=""}}var j=null,o=document.getElementById(zb);if(o)j=o.getAttribute("SO");else j=document.getElementById(Fb+f).getAttribute("SO");i.save_selected_match(f,document.getElementById(d[0]).value,h,document.getElementById(d[1]).value,b,k,r,t,q,j,vb,null,jb,c.ms_timeout)}catch(u){jb()}}function vb(a){if(Y)Y.style.display="";var g=[a.Title.encodeHtml(),a.Description.encodeHtml()],e=[s?a.InfoPageUrl:"",""];for(var c=0;c<m.length;c++){var d=document.getElementById(v+m[c]);if(m[c]&&d&&e[c]!=""){d.href=e[c];d.innerHTML=g[c]}else if(m[c]&&e[c]=="")document.getElementById(m[c]).innerHTML=g[c];else if(m[c]){var i='<a href="'+e[c]+'" id="'+v+m[c]+'" target="_blank">'+g[c]+"</a>";document.getElementById(m[c]).innerHTML=i}}if(s){if(a.YearReleased&&a.YearReleased.trim()){document.getElementById("div_"+R+b).style.display="";document.getElementById(R+b).innerHTML=a.YearReleased}else{document.getElementById(R+b).innerHTML="";document.getElementById("div_"+R+b).style.display="none"}if(a.MsnMovieId&&a.MsnMovieId.lTrim()){if(document.getElementById("a_dt"+b).attributes["movieId"].value.trim()!=a.MsnMovieId.trim()){document.getElementById("a_dt"+b).attributes["movieId"].value=a.MsnMovieId.trim();document.getElementById("div_details"+b).innerHTML="";O(false,b);document.getElementById("div_dt"+b).style.display=""}}else{document.getElementById("div_details"+b).innerHTML="";document.getElementById(Mb+b).style.display="none"}}else{var d=document.getElementById(v+Q+b);if(a.InfoPageUrl)if(!d){var i='<a href="'+a.InfoPageUrl+'" id="'+v+Q+b+'" target="_blank">'+a.InfoPageUrl+"</a>";document.getElementById("div_"+Q+b).innerHTML=i}else{d.style.display="";d.href=a.InfoPageUrl;d.innerText=a.InfoPageUrl}else if(d){d.href="";d.innerText="";d.style.display="none"}}if(a.InfoPageUrl&&a.ThumbnailUrl){var f=document.getElementById(v+x+b);f.href=a.InfoPageUrl;f.innerHTML='<img id="img_'+x+b+'" src="'+a.ThumbnailUrl+'" class="thumbnailCell" />';document.getElementById("div_"+x+b).style.display=""}else{var f=document.getElementById(v+x+b);if(f)f.innerHTML="";document.getElementById("div_"+x+b).style.display="none"}lb();h.deleteRow(document.getElementById(V).rowIndex)}function jb(){a.ProcessFailure(h,"MSNE_saveerror",l,D,u,t)}function mb(){a.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"),l.Low,n==a.Mode.Edit?D:C);try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);var b="";if(n==a.Mode.Edit)b=document.getElementById(d[0]).value;if(n==a.Mode.Add)b=document.getElementById(j[0]).value;i.search_movies(b,sb,null,gb,c.ms_timeout)}catch(e){gb()}}function sb(b){if(n==a.Mode.Add&&G==a.Mode.None)return;e=b;a.ProcessSearchSuccess(b,a.ListType.Movie,n==a.Mode.Add?M:ib,n==a.Mode.Edit?D:C,l,c.itempicker_noresults,c.itempicker_blanksquareimage,c.itempicker_blankrectangleimage)}function gb(){a.ProcessSearchFailure(h,"MSNE_saveerror",l,n==a.Mode.Edit?D:C)}function Ib(c){var b=document.getElementById(nb+c).innerText;a.ShowDeleteConfirmation(b,Ob)}function Ab(){var c=a.ProcessDeleteSuccess(h,b,db,L,k,u,t);if(A)A.UpdateSOValuesOnDelete(c)}function Ob(){a.PrepareSaveDeleteListEntry(h,"lists_savewait",l.Low,"div_"+F+b,P,N);try{if(!i)i=Spaces.Lists.Utility.GetListFppService(c.fppurl);var d=ListService.ListType.Movie;i.delete_list_entry(d,b,Ab,null,fb,c.ms_timeout)}catch(e){fb()}}function fb(){a.ProcessFailure(h,"MSNE__deleteerror",l,"div_"+F+b,u,t)}};Spaces.Lists.MovieList.registerClass("Spaces.Lists.MovieList","$Binding");Spaces.Lists.MovieList.Params=new $Enum("fppurl","ms_timeout","list_id","edit_icon","edit_disabled_icon","delete_icon","delete_disabled_icon","zero_entries_id","is_author_mode","details_link_text","itempicker_noresults","details_glyph_rest","details_glyph_expanded","itempicker_blanksquareimage","itempicker_blankrectangleimage","affiliate_enabled");registerNamespace("Spaces.Lists.Helper");Spaces.Lists.Helper.ActionType=new $Enum("None","Edit","Delete","Search","Save","Cancel","ClearAll");Spaces.Lists.Helper.ListType=new $Enum("Book","Music","Movie","Custom","Blog");Spaces.Lists.Helper.Mode=new $Enum("None","Add","Edit","Search","Delete");Spaces.Lists.Helper.GetActionType=function(a){if(a=="Edit")return Spaces.Lists.Helper.ActionType.Edit;else if(a=="Delete")return Spaces.Lists.Helper.ActionType.Delete;else if(a=="save")return Spaces.Lists.Helper.ActionType.Save;else if(a=="search")return Spaces.Lists.Helper.ActionType.Search;else if(a=="cancel")return Spaces.Lists.Helper.ActionType.Cancel;else if(a=="clearAll")return Spaces.Lists.Helper.ActionType.ClearAll;return Spaces.Lists.Helper.ActionType.None};Spaces.Lists.Helper.AddNewRow=function(f,b){for(var a=b.length-1;a>=0;a--){var d=f.insertRow(2);if(b[a].RowId)d.id=b[a].RowId;if(b[a].RowCss)d.className=b[a].RowCss;if(b[a].RowDisplay==false)d.style.display="none";for(var c=0;c<b[a].ColHtml.length;c++){var e=d.insertCell(-1);if(b[a].ColSpan[c]!=1)e.colSpan=b[a].ColSpan[c];if(b[a].ColCss[c])e.className=b[a].ColCss[c];e.innerHTML=b[a].ColHtml[c]}}};Spaces.Lists.Helper.ClearAllFields=function(b,c,d){for(var a=0;a<b.length;a++)document.getElementById(b[a]).value="";this.DisposeIemPickerIfExists(c,d)};Spaces.Lists.Helper.GetValue=function(a){return a.value.lTrim()};Spaces.Lists.Helper.VerifyAllFieldsAreValid=function(b){for(var a=0;a<b.length;a++)if(!(document.getElementById(b[a])&&this.GetValue(document.getElementById(b[a]))))return false;return true};Spaces.Lists.Helper.ShowHideElement=function(c,b){var a=document.getElementById(c);if(a)if(b)a.style.display="";else a.style.display="none";a=null};Spaces.Lists.Helper.HideAddAreaAndReset=function(a,c,e,d,b){this.ClearAllFields(e);if(a.rows.length==d){this.ShowHideElement(b,true);a.style.display="none"}else{this.ShowHideElement(b,false);a.style.display=""}document.getElementById("addhidebg").style.display="none";Spaces.Lists.NotificationBar.getInstance().hide();c.HideArea();c.ReEnableUI()};Spaces.Lists.Helper.ProcessFieldChange=function(c,b){var a=document.getElementById(c);if(a){if(this.VerifyAllFieldsAreValid(b))a.disabled=false;else a.disabled=true;a=null}};Spaces.Lists.Helper.PrepareToProcessAdd=function(b,a){b.RefreshAd();if(!this.VerifyAllFieldsAreValid(a)){alert(Spaces.Utility.GetString(Spaces.Lists.Strings,"links_validateerror"));return}Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Low,false,Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_savewait"))};Spaces.Lists.Helper.ProcessAddSuccess=function(a,d,c,i,f,b,j,k,l,g,h,e){this.AddNewRow(a,d);d=null;this.HideAddAreaAndReset(a,c,i,b,j);this.CheckEnableAddLink(c,a.rows.length,b,f);this.EnableRows(a,k,l);this.DisposeIemPickerIfExists(g,h);this.HideNotification(e)};Spaces.Lists.Helper.CheckEnableAddLink=function(a,d,c,b){var e=(d-c)/b;if(a)a.UpdateAddLink(e)};Spaces.Lists.Helper.ProcessAddFailure=function(f,e,d,b,c){f.EnableToolbar();var a;if(d==e.FppStatus.ERR_HTTP_TIMEOUT)a=Spaces.Utility.GetString(Spaces.Lists.Strings,b);else a=Spaces.Utility.GetString(Spaces.Lists.Strings,c);Spaces.Lists.NotificationBar.getInstance().show(Spaces.Controls.NotificationBar.Importance.Med,false,a)};Spaces.Lists.Helper.ProcessAddAreaCancelClick=function(b,i,a,d,g,h,j,e,f,c){this.HideAddAreaAndReset(b,i,a,d,g);this.ClearAllFields(a);this.EnableRows(b,h,j);this.DisposeIemPickerIfExists(e,f);this.HideNotification(c)};Spaces.Lists.Helper.DisableRows=function(b){for(var a=2;a<b.rows.length;a++)b.rows[a].disabled=true};Spaces.Lists.Helper.EnableRows=function(b){for(var a=0;a<b.rows.length;a++)b.rows[a].disabled=false};Spaces.Lists.Helper.ShowNotification=function(f,e,d){var a=document.getElementById(d),b=null;if(a.webBindings)for(var c=0;c<a.webBindings.length;c++)if(Object.compare(a.webBindings[c],Spaces.Controls.NotificationBar)){b=a.webBindings[c];break}if(!b)b=Web.Bindings.attachElementBindingSync(a,"Spaces.Controls.NotificationBar",null,Spaces.Lists.NotificationBar.getArguments());b.show(e,false,f)};Spaces.Lists.Helper.HideNotification=function(b){var a=document.getElementById(b);if(a)a.style.display="none"};Spaces.Lists.Helper.PrepareEditMode=function(c,q,d,n,m,k,f,g,o,l,j){this.DisableRows(c,l,j);var p=d.rowIndex,i=c.insertRow(p);i.id=n;var e=i.insertCell(-1);e.style.width="100%";e.colSpan=k;e.innerHTML=m;var b=document.getElementById("hidebg");if($Browser.isIE()){b.style.left=-1*c.offsetLeft;b.style.top=-1*c.offsetTop}b.style.width=this.ReturnScreenWidth()+"px";b.style.height=this.ReturnScreenHeight()+"px";for(var a=0;a<f.length;a++){var h=document.getElementById(f[a]);if(h)Web.Bindings.attachElementBindingSync(h,"Live.Controls.Button",null,null)}for(var a=0;a<g.length-1;a++)document.getElementById(g[a]).value=document.getElementById(o[a]).innerText;d.style.display="none";d=null};Spaces.Lists.Helper.ProcessFailure=function(g,b,d,c){var a;a=Spaces.Utility.GetString(Spaces.Lists.Strings,b);this.ShowNotification(a,d.Med,c)};Spaces.Lists.Helper.PrepareSaveDeleteListEntry=function(f,e,d,c,a,b){this.ShowNotification(Spaces.Utility.GetString(Spaces.Lists.Strings,e),d,c);this.DisableRows(f,a,b)};Spaces.Lists.Helper.ProcessDeleteSuccess=function(a,i,c,b,d,g,h){var e=document.getElementById(i).rowIndex-1;for(var f=0;f<c;f++)a.deleteRow(e);if(a.rows.length==b){d.UpdateHelpTextDisplay(true);a.style.display="none"}this.EnableRows(a,g,h);this.CheckEnableAddLink(d,a.rows.length,b,c);return e};Spaces.Lists.Helper.ShowDeleteConfirmation=function(e,d){var b=Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_deleteitem"),a=b.format(e).encodeHtml()+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",c=new ComplexDialogData([a,null],null,null,Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),null,null,true);Spaces.PopOvers.SimplePopOver("Confirmation",Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_deleteitemtitle"),c,null,d,event.srcElement)};Spaces.Lists.Helper.ResetTextAreaStrToMaxLength=function(c){var a=document.getElementById(c),b=a.getAttribute("ta_maxlength");if(b&&a.value.length>b)a.value=a.value.substr(0,b);a=null};Spaces.Lists.Helper.SetAndAdjustTextBoxStrToMaxLength=function(c,d){var a=document.getElementById(c),b=a.getAttribute("maxlength");if(a&&b)a.value=d.substr(0,b);a=null};Spaces.Lists.Helper.ProcessSearchFailure=function(e,b,d,c){var a;a=Spaces.Utility.GetString(Spaces.Lists.Strings,b);document.getElementById(p_itemPickerDiv).style.display="none";this.ShowNotification(a,d.Med,c)};Spaces.Lists.Helper.ProcessSearchSuccess=function(d,b,c,e,i,h,g,f){var a;if(!d||d.length==0){this.ShowNotification(h,i.High,e);document.getElementById(c).style.display="none"}else{document.getElementById(c).style.display="";if(b==this.ListType.Music)a=[Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_songtitle"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_artisttitle"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_music_albumtitle")];if(b==this.ListType.Book)a=[Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_book_nametitle"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_book_Authortitle"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_book_isbntitle")];if(b==this.ListType.Movie)a=[Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_movie_matchSelectorListTitle"),Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_movie_matchSelectorListYearReleased")];Spaces.Lists.ItemPicker.Create(c,a,d,b,g,f);this.HideNotification(e)}};Spaces.Lists.Helper.DisposeIemPickerIfExists=function(a,b){if(b){var c=document.getElementById(b);if(c)c.style.display="none"}if(a){a.unload();$Binding.remove(a)}};Spaces.Lists.Helper.ProcessAffiliateCheckChanged=function(c,d){var b=document.getElementById(c),a=document.getElementById(d);if(b&&b.checked)a.disabled="disabled";else{a.disabled="";a.value=""}b=null;a=null};Spaces.Lists.Helper.ReturnCurrentThumbnailUrl=function(i,f,c,b,h){var a="",d=document.getElementById(f),g=true;if(document.getElementById("div_"+f).style.display=="none")g=false;if(g){if(d&&!d.checked)a="";else if(c&&b!=-1)a=c[b].ThumbnailUrl;else if(document.getElementById("div_"+h+i).style.display!="none"){var e=document.getElementById("img_"+h+i);if(e)a=e.src;e=null}}else if(c&&b!=-1)a=c[b].ThumbnailUrl;d=null;return a};Spaces.Lists.Helper.ReturnCurrentWebAddress=function(f,h,d,b,i){var a=document.getElementById(f),c=document.getElementById(h).value,g=false;if(document.getElementById("div_"+f).style.display!="none")g=true;if(g){if(a&&a.checked&&d&&b!=-1)c=d[b].WebAddress;else if(a&&a.checked){var e=document.getElementById(i);if(e&&e.href)c=unescape(e.href)}}else if(d&&b!=-1)c=d[b].WebAddress;a=null;return c};Spaces.Lists.Helper.ReturnScreenHeight=function(){var a;if(!$Browser.isIE()&&window.innerHeight&&window.scrollMaxY)a=window.innerHeight+window.scrollMaxY;else if(document.body.scrollHeight>document.body.offsetHeight)a=document.body.scrollHeight;else a=document.body.offsetHeight;return a};Spaces.Lists.Helper.ReturnScreenWidth=function(){var a;if(!$Browser.isIE()&&window.innerHeight&&window.scrollMaxY)a=window.innerWidth+window.scrollMaxX;else if(document.body.scrollWidth>document.body.offsetWidth)a=document.body.scrollWidth;else a=document.body.offsetWidth;return a-5};Spaces.Lists.Helper.PostBack=function(d,c){var b=XMLHttpEx(c,d,false),a=b.ResponseText;if(!b.Exception&&b.Status=="200"){if(a.toLowerCase().indexOf("http")==0)location.href=a}else location.href=c_errorUrl;return a};Spaces.Lists.Helper.ProcessAddModeWebAddrOnItemPickerChange=function(b,c){if(b==this.Mode.Add){var a=document.getElementById(c);if(a)a.disabled=false}};registerNamespace("Spaces.Lists");Spaces.Lists.Reorder=function(k,i){Spaces.Lists.Reorder.initializeBase(this,arguments);i=this.getParameters();var j=Spaces.Lists.Helper,n=this,f,b=k,d=3,c=2,a=null,e=null,g=false,h=null;this.initialize=function(){f=new $Memory.Groups;f.create(null).Events.register(k,{onkeyup:s});if($Browser.isIE())f.create(null).Events.register(b,{onfocusout:l});else f.create(null).Events.register(b,{onchange:l});f.create(null).Events.register(document.getElementById("reorderSaveButton"),{onclick:p});f.create(null).Events.register(document.getElementById("reorderCancelButton"),{onclick:r});Spaces.Lists.Reorder.callBaseMethod(this,"initialize",arguments);n.registerFor("Spaces.Lists.AddListEntry",o)};Spaces.Lists.Reorder.registerBaseMethod(this,"initialize");this.dispose=function(a){Spaces.Lists.Reorder.callBaseMethod(this,"dispose",arguments);if(f){f.dispose(a);f=null}b=null;k=null;n=null;j=null;h=null};Spaces.Lists.Reorder.registerBaseMethod(this,"dispose");function s(){var a=window.event.srcElement;if(a&&a.getAttribute("SO"))if(!g){document.getElementById("reorderSaveDiv").style.display="";g=true}}function o(b,a){if(a)h=b}this.UpdateSOValuesOnAdd=function(){var h=(b.rows.length-c)/d;for(var f=1;f<h;f++){var g=b.rows[f*d+c].cells[0].childNodes[0].childNodes[0];g.value=parseInt(g.value)+1}if(a){for(var f=a.length;f>0;f--){a[f]=a[f-1]+1;e[f]=e[f-1]}a[0]=1;e[0]=0}};this.UpdateSOValuesOnDelete=function(k){var i=(b.rows.length-c)/d,g=(k+1-c)/d;if(a){var j=a[g];a.splice(g,1);e.splice(g,1);for(var f=0;f<i;f++)if(a[f]>j){a[f]=a[f]-1;b.rows[f*d+c].cells[0].childNodes[0].childNodes[0].value=a[f]}}else for(var f=g;f<i;f++){var h=b.rows[f*d+c].cells[0].childNodes[0].childNodes[0];h.value=parseInt(h.value)-1}};function p(){if(a!=null&&e!=null){document.getElementById("addhidebg").style.display="block";document.getElementById("addhidebg").style.height=j.ReturnScreenHeight()+"px";document.getElementById("addhidebg").style.width=j.ReturnScreenWidth()+"px";gblDirtyBit=0;var b=document.getElementById("mainNotificationDiv");b.innerHTML='<img src="'+i.loading_img+'" />'+Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_reorder_loadingwaittext");b.style.display="";setTimeout(q,100)}else m()}function q(){var h=C_CANARY_COOKIE_NAME+"="+encodeURI(GetCookieValue(C_CANARY_COOKIE_NAME))+"&MethodType=reorder&FormMethod=post&newOrder=",l=[],k="",m="";for(var f=0;f<a.length;f++)l[a[f]-1]=f;for(var f=0;f<a.length;f++){k+=b.rows[f*d+c].id+"~"+b.rows[f*d+c].cells[0].childNodes[0].childNodes[0].getAttribute("SO")+"~"+e[f]+"$";m+=l[f]+"~"}h+=m+"&";h+="originalList="+k;var j=XMLHttpEx(h,postUrl,false),g=j.ResponseText;if(!j.Exception&&j.Status=="200")if(g.toLowerCase().indexOf("success")==0)location.href=i.current_url;else location.href=g;else location.href=g;return g}function r(){gblDirtyBit=0;if(a!=null&&e!=null)t(i.current_url);else m()}function t(a){location.href=a}function m(){document.getElementById("reorderSaveDiv").style.display="none";g=false}function l(){var i=window.event.srcElement;if(i){var n=i.getAttribute("SO");if(n){if(!a){a=[];e=[];var o=(b.rows.length-c)/d;for(var f=0;f<o;f++){a[f]=f+1;e[f]=0}}var p=i.parentNode.parentNode.parentNode,k=(p.rowIndex-c)/d;if(!i.value||isNaN(i.value))i.value=a[k];else if(i.value!=a[k]){var j=i.value;if(parseInt(i.value)>a.length){i.value=a.length;j=a.length}else if(parseInt(i.value)<1){i.value=1;j=1}var l=a[k],m=1;if(l<j)m=-1;for(var f=0;f<a.length;f++)if(a[f]>l&&a[f]<=j||a[f]>=j&&a[f]<l){a[f]=parseInt(a[f])+m;b.rows[f*d+c].cells[0].childNodes[0].childNodes[0].value=a[f]}a[k]=parseInt(j);e[k]=1;if(!g){document.getElementById("reorderSaveDiv").style.display="";if(h)h.DisableEditListInfoLink();gblDirtyBit=1;g=true}}}}}};Spaces.Lists.Reorder.registerClass("Spaces.Lists.Reorder","$Binding");Spaces.Lists.Reorder.Params=new $Enum("current_url","loading_img");registerNamespace("Spaces.Lists");Spaces.Lists.ItemPicker=function(I,j){var v=Spaces.Lists.ItemPicker,q=this,b=I,p,C,u,z,K=16,n,h,c=0,t=null,s=null,o=new $Memory.Groups,e=o.create(null),f=o.create("listitems"),g=null,l=0,k=null,m=null,r=null;v.initializeBase(this,arguments);j=this.getParameters();var a=j.listObject,d,w="",i=[];this.initialize=function(){v.callBaseMethod(this,"initialize",arguments);if(a&&a.type)if(a.type==Spaces.Lists.Helper.ListType.Book||a.type==Spaces.Lists.Helper.ListType.Movie){n=75;h=49;d=7;if(j.emptyThumbnailUrl_75x49)w=j.emptyThumbnailUrl_75x49}else{n=75;h=75;d=6;if(j.emptyThumbnailUrl_75x75)w=j.emptyThumbnailUrl_75x75}var b=40;z=h+b;H()};this.dispose=function(){v.callBaseMethod(this,"dispose",arguments);if(q)q.unload()};this.unload=function(){if(t){$Binding.remove(t);t=null}if(s){$Binding.remove(s);s=null}if(i)while(i.length>0){var c=i.pop();$Binding.remove(c._element)}D();if(o!=null){o.dispose();o=null}g=null;j=null;a=null;d=null;C=null;p=null;u=null;q=null;b=null};function F(){event.returnValue=false;if(!(c+d+1>a.listItems.length)){l++;c+=d;y();A();x()}return false}function G(){event.returnValue=false;if(!(c==0)){l--;c-=d;y();A();x()}return false}function H(){if(!d||!b||!a)return;b.style.margin="5px";b.style.styleFloat="left";if(a.type==Spaces.Lists.Helper.ListType.Book||a.type==Spaces.Lists.Helper.ListType.Movie)b.style.width="91%";else b.style.width="99%";if(b.className.indexOf("ContainerBGColor")<=0)b.className+=" ContainerBGColor";if(b.className.indexOf("clearfix")<=0)b.className+=" clearfix";e.Nodes.create("DIV",{className:"ip_instructions",id:"id_ip_instructions",innerHTML:Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_itempicker_instructions").encodeHtml()},null,b);C=e.Nodes.create("DIV",{className:"ip_paging",id:"id_ip_paging",innerHTML:B()},null,b);p=e.Nodes.create("DIV",{className:"ip_strip",id:"id_ip_strip"},null,b);var j=e.Nodes.create("DIV",{id:"id_ip_left"},null,p),g=e.Nodes.create("a",{id:"id_ip_left_anchor",href:"#"},null,j),k=e.Nodes.create("img",{src:$Config.Themes.url+"hig/img/glyph/backnext_~Left~_rest_~ContainerHeaderTextLuminance~.gif",alt:Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_itempicker_previous")},null,g),c={};c.attachtoancestor="2";c.hoversrc=$Config.Themes.url+"hig/img/"+"glyph/backnext_~Left~_hover_~ContainerHeaderTextLuminance~.gif";t=Web.Bindings.attachElementBindingSync(k,"Spaces.Controls.HoverButton",null,c,"hb");y();var h=e.Nodes.create("DIV",{id:"id_ip_right"},null,p),f=e.Nodes.create("a",{id:"id_ip_right_anchor",href:"#"},null,h),i=e.Nodes.create("img",{src:$Config.Themes.url+"hig/img/"+"glyph/backnext_~Right~_rest_~ContainerHeaderTextLuminance~.gif",alt:Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_itempicker_next")},null,f);c={};c.attachtoancestor="2";c.hoversrc=$Config.Themes.url+"hig/img/"+"glyph/backnext_~Right~_hover_~ContainerHeaderTextLuminance~.gif";s=Web.Bindings.attachElementBindingSync(i,"Spaces.Controls.HoverButton",null,c,"hb");e.Events.register(document.getElementById("id_ip_left_anchor"),{onclick:G});e.Events.register(document.getElementById("id_ip_right_anchor"),{onclick:F});x()}function y(){f.Events.dispose();f.Nodes.dispose();if(i)while(i.length>0){var A=i.pop();$Binding.remove(A._element)}var B=20,r=f.Nodes.create("DIV",{id:"id_list_items_container"},{styleFloat:"left"},p);u=f.Nodes.create("ol",{id:"listThumbs"},{listStyleType:"none"},r);var y=c+d<a.listItems.length?c+d:a.listItems.length,s=75,v=9;for(var b=c;b<y;b++){var m=f.Nodes.create("li",null,{width:z+"px"},u),o=6,t=(z-(o+h))/2,e=f.Nodes.create("a",{id:"id_anchor_img_"+(b-c),href:"#",_pos:b.toString(),className:"myPreview"},{marginTop:v+(s-n)/2+"px",width:h+o+"px",display:"block",marginLeft:t+"px"},m),j=a.listItems[b].ThumbnailUrl;if(j==""||j==null)j=w;var q=f.Nodes.create("img",{id:"ip_listitem_image_"+b,className:"ip_listItemImg",src:j},{height:n+"px",width:h+"px"},e);if("id_anchor_img_"+(b-c)==g&&k==l){q.style.border="3px solid white";q.style.padding="0px";if(m.className.indexOf("SelectionBG")<0)m.className+=" SelectionBG"}f.Events.register(document.getElementById("id_anchor_img_"+(b-c)),{onclick:E});e._data=a.listItems[b];e._data.attribs=a.attribs;e._data.thumbnailHeight=n+"px";e._data.thumbnailWidth=h+"px";e._data.ThumbnailUrl=j;var x=Web.Bindings.attachElementBindingSync(e,"Live.Controls.EnhancedPreviewItem",null,null,null);i.push(x);f.Nodes.create("p",{innerHTML:a.listItems[b].Title},null,m)}}function x(){if(c==0)document.getElementById("id_ip_left_anchor").style.visibility="hidden";else document.getElementById("id_ip_left_anchor").style.visibility="visible";var b=a.listItems.length,e=b-c;if(e<=d)document.getElementById("id_ip_right_anchor").style.visibility="hidden";else document.getElementById("id_ip_right_anchor").style.visibility="visible"}function E(){event.returnValue=false;var a;if(event.srcElement.tagName.toLowerCase()=="a")a=event.srcElement;else a=event.srcElement.parentNode;if(g!=a.id||k!=l){if(g!=null&&m!=null&&k!=null)if(k==l){var b=document.getElementById(g);b.firstChild.style.border=m;b.firstChild.style.padding=r;b.parentNode.className=b.parentNode.className.replace("SelectionBG","");b.parentNode.className=b.parentNode.className.replace("ContainerBG","");b.parentNode.className+=" ContainerBGColor"}k=l;m=a.firstChild.style.border;r=a.firstChild.style.padding;a.firstChild.style.border="3px solid white";a.firstChild.style.padding="0px";a.parentNode.className=a.parentNode.className.replace("SelectionBG","");a.parentNode.className=a.parentNode.className.replace("ContainerBGColor","");a.parentNode.className+=" SelectionBG";g=a.id;q.fire("ItemPickerElementClicked",Number.coerceInt(a._pos))}else{var b=document.getElementById(g);b.firstChild.style.border=m;b.firstChild.style.padding=r;b.parentNode.className=b.parentNode.className.replace("SelectionBG","");b.parentNode.className=b.parentNode.className.replace("ContainerBGColor","");b.parentNode.className+=" ContainerBGColor";g=null;m=null;r=null;k=null;q.fire("ItemPickerElementClicked",-1)}return false}function D(){if(b&&b.firstChild)b.firstChild.removeNode(true)}function B(){var e=a.listItems.length,b=e-c;if(b>d)b=c+d-1;else b=e-1;return Spaces.Utility.GetString(Spaces.Lists.Strings,"lists_itempicker_paging").encodeHtml().format(c+1,b+1,e)}function A(){document.getElementById("id_ip_paging").innerHTML=B()}};Spaces.Lists.ItemPicker.registerClass("Spaces.Lists.ItemPicker","$Binding");Spaces.Lists.ItemPicker.skipClass=true;Spaces.Lists.ItemPicker.Events=new $Enum("ItemPickerElementClicked");Spaces.Lists.ItemPicker.Params=new $Enum("listObject");Spaces.Lists.ItemPicker.Create=function(f,d,e,g,c,b){var a={};a.listObject={};a.listObject.type=g;a.listObject.attribs=d;a.listObject.listItems=e;a.emptyThumbnailUrl_75x49=b;a.emptyThumbnailUrl_75x75=c;Web.Bindings.attachElementBindingSync(document.getElementById(f),"Spaces.Lists.ItemPicker",null,a,null)};registerNamespace("Spaces.Lists");Spaces.Lists.EPDataProvider=function(e){Spaces.Lists.EPDataProvider.initializeBase(this,arguments);var c="id_anchor_img_",f=this,a=new $Memory.Groups;this.initialize=function(a){Spaces.Lists.EPDataProvider.getBaseMethod(this,"initialize","Web.Bindings.Base").call(this,a);this.registerFor("Live.Controls.EnhancedPreviewController",d)};this.dispose=function(b){Spaces.Lists.EPDataProvider.getBaseMethod(this,"dispose","Web.Bindings.Base").call(this,b);if(a!=null){a.dispose();a=null}e=null;f=null};function d(c){a.create(null).Events.register(c,{onbeforeopen:b})}function b(i){var f=i.Package,g=f.template,h=f.srcElement,j=f.srcObject;if(h.id.indexOf(c)>=0){var a=h._data,b="";g.head.title='<a target="blank" href="'+a.WebAddress+'" class="ContainerHeaderLinkColor" style="text-decoration:underline;">'+a.Title+"</a>";b='<table class="ep_data_table"><tr><td padding="3px"><img src="'+a.ThumbnailUrl+'" style="height:'+a.thumbnailHeight+";width:"+a.thumbnailWidth+';" /></td><td>'+"{0}</td></tr></table>";var e="<table>";for(var d=0;d<a.attribs.length;d++)e+='<tr><td class="ep_data_table_left">'+a.attribs[d]+":</td>"+'<td class="ep_data_table_right">'+a.FieldValues[d]+"</td></tr>";e+="</table>";b=b.format(e);g.body.body=b}try{j.invalidate(["head","body","actions"])}catch(k){}}};Spaces.Lists.EPDataProvider.registerClass("Spaces.Lists.EPDataProvider","Web.Bindings.Base");$Network.registerFpp("ListService",function(){var e=$Network.FppProxy,a=e.__string,c=e.__primitive,d=e.__array,h=e.__custom,f=e.__enum,j=e.__date,g=e.__object,i=e.__oArray,b=new $Network.FppProxy("ListService");b.ListType=new $Flags("Blog",0,"Book",1,"Custom",2,"Music",3,"Classified",4,"Movie",5);b.rfc("__0",[a("Name"),a("Url"),a("Description"),a("Id")]);b.rfc("__1",[a("RowId"),a("RowCss"),c("RowDisplay"),d("ColHtml"),d("ColCss"),d("ColSpan")]);b.rfc("__2",[a("Title"),a("TitleUrl"),a("Artist"),a("ArtistUrl"),a("Album"),a("AlbumUrl"),a("AlbumCoverUrl"),a("SongUrl"),a("Description"),a("Id")]);b.rfc("__3",[a("Title"),a("Author"),a("Isbn"),a("Url"),a("CoverUrl"),a("Description"),a("Id")]);b.rfc("__4",[a("Title"),a("ThumbnailUrl"),a("InfoPageUrl"),a("Description"),a("MsnMovieId"),a("ReleaseDate"),c("LookupFailed"),a("ResourceId"),a("Timestamp"),a("YearReleased")]);b.rfc("__5",[a("Name"),a("ID"),a("Url")]);b.rfc("__6",[a("CharacterName"),a("Name"),a("ID"),a("Url")]);b.rfc("__7",[a("ReleaseYear"),a("Genre"),a("MPAA"),h(b.__5,"Director"),d("Cast"),a("OnDvDUrl"),a("ViewTrailerUrl"),a("InTheatersUrl"),a("PhotoGalleryUrl"),a("VideoClipsUrl")]);b.rfc("__8",[a("Title"),a("WebAddress"),a("ThumbnailUrl"),d("FieldValues"),a("Id")]);b.InviteReturnCodes=new $Flags("Success",0,"GenericError",1,"InputValidationError",2,"QuotaExceeded",3,"QuotaEmpty",4,"ABCHError_CanRetry",5,"ABCHError_NoRetry",6);b.rfc("InviteReturnData",[f("Code"),a("Detail"),a("DisplayMessage")]);b.rfc("FindOptions",[c("OpenDefaultActionsInNewWindow"),c("SortFriends"),c("MaxFriendCount"),c("IncludeTags"),c("IncludeNotes"),c("IncludeFans"),a("Theme"),c("PageSize"),c("Page"),c("CanEdit"),c("FullSize"),c("ShouldPivot"),a("FilterTag"),a("DefaultClickActionRelativeUrl")]);b.rfc("__9",[a("FUCID"),a("DisplayName"),a("EMail"),c("MembershipId"),c("IsFan"),c("IsSponsored"),a("Comments"),d("Tags"),c("SortOrder"),a("IdentityUI")]);b.rfc("__10",[a("BrowseUserId"),d("Friends"),d("Tags"),c("HRESULT"),c("TotalFriendCount"),a("OwnerName"),a("OwnerUI"),a("UserUI"),a("UserName")]);b.rfc("FriendRenderResult",[a("BrowseUserId"),d("Friends"),d("IdentityUI"),d("DisplayName")]);b.rfc("RenderData",[a("FUCID"),a("EMail"),a("DisplayName"),a("Comments"),d("Tags")]);b.rfc("RenderOptions",[a("Theme"),c("OpenDefaultActionsInNewWindow"),c("CanEdit"),c("FullSize"),c("ShouldPivot"),d("Data"),a("DefaultClickActionRelativeUrl")]);b.rfc("__11",[a("Name")]);b.rfc("__12",[a("Category"),a("Message")]);b.rfc("__13",[d("m_serverTraceCollection")]);b.FppStatus=new $Flags("SUCCESS",0,"ERR_HTTP_MISCONFIGURATION",-7,"ERR_HTTP_PARSE_FAILURE",-6,"ERR_HTTP_CONNECT_FAILURE",-5,"ERR_HTTP_TIMEOUT",-4,"ERR_SERVER_UNCAUGHT",-3,"ERR_APP_SPECIFIC",-2,"ERR_FPP_PROTOCOL",-1);b.rfc("FppError",[a("ErrorCode"),a("Message"),g("ErrorObj"),a("StackTrace")]);b.rfc("FppReturnPackage",[f("Status"),g("Value"),i("OutRefParams"),h(b.FppError,"Error"),g("ProfilingInfo")]);b.FppCommandType=new $Flags("FPP",0,"FPP_JSON",1,"FPP_RP",2,"FPP_RP_JSON",3);b.FppVersion=new $Flags("BASE",0,"ONE",1,"TWO",2,"CURRENT",2);b.rfc("FppProxySettings",[f("Version"),f("CommandType"),a("PartnerId"),a("SessionId"),a("AuthUser"),a("ServerTunnelingUrl"),c("UseClientXmlProxy"),a("CanaryToken"),c("DefaultRetry"),c("Notify"),f("DateType")]);b.FppDateType=new $Flags("Local",0,"UTC",1);b.rfm("add_general_entry",[a("listId"),a("name"),a("URL"),a("description"),a("theme")],"add_general_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("update_general_entry",[a("entryId"),a("name"),a("URL"),a("description"),a("sortOrder")],"update_general_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("update_music_entry",[a("entryId"),a("song"),a("artist"),a("album"),a("description"),a("webAddress"),a("thumbnailUrl"),a("sortOrder")],"update_music_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("add_music_entry",[a("listId"),a("song"),a("artist"),a("album"),a("description"),a("webAddress"),a("thumbnailUrl"),a("theme")],"add_music_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("add_book_entry",[a("listId"),a("title"),a("author"),a("ISBN"),a("description"),a("webAddress"),a("thumbnailUrl"),a("theme")],"add_book_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("update_book_entry",[a("entryId"),a("title"),a("author"),a("ISBN"),a("description"),a("webAddress"),a("thumbnailUrl"),a("sortOrder")],"update_book_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("music_search_affiliate",[a("song"),a("artist"),a("album")],"music_search_affiliate",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("book_search_affiliate",[a("title"),a("author"),a("isbn")],"book_search_affiliate",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("add_movie_entry",[a("listId"),a("title"),a("infoPageUrl"),a("description"),a("msnid"),a("thumbnailUrl"),a("timestamp"),a("credit"),a("glyphImgSource"),a("theme"),c("affiliateEnabled")],"add_movie_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("search_movies",[a("title")],"search_movies",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("save_selected_match",[a("entryId"),a("title"),a("infoPageUrl"),a("description"),a("msnid"),a("thumbnailUrl"),a("timestamp"),a("credit"),c("updateReleaseDate"),a("sortOrder")],"save_selected_match",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("lookup_movie_detail",[a("msnid")],"lookup_movie_detail",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("add_music_list",[a("listName")],"add_music_list",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("delete_list_entry",[f("listType"),a("Id")],"delete_list_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.rfm("rename_list",[f("listType"),a("listId"),a("name"),a("description")],"rename_list",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.ListFireAnt.ListFireAnt");b.seal();return b})