<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0099)http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx -->
<HTML lang=en xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:o = 
"urn:schemas-microsoft-com:office:office"><HEAD><TITLE>Greg Schechter's Blog : ParallaxUi - UIs Escaping from Flatland</TITLE>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<META content=WPF name=keywords>
<META 
content="As I mentioned in my last post , one of the guiding principles for the design of 3D in WPF is the consistent and powerful integration with 2D vector graphics, media, imaging, UI, and documents. And, for quite some time, I’ve wanted to write a little demo" 
name=description>
<META content="MSHTML 6.00.2900.3199" name=GENERATOR><LINK 
href="http://blogs.msdn.com/greg_schechter/pingback.aspx" rel=pingback><LINK 
media=screen 
href="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/style.css" 
type=text/css rel=stylesheet><LINK media=print 
href="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/print.css" 
type=text/css rel=stylesheet><LINK media=screen 
href="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/brown.css" 
type=text/css rel=stylesheet><LINK href="/favicon.ico" type=image/ico 
rel="shortcut icon"><LINK title="Greg Schechter's Blog (RSS 2.0)" 
href="http://blogs.msdn.com/greg_schechter/rss.xml" type=application/rss+xml 
rel=alternate><LINK title="Greg Schechter's Blog (Atom 1.0)" 
href="http://blogs.msdn.com/greg_schechter/atom.xml" type=application/atom+xml 
rel=alternate><LINK 
title="ParallaxUi - UIs Escaping from Flatland Comment RSS (RSS 2.0)" 
href="http://blogs.msdn.com/greg_schechter/commentrss.aspx?PostID=1993004" 
type=application/rss+xml rel=alternate>
<SCRIPT 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/global.js" 
type=text/javascript></SCRIPT>
</HEAD>
<BODY>
<FORM id=aspnetForm name=aspnetForm 
action=/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx 
method=post>
<DIV><INPUT id=__EVENTTARGET type=hidden name=__EVENTTARGET> <INPUT 
id=__EVENTARGUMENT type=hidden name=__EVENTARGUMENT> <INPUT id=__VIEWSTATE 
type=hidden 
value=/wEPDwUKLTMyNjg0MDc1MWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFJGN0bDAwJF8kY3RsMDAkXyRiczEkXyR3cyRfJFNlYXJjaEJveK+MuGaxoZvO4xI7byA887OvUqUR 
name=__VIEWSTATE> </DIV>
<SCRIPT type=text/javascript>
<!--
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
// -->
</SCRIPT>

<SCRIPT language=javascript 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/Telligent_Modal.js" 
type=text/javascript></SCRIPT>

<SCRIPT language=javascript type=text/javascript>
// <![CDATA[
Telligent_Modal.Configure('/utility/loading.htm',['Modal'],['ModalTitle'],['ModalClose'],['ModalContent'],['ModalFooter'],['ModalResize'],['ModalMask'],100);
// ]]>
</SCRIPT>

<DIV id=masthead>
<DIV id=welcome align=right>Welcome to MSDN Blogs <A 
id=ctl00___ctl00___duw1_ac1___Login 
href="http://blogs.msdn.com/login.aspx?ReturnUrl=%2fgreg_schechter%2farchive%2f2007%2f03%2f30%2fparallaxui_5F00_escaping_5F00_flatland.aspx">Sign 
in</A> | <A id=ctl00___ctl00___duw1_ac1___Register 
href="http://blogs.msdn.com/user/CreateUser.aspx?ReturnUrl=/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx">Join</A> 
| <A id=ctl00___ctl00___duw1_Faq1 
href="http://blogs.msdn.com/languages/en-US/docs/faq.aspx">Help</A> </DIV></DIV>
<DIV id=wrapper>
<DIV id=container>
<DIV id=header>
<DIV id=title>
<H1><A class=headermaintitle id=ctl00___ctl00___bth___BlogTitle 
href="http://blogs.msdn.com/greg_schechter/default.aspx">Greg Schechter's 
Blog</A></H1>
<P id=tagline><A href="http://msdn.microsoft.com/windowsvista">Windows Vista</A> 
and <A 
href="http://msdn.microsoft.com/Longhorn/understanding/pillars/avalon/default.aspx">Windows 
Presentation Foundation (Avalon)</A> -- Graphics, Media, Animation, Programming 
Model and other goodies.</P></DIV></DIV>
<DIV id=contentwrapper>
<DIV id=sidebar-a>
<DIV id=BlogLinksSideBar>
<DIV id=WeblogLinks>
<H3>This Blog</H3>
<UL>
  <LI><A id=ctl00___ctl00___bs1___wl___Contactlink1 
  href="http://blogs.msdn.com/greg_schechter/contact.aspx">Email</A> 
</LI></UL></DIV></DIV>
<DIV id=TasksSideBar></DIV>
<DIV id=SubscriptionsSideBar>
<DIV id=Subscriptions>
<H3>Syndication</H3>
<UL>
  <LI><A id=ctl00___ctl00___bs1___bs___rss 
  href="http://blogs.msdn.com/greg_schechter/rss.xml">RSS 2.0</A> 
  <LI><A id=ctl00___ctl00___bs1___bs___atom 
  href="http://blogs.msdn.com/greg_schechter/atom.xml">Atom 1.0</A> 
</LI></UL></DIV></DIV>
<DIV id=SearchSideBar>
<DIV id=Search>
<H3>Search</H3>
<UL>
  <LI><INPUT class=searchBox id=ctl00___ctl00___bs1___ws___SearchBox 
  onkeydown=KeyDownHandlerctl00___ctl00___bs1___ws___SearchButton(event); 
  name=ctl00$_$ctl00$_$bs1$_$ws$_$SearchBox> <A 
  id=ctl00___ctl00___bs1___ws___SearchButton 
  href="javascript:__doPostBack('ctl00$_$ctl00$_$bs1$_$ws$_$SearchButton','')">Go</A> 
  </LI></UL></DIV></DIV>
<DIV id=NewsSideBar></DIV>
<DIV id=LinkSideBar></DIV></DIV>
<DIV id=sidebar-b>
<DIV id=TagSideBar>
<H3>Tags</H3>
<UL>
  <UL class=SidebarTagCloud>
    <LI class=Tag4><A 
    href="http://blogs.msdn.com/greg_schechter/archive/tags/DWM/default.aspx" 
    rel=tag>DWM</A> 
    <LI class=Tag6><A 
    href="http://blogs.msdn.com/greg_schechter/archive/tags/Silverlight/default.aspx" 
    rel=tag>Silverlight</A> 
    <LI class=Tag1><A 
    href="http://blogs.msdn.com/greg_schechter/archive/tags/WPF/default.aspx" 
    rel=tag>WPF</A> </LI></UL></UL></DIV>
<DIV id=RecentPostsSideBar>
<H3>Recent Posts</H3>
<UL>
  <LI><A id=ctl00___ctl00___rp___PostList_ctl01_Link 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/09/26/making-use-of-multiprocessing-in-wpf.aspx">Making 
  use of multiprocessing in WPF</A> 
  <LI><A id=ctl00___ctl00___rp___PostList_ctl02_Link 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/08/21/silverlight-1-1-virtualearth-viewer.aspx">Silverlight 
  1.1 VirtualEarth Viewer</A> 
  <LI><A id=ctl00___ctl00___rp___PostList_ctl03_Link 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/05/19/wpf-silverlight-and-c-3-0-object-initializers.aspx">WPF, 
  Silverlight and C# 3.0 object initializers</A> 
  <LI><A id=ctl00___ctl00___rp___PostList_ctl04_Link 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/04/15/making-parallaxui-look-right-field-of-view-selection.aspx">Making 
  ParallaxUi look right - field of view selection</A> 
  <LI><A id=ctl00___ctl00___rp___PostList_ctl05_Link 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/04/03/camera-construction-in-parallaxui.aspx">Camera 
  construction in ParallaxUi</A> </LI></UL></DIV>
<DIV id=ArchiveSideBar>
<H3>Archives</H3>
<UL>
  <LI><A 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/09.aspx">September 
  2007 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2007/08.aspx">August 
  2007 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2007/05.aspx">May 
  2007 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2007/04.aspx">April 
  2007 (3)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2007/03.aspx">March 
  2007 (1)</A> 
  <LI><A 
  href="http://blogs.msdn.com/greg_schechter/archive/2007/01.aspx">January 2007 
  (1)</A> 
  <LI><A 
  href="http://blogs.msdn.com/greg_schechter/archive/2006/10.aspx">October 2006 
  (1)</A> 
  <LI><A 
  href="http://blogs.msdn.com/greg_schechter/archive/2006/09.aspx">September 
  2006 (3)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2006/08.aspx">August 
  2006 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2006/06.aspx">June 
  2006 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2006/05.aspx">May 
  2006 (2)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2006/04.aspx">April 
  2006 (2)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2006/03.aspx">March 
  2006 (5)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2005/06.aspx">June 
  2005 (1)</A> 
  <LI><A href="http://blogs.msdn.com/greg_schechter/archive/2004/05.aspx">May 
  2004 (4)</A> 
  <LI><A 
  href="http://blogs.msdn.com/greg_schechter/archive/2003/12.aspx">December 2003 
  (3)</A> </LI></UL></DIV></DIV>
<DIV id=content>
<DIV id=content2><BR>
<DIV class=post>
<DIV class=postsub>
<H2>ParallaxUi - UIs Escaping from Flatland</H2>
<P>As I mentioned in my <A class="" 
href="http://blogs.msdn.com/greg_schechter/archive/2007/01/02/1399891.aspx" 
mce_href="http://blogs.msdn.com/greg_schechter/archive/2007/01/02/1399891.aspx">last 
post</A>, one of the guiding principles for the design of 3D in WPF is the 
consistent and powerful integration with 2D vector graphics, media, imaging, UI, 
and documents.&nbsp; And, for quite some time, I’ve wanted to write a little 
demo to show off specific aspects of this.</P>
<P>Here’s the premise:&nbsp; You know those nice user interfaces we’ve all been 
looking at for the last 25 years – be they Windows, MacOS, Motif, NeXT, 
OpenLook, Irix, etc?&nbsp; They’ve only improved over the years, looking nicer 
and nicer.&nbsp; But we’ve always only viewed them head-on, and only see what 
they have to offer from one side.&nbsp; What if we were able to walk around and 
look at them from an angle?&nbsp; Or from behind them?&nbsp; What do our 
familiar interfaces look like when we do that?</P>
<P>For instance, consider this sample interface (clearly I’m not a UI designer, 
so if someone wants to provide me with some XAML for a more pleasant interface 
with similar variety, please send it my way):</P>
<P><IMG title="ParallaxUI - Head On" style="WIDTH: 500px; HEIGHT: 328px" 
height=328 alt="ParallaxUI - Head On" 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/500x328.jpg" 
width=500 border=1 
mce_src="http://blogs.msdn.com/photos/greg_schechter/images/1992921/500x328.aspx"></P>
<P>But what happens if we escape from <A class="" 
href="http://en.wikipedia.org/wiki/Flatland" 
mce_href="http://en.wikipedia.org/wiki/Flatland">Flatland</A>, just by a little 
bit?&nbsp; Looks like our UI actually exists in 3-space after all, with 
different depth to the different UI elements.&nbsp; Who knew?</P>
<P><IMG title="ParallaxUI - Head On" style="WIDTH: 500px; HEIGHT: 325px" 
height=325 alt="ParallaxUI - Head On" 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/500x325.jpg" 
width=500 align=middle border=1 
mce_src="http://blogs.msdn.com/photos/greg_schechter/images/1992924/500x325.aspx"></P>
<P>And rotating farther the other way, we start to see what’s behind our UI 
elements:</P>
<P><IMG title="Parallax - Off Angle 2" style="WIDTH: 500px; HEIGHT: 344px" 
height=344 alt="Parallax - Off Angle 2" 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/500x344.jpg" 
width=500 align=middle 
mce_src="http://blogs.msdn.com/photos/greg_schechter/images/1992925/500x344.aspx"></P>
<P>What does this knowledge let us do with our interfaces?&nbsp; Well, for one 
thing, transitioning from one UI state into another state can always be a 
pleasing operation when done well.&nbsp; However, with 2D UI’s, the stuff that 
makes up transitions is typically limited to 2D transformations like rotation in 
the plane, skewing, translation, etc.&nbsp; Once we “realize” that our 2D UI’s 
actually exist in 3-space, we can create much more interesting 
transitions.&nbsp; This next screenshot is from just such a transition (but I 
strongly recommend you run the app to see the 3D “implode” transition in action 
– it’s far better than looking at a static picture):</P>
<P><IMG title="ParallaxUi - Implode 3D" style="WIDTH: 500px; HEIGHT: 337px" 
height=337 alt="ParallaxUi - Implode 3D" 
src="Greg Schechter's Blog  ParallaxUi - UIs Escaping from Flatland_files/500x337.jpg" 
width=500 align=middle 
mce_src="http://blogs.msdn.com/photos/greg_schechter/images/1992926/500x337.aspx"></P>
<P>Uhh, what’s going on here?</P>
<P mce_keep="true"><STRONG>ParallaxUi Decorator</STRONG></P>
<P mce_keep="true">The above are screenshots from <A class="" 
title="Parallax UI Test" 
href="http://wpf.netfx3.com/direct/parallaxui/parallaxuitest.htm" target=_blank 
mce_href="http://wpf.netfx3.com/direct/parallaxui/parallaxuitest.htm"><STRONG>this 
XAML Browser Application (.xbap)</STRONG></A>.&nbsp; Run it yourself!&nbsp; 
<EM>[4/2/07 - Problems with this XBAP have been reported on 64bit Windows Vista, 
and on XP with IE7.&nbsp; Both are being investigated.]</EM>&nbsp; Play with the 
different controls up top to change view and invoke transitions.&nbsp; The 
“implode” transitions are random, so doing them a bunch of times shows a great 
deal of variety.&nbsp; (The XBAP is embedded in an HTML frameset in order to 
restrict the size of the surface, since lower end machines running WPF don’t 
perform well with 3D on very large surfaces.)</P>
<P mce_keep="true">The app centers around a custom WPF Decorator that I call 
ParallaxUi.&nbsp; It’s called this, because the parallax effect occurs when an 
observer moves relative to a set of objects that he perceived to have a certain 
relationship to each other, only to find that their relationship changes with 
his motion.&nbsp; Wikipedia has <A class="" 
href="http://en.wikipedia.org/wiki/Parallax" 
mce_href="http://en.wikipedia.org/wiki/Parallax">a good explanation of 
parallax</A>.&nbsp; This is the motion that’s observed in the app when the 
rotation slider is moved, and our UI starts to rotate in 3-space, revealing that 
its components have depth placement to them.</P>
<P mce_keep="true">In WPF, a Decorator surrounds a single child element, and in 
XAML, the use of the custom ParallaxUi looks like this:</P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&lt;</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">Page</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"> 
…</SPAN><SPAN 
style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN></SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: red; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">xmlns:plxui</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">=</SPAN><SPAN 
style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">"<SPAN 
style="COLOR: blue">clr-namespace:ParallaxUi;assembly=ParallaxUi</SPAN>"<SPAN 
style="COLOR: blue"> &gt;<o:p></o:p></SPAN></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">...<o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;!--</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: green; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"> 
Just adding the ParallaxUi decorator enables the transitions we see here. 
</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">--&gt;<o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">plxui:ParallaxUi</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"> 
</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: red; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">Name</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">=</SPAN><SPAN 
style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">"<SPAN 
style="COLOR: blue">plx</SPAN>"<SPAN style="COLOR: blue"> </SPAN><SPAN 
style="COLOR: red">RevolutionsFactor</SPAN><SPAN style="COLOR: blue">=… 
</SPAN><SPAN style="COLOR: red">SpeedFactor</SPAN><SPAN 
style="COLOR: blue">=</SPAN>…<SPAN style="COLOR: blue"> 
&gt;<o:p></o:p></SPAN></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;!--</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: green; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"> 
This child is the UI that's controlled by the ParallaxUi Decorator </SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">--&gt;<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 10pt"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">DockPanel</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&gt;<BR><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;-- more XAML comprising the UI under “parallax” view --&gt;<BR><SPAN 
style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>...<o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;/</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">DockPanel</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><o:p>&nbsp;</o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes"><SPAN 
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
</SPAN>&lt;/</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">plxui:ParallaxUi</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&gt;<o:p></o:p></SPAN></P>
<P class=MsoNormal 
style="MARGIN: 0in 0in 0pt; LINE-HEIGHT: normal; mso-layout-grid-align: none"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">...<o:p></o:p></SPAN></P>
<P class=MsoNormal style="MARGIN: 0in 0in 10pt"><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&lt;/</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: #a31515; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">Page</SPAN><SPAN 
style="FONT-SIZE: 10pt; COLOR: blue; LINE-HEIGHT: 115%; FONT-FAMILY: 'Courier New'; mso-no-proof: yes">&gt;</SPAN></P>
<P mce_keep="true">
<P mce_keep="true">The exposed ParallaxUi element, named “plx” here, exposes 
properties that control the behavior of the “implode”, as well as a Rotation3D 
property to let the user of the element set up arbitrary 3D rotations.&nbsp; It 
also exposes methods to invoke both a 3D transition and a 2D transition.&nbsp; 
Here’s how the ParallaxUi Decorator works:</P>
<UL>
  <LI>
  <DIV mce_keep="true">It’s initialized by constructing a 3D scene as a big 
  Model3DGroup and adding some lights.</DIV>
  <LI>
  <DIV mce_keep="true">It then traverses its child and recursively looks for 
  FrameworkElements and descends into Panels and Decorators.&nbsp; For each 
  FrameworkElement it finds:</DIV>
  <UL>
    <LI>
    <DIV mce_keep="true">It determines the size and position relative to 
    ParallaxUi, and scales and positions a simple quadrilateral mesh to exactly 
    superimpose with the 2D element.&nbsp; It also chooses a random z-value for 
    where to place the element in z.</DIV>
    <LI>
    <DIV mce_keep="true">It creates a DiffuseMaterial from a VisualBrush of the 
    FrameworkElement that was found and attaches it to the mesh in a 
    GeometryModel3D.</DIV>
    <LI>
    <DIV mce_keep="true">It does the same with a tetrahedron to be used as the 
    “back” of the element, picking a random color for the material, and 
    transforms that with the same transform.</DIV>
    <LI>
    <DIV mce_keep="true">It adds these GeometryModel3D’s to the overall 
    Model3DGroup being constructed.</DIV></LI></UL>
  <LI>
  <DIV mce_keep="true">We create a Viewport3D, assign in the Model3DGroup 
  constructed above, and assign it a camera that is perfectly spatially aligned 
  with the 2D content of the child of the decorator.</DIV>
  <LI>
  <DIV mce_keep="true">Now, when the Rotation dependency property is changed 
  away from 0, we have the ParallaxUi decorator now display the Viewport3D with 
  an appropriately modified Camera.&nbsp; When it goes back to 0 rotation, the 
  ParallaxUi swaps in the original child.</DIV>
  <LI>
  <DIV mce_keep="true">(The astute reader may notice from the last point that 
  when the controls are being shown in 3D they won’t be interactive.&nbsp; We 
  could use the techniques referenced in my last post to make this interactive, 
  but as this is meant for demonstration and for quick transitions, there’s not 
  much of a need to do so.)</DIV>
  <LI>
  <DIV mce_keep="true">The “3D Implode” technique then just becomes a matter of 
  animating position and rotation properties on each of the transforms that went 
  into the GeometryModel3D for the elements.</DIV>
  <LI>
  <DIV mce_keep="true">The “Twist Transition In” button is handled outside of 
  ParallaxUi, just as an animation that manipulates the Rotation3D that 
  ParallaxUi exposes.</DIV></LI></UL>
<P mce_keep="true">That’s the basics of how this works.&nbsp; I really wanted to 
post it to further drive home how simple it is to do 2D/3D sorts of interplay, 
and hopefully help catalyze some interesting and cool uses along those 
lines.&nbsp; That’s all for this post, but I plan on a few followup posts to a) 
post the code after I get a little bit of a chance to clean it up; and b) talk 
about some of the more interesting technical challenges in getting this app to 
work, so that others can leverage those as well.<BR></P>
<DIV class=postfoot>Published Friday, March 30, 2007 12:56 AM by <A 
id=ctl00___ctl00___ctl01___Entry___AuthorLink 
href="http://blogs.msdn.com/user/Profile.aspx?UserID=2944">Greg Schechter</A> 
<DIV><SPAN id=ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel>Filed under: 
<A href="http://blogs.msdn.com/greg_schechter/archive/tags/WPF/default.aspx" 
rel=tag>WPF</A></SPAN><INPUT 
id=ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel_State type=hidden 
value=nochange 
name=ctl00$_$ctl00$_$ctl01$_$Entry$_$InlineTagEditorPanel></DIV></DIV></DIV></DIV>
<H3>Comments </H3>
<DIV id=comments>
<DIV class=comment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Friday, March 30, 2007 
8:52 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl00_NameLink 
title="Ian Horwill" href="http://ihorwill.blogspot.com/" target=_blank 
rel=nofollow>Ian Horwill</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl00_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#1993890">#</A> 
<SPAN>re: ParallaxUi - UIs Escaping from Flatland<A name=1993890></A></SPAN> 
</H4>
<DIV class=commentsbody>
<P>An interesting idea. I also like interfaces where controls become bigger the 
closer the user's attention is to them (usually as indicated with the 
mouse).</P>
<P>What's going on with the "Perhaps" list box? Its gray background obscures 
"Elk" and the list box, but is transparent wrt "Chameleon" and 
"Butterfly".</P></DIV></DIV>
<DIV class=altcomment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Friday, March 30, 2007 
9:31 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl01_NameLink 
title="Matthew Adams" target=_blank>Matthew Adams</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl01_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#1994023">#</A> 
<SPAN>re: ParallaxUi - UIs Escaping from Flatland<A name=1994023></A></SPAN> 
</H4>
<DIV class=commentsbody>
<P>Ian - I think you'll find it is to do with the actual z-order of the 
components in the XAML. You have to get the ordering right (which actually means 
front-back, IIRC) to get the transparency rendered correctly.</P></DIV></DIV>
<DIV class=commentowner>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Monday, April 02, 2007 
3:57 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl02_NameLink 
title="Greg Schechter" href="http://greg%20schechter/" target=_blank>Greg 
Schechter</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl02_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2010481">#</A> 
<SPAN>re: ParallaxUi - UIs Escaping from Flatland<A name=2010481></A></SPAN> 
</H4>
<DIV class=commentsbody>
<P>Matthew... good call. &nbsp;That's indeed what the issue is and was an 
oversight on my part. &nbsp;I updated the XBAP, so you shouldn't see this 
artifact anymore.</P></DIV></DIV>
<DIV class=altcommentowner>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Tuesday, April 03, 
2007 2:07 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl03_NameLink 
title="Greg Schechter" href="http://greg%20schechter/" target=_blank>Greg 
Schechter</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl03_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2016099">#</A> 
<SPAN>re: ParallaxUi - UIs Escaping from Flatland<A name=2016099></A></SPAN> 
</H4>
<DIV class=commentsbody>
<P>There were a few comments reporting problems with this XBAP on 64bit Vista 
systems; and on XP with IE7. &nbsp;(I run this on a 32bit Vista system.) 
&nbsp;Certainly it should work seamlessly across all of these systems -- we're 
investigating the issue.</P></DIV></DIV>
<DIV class=comment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Tuesday, April 03, 
2007 3:12 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl04_NameLink 
title=TrackBack 
href="http://blogs.msdn.com/greg_schechter/archive/2007/04/03/parallaxui-source-posted.aspx" 
target=_blank rel=nofollow>Greg Schechter's Blog</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl04_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2016316">#</A> 
<SPAN>ParallaxUi - source posted<A name=2016316></A></SPAN> </H4>
<DIV class=commentsbody>
<P>I've cleaned up the source to ParallaxUi a bit and am attaching it to this 
post as a .zip file. This</P></DIV></DIV>
<DIV class=altcomment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Tuesday, April 03, 
2007 3:57 AM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl05_NameLink 
title=TrackBack 
href="http://blogs.msdn.com/greg_schechter/archive/2007/04/03/camera-construction-in-parallaxui.aspx" 
target=_blank rel=nofollow>Greg Schechter's Blog</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl05_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2016446">#</A> 
<SPAN>Camera construction in ParallaxUi<A name=2016446></A></SPAN> </H4>
<DIV class=commentsbody>
<P>One of the more subtle aspects of the otherwise pretty straightforward 
ParallaxUi is the "registration"</P></DIV></DIV>
<DIV class=comment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Wednesday, April 04, 
2007 6:28 PM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl06_NameLink 
title=TrackBack 
href="http://blogs.msdn.com/wpf3d/archive/2007/04/04/2d-3d-2d-transitions.aspx" 
target=_blank rel=nofollow>WPF3D Team Blog</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl06_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2027529">#</A> 
<SPAN>2D -&gt; 3D -&gt; 2D Transitions<A name=2027529></A></SPAN> </H4>
<DIV class=commentsbody>
<P>WPF Architect Greg Schecter has written a few really cool 3D transitions for 
2D elements. We've gotten</P></DIV></DIV>
<DIV class=altcomment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Wednesday, April 11, 
2007 11:03 AM by <A 
id=ctl00___ctl00___ctl01___Comments___Comments_ctl07_NameLink title=TrackBack 
href="http://blogs.msdn.com/cguimar/archive/2007/04/11/2d-em-3d-com-wpf.aspx" 
target=_blank rel=nofollow>Good News and No News: Cezar Guimarães</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl07_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2087218">#</A> 
<SPAN>2D em 3D com WPF<A name=2087218></A></SPAN> </H4>
<DIV class=commentsbody>
<P>Já pensou em animar objetos 2D? Quem saber fazer uma entrada animada, com 
caixas de texto se movendo,</P></DIV></DIV>
<DIV class=comment>
<DIV class=commentssubhead><SPAN class=commentspan></SPAN>Sunday, April 15, 2007 
4:43 PM by <A id=ctl00___ctl00___ctl01___Comments___Comments_ctl08_NameLink 
title=TrackBack 
href="http://blogs.msdn.com/greg_schechter/archive/2007/04/15/making-parallaxui-look-right-field-of-view-selection.aspx" 
target=_blank rel=nofollow>Greg Schechter's Blog</A> </DIV>
<H4><A id=ctl00___ctl00___ctl01___Comments___Comments_ctl08_PermaLink 
title=permalink 
href="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx#2146972">#</A> 
<SPAN>Making ParallaxUi look right - field of view selection<A 
name=2146972></A></SPAN> </H4>
<DIV class=commentsbody>
<P>In my last post , I said that "one of the more subtle aspects of the 
otherwise pretty straightforward</P></DIV></DIV></DIV><EM>New Comments to this 
post are disabled</EM> </DIV></DIV>
<DIV id=contentfooter>&nbsp;</DIV></DIV>
<DIV id=footer></DIV></DIV></DIV>
<SCRIPT language=javascript type=text/javascript>
<!--
function KeyDownHandlerctl00___ctl00___bs1___ws___SearchButton(event)
{
	if (event.keyCode == 13)
	{
		event.returnValue = false;
		event.cancel = true;
     __doPostBack('ctl00$_$ctl00$_$bs1$_$ws$_$SearchButton','')	}
}

//-->
</SCRIPT>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx"
dc:identifier="http://blogs.msdn.com/greg_schechter/archive/2007/03/30/parallaxui_5F00_escaping_5F00_flatland.aspx"
dc:title="ParallaxUi - UIs Escaping from Flatland"
trackback:ping="http://blogs.msdn.com/greg_schechter/trackback.aspx?PostID=1993004" />
</rdf:RDF>
--></FORM></BODY></HTML>
