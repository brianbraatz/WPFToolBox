registerNamespace("Spaces.Blog");Spaces.Blog.Strings=new function(){this.blogentry_deletephoto="Delete this photo";this.blogentry_deletephoto_tooltip="Delete photo {0}";this.blogentry_deletephoto_jserror="One or more of your photos could not be removed from this entry.  Please select the photos you wish to remove and try again.";this.blogentry_deletephoto_prompt="You are about to permanently delete the photo {0}.  If you're using this photo in other places on this {1}, it will not be deleted from those places.";this.blogentry_trackbackerror="You have entered more than 10 trackback URLs. You can only send 10 trackbacks at one time.";this.blogentry_deleteerror="Sorry, your entry can't be deleted right now.  Please try again later.";this.blogentry_titletoolong="The title you have entered is too long. Please shorten the title and try again.";this.blogentry_schemaviolation="This entry contains too much text. Please remove some text, and then publish this entry. To publish more text, add a new entry.";this.guestbook_edit_toolong="The greeting contains too much text. Please remove some text, and then save the greeting.";this.blogentry_genericerror="The service is temporarily unavailable. Please try again later.";this.blogentry_containsprofanity="This entry's title contains language that is prohibited. Please delete the prohibited language from the title of the entry.";this.blogentry_timeouterror="Due to the high volume of activity on the servers right now, your entry may not have been published. To avoid duplicate entries, please check to see if your entry was published before trying again.";this.deleteblogitem_entry_title="Delete this entry";this.deleteblogitem_entry_text="You are about to delete this entry. Any comments and trackbacks associated with the entry will also be deleted.";this.deleteblogitem_comment_title="Delete this comment";this.deleteblogitem_comment_text="You are about to permanently delete this comment.";this.deleteblogitem_trackback_title="Delete this trackback";this.deleteblogitem_trackback_text="You are about to permanently delete this trackback.";this.deleteblogitem_multiple_title="Delete selected items";this.deleteblogitem_multiple_text="You are about to permanently delete the items you selected.";this.blogentry_addcategorypopovertitle="Add a category";this.blogentry_addcategorypopoveradd="Add";this.blogentry_addcategorypopovercancel="";this.blogentry_addnewcategorytext="Enter the name of the category, and then click {0}Add{1}. The category will appear at the bottom of the list.";this.blogentry_categorytoolong="The category name you have entered is too long. Please shorten the category name and try again.";this.blogentry_invalidcategory="The category name you have entered is invalid. Please enter a different category name.";this.global_errorretrievingcontent="There was an error retrieving the content. Please try again.";this.blogentry_photo="GIF, JPEG, PNG, BMP or TIF format only. You can upload a maximum of {0}1 MB{1} of photos at a time.";this.blogentry_attachedphoto="Photos in this entry";this.blogentry_jpgandgifonly="One or more photos are not in the correct format. Please try again using photos in GIF, JPEG, PNG, BMP or TIF format.";this.blogentry_entrycategory="Category:";this.blogentry_addphotos="Add photos";this.blogentry_embedvideo="Embed videos";this.blogentry_publishwait="Please wait while your entry is being published.";this.guestbook_edit_savewait="Please wait while your greeting is saved.";this.blogentry_publishdraftwait="Please wait while your entry is being saved as a draft.";this.blogentry_photoswait="Please wait while your photos are uploading.";this.blogentry_cancelprompt="You are about to exit the edit page without saving. Any changes you have made since you last saved will be lost.  Click OK to exit without saving changes, or click Cancel to return to the edit page.";this.blogentry_canceltitle="Exit without saving changes";this.blogjs_namerequired="The name box is empty. Please type a name in the name box.";this.blogjs_nametoolong="The name you have entered is too long. Please shorten the name and try again.";this.blogjs_invalidemail="The e-mail address is not in a valid format. Please retype the e-mail address using the <i>name@example.com</i> format.";this.blogjs_emailtoolong="The e-mail address you entered is too long. Please shorten the e-mail address and try again.";this.blogjs_urltoolong="The web address (URL) you entered is too long. Please shorten the web address and try again.";this.comments_invalidcomment="You either didn't enter a comment or you entered content that's not allowed. Please enter a comment, and then click Add.";this.blogjs_commenttoolong="The comment you entered is too long. Please shorten your comment and click Add";this.blogview_servererror="The server has encountered an error. Please try again.";this.blogview_containsprofanity="This comment contains language that is prohibited. Please delete the prohibited language, and then click Add.";this.profile_lc_noAbDisplayName="(no name)";this.blogview_commentname="Your name:";this.blogview_commentemail="Your e-mail address (optional):";this.blogview_commentblogurl="Your blog web address (optional):";this.blogview_commentshtmltext="Comment:";this.blogview_publishcomment="Add";this.blogview_cancel="";this.blogjs_errorretrievingcontent="There was an error retrieving the content. Please try again.";this.blogview_passportsignin="To add a comment, you must sign in with your Windows Live ID (a Microsoft account like Hotmail, Messenger, or MSN).";this.Photos_ShowContactPic="Use my profile information";this.embedvideopopover_title="Embed videos";this.embedvideopopover_savebutton="";this.embedvideopopover_cancelbutton="";this.embedvideopopover_instructions="Enter the embed code for the video you want to add, and then click <b>Save</b>.  <b>Note</b>: Only Flash video players will work on Spaces.";this.embedvideopopover_embedcode="Embed code:";this.embedvideopopover_emptyembed="Please enter the embed code for the video you want to add.";this.embedvideopopover_invalidembed="The code you've entered doesn't contain an &lt;embed&gt; tag.  To embed a video, the embed code must contain at least one &lt;embed&gt; tag.";this.embedvideopopover_invalidplayer="The embed code you've entered is not supported by Spaces.  Only Flash video players will work on Spaces.";this.embedvideopopover_invalidversion="You do not have the most recent version of Flash installed.  You must install the latest version of Flash to embed videos.";this.embedvideopopover_downloadflash="Click here to get the latest version.";this.profile_lc_noAbDisplayName="(no name)";this.discussions_entry_publishwait="Please wait while your entry is being published.";this.discussions_entry_schemaviolation="This post contains too much text. Please remove some text, and then publish this post. To publish more text, add a new post."};registerNamespace("Spaces.Blog");Spaces.Blog.ErrorArea=function(a,d){Spaces.Blog.ErrorArea.initializeBase(this,arguments);d=this.getParameters();var c=null;this.initialize=function(){c=document.getElementById(d.notifybar_id);Spaces.Blog.ErrorArea.callBaseMethod(this,"initialize",arguments)};this.dispose=function(){Spaces.Blog.ErrorArea.callBaseMethod(this,"dispose",arguments);a=null;c=null};this.DisplayErrorMessage=function(a){b(Spaces.Controls.NotificationBar.Importance.Med,a,null)};this.DisplayProgressMessage=function(a){b(Spaces.Controls.NotificationBar.Importance.Low,a,$Config.Themes.url+"hig/img/progress_pending.gif")};this.DisplayInfoMessage=function(a){b(Spaces.Controls.NotificationBar.Importance.Low,a,null)};function b(d,e,b){var f=c.webBindings[0];f.show(d,false,e,null,b);if(a)a.style.display=""}this.HideErrorMessage=function(){a.style.display="none"}};Spaces.Blog.ErrorArea.registerClass("Spaces.Blog.ErrorArea","$Binding");Spaces.Blog.ErrorArea.skipClass=true;registerNamespace("Spaces.Blog");registerNamespace("Spaces.BlogEntry");Spaces.Blog.Entry=function(r,p){Spaces.Blog.Entry.initializeBase(this,arguments);var c=this;p=this.getParameters();var a,e,d,g,f,j=new $Memory.Groups,h=j.create(null),b,q="title",o="blogAddPhotos",n="blogEmbedVideo";this.initialize=function(){b=document.getElementById(q);if(b){h.Events.register(b,{onpropertychange:c.SetSaveEnabledStatus});h.Events.register(b,{onchange:c.SetSaveEnabledStatus});h.Events.register(b,{onkeyup:c.SetSaveEnabledStatus});h.Events.register(b,{onpaste:c.SetSaveEnabledStatus})}e=document.getElementById(o);g=document.getElementById(n);Spaces.Blog.Entry.callBaseMethod(this,"initialize",arguments);c.SetSaveEnabledStatus();c.registerFor("Spaces.Blog.PhotoList",l);if($Browser.isMozilla())c.registerFor("$UI.Editor",m)};this.dispose=function(){if(j){j.dispose();j=null}window.cachedPhotoListBinding=null;a=null;r=null;c=null;e=null;d=null;g=null;f=null;b=null;Spaces.Blog.Entry.callBaseMethod(this,"dispose",arguments)};this.Enable=function(){if(d&&d.parentElement)d.parentElement.replaceChild(e,d);if(f&&f.parentElement)f.parentElement.replaceChild(g,f);if(a)a.Enable();if(b)b.disabled=false;Spaces.ActionToolbar.ToolbarManager.getInstance().TryEnable()};this.Disable=function(){if(!d||!f){var h,c;if(e){d=document.createElement("span");d.className="grayText";c=Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_addphotos");h='<img src="'+PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"addpic_dl.png")+'" alt="'+c.encodeHtmlAttribute()+'" />';h+=c.encodeHtml();d.innerHTML=h}if(g){f=document.createElement("span");f.className="grayText";c=Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_embedvideo");h='<img src="'+PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"videoicon.gif")+'" alt="'+c.encodeHtmlAttribute()+'" />';h+=c.encodeHtml();f.innerHTML=h}}if(e&&e.parentElement)e.parentElement.replaceChild(d,e);if(g&&g.parentElement)g.parentElement.replaceChild(f,g);if(a)a.Disable();if(b)b.disabled=true;Spaces.ActionToolbar.ToolbarManager.getInstance().TryDisable()};function k(){event.returnValue=false;if($Browser.isIE()){if(a&&a.isReadyForUpload()){window.cachedPhotoListBinding=a;var d=document.getElementById("PhotoArea");LoadPhotoUploadcontrol("/SPUD.aspx?postId="+document.getElementById("entryid").value+"&domain="+document.domain,d)}}else{document.getElementById("DlUploadArea").style.display="block";for(var b=0;b<5;b++){h.Events.register(document.getElementById("filectrl"+b),{onkeyup:c.SetSaveEnabledStatus});h.Events.register(document.getElementById("filectrl"+b),{onchange:c.SetSaveEnabledStatus})}document.getElementById("blogAddPhotos").detachEvent("onclick",k)}}function l(d,b){if(b){a=d;if(e)h.Events.register(e,{onclick:k});h.Events.register(a,{onaddphoto:c.SetSaveEnabledStatus});c.SetSaveEnabledStatus()}else a=null}function m(b,c){if(!$Browser.isMozilla())return;if(c){var d=0;function a(){try{var e=document.getElementById("blogContent"),c=b.getExecElement();b.setValue(e.innerHTML);e.innerHTML="";c.designMode="off";setTimeout(function(){c.designMode="on"},100)}catch(f){if(++d>10)return;setTimeout(a,100)}}setTimeout(a,400)}}this.SetSaveEnabledStatus=function(f){var c=false,d,e;if(a&&a.Count>0)c=true;if(!c&&!$Browser.isIE())for(i=0;i<5;i++)if(document.getElementById("filectrl"+i)){e=document.getElementById("filectrl"+i).value;if(e.length>0){c=true;break}}if(!b||b.value.trim().length>0||c){d=true;Spaces.ActionToolbar.ToolbarManager.getInstance().TryEnableMenuItem("Post");Spaces.ActionToolbar.ToolbarManager.getInstance().TryEnableMenuItem("SaveDraft")}else{d=false;Spaces.ActionToolbar.ToolbarManager.getInstance().TryDisableMenuItem("Post");Spaces.ActionToolbar.ToolbarManager.getInstance().TryDisableMenuItem("SaveDraft")}if(f)return true;return d}};var _SpacesBE=Spaces.Blog.Entry;_SpacesBE.registerClass("Spaces.Blog.Entry","$Binding");_SpacesBE.skipClass=true;function shTB(){var a=document.getElementById("tbinfo");if(a.style.display=="none"||a.style.display=="")a.style.display="block";else a.style.display="none"}function SetParentHandle(a){if(a&&document.getElementById("entryid"))document.getElementById("entryid").value=a}function GetParentHandle(){if(document.getElementById("entryid"))return document.getElementById("entryid").value;return null}Spaces.BlogEntry.PreviewLink=function(a,c){Spaces.BlogEntry.PreviewLink.initializeBase(this,arguments);c=this.getParameters();function b(){var b=event.srcElement;while(b!=null&&b!=a){if(b.tagName=="A")b.target="_blank";b=b.parentElement}}this.initialize=function(){a.attachEvent("onclick",b);Spaces.BlogEntry.PreviewLink.callBaseMethod(this,"initialize",arguments)};this.dispose=function(){a.detachEvent("onclick",b);a=null;Spaces.BlogEntry.PreviewLink.callBaseMethod(this,"dispose",arguments)}};Spaces.BlogEntry.PreviewLink.registerClass("Spaces.BlogEntry.PreviewLink","$Binding");Spaces.BlogEntry.PreviewLink.skipClass=true;_SpacesBE.DeletePermalink=function(a){function b(){window.location=gblBlogPage}function c(){document.getElementById("BPErr").style.display=""}document.getElementById("BPErr").style.display="none";_SpacesBE.DeleteItem(BlogService.BlogItemType.Entry,a,b,c)};_SpacesBE.DeleteItem=function(a,g,e,f){var d=BlogService.BlogItemType,j="None",c,b;switch(a){case d.Entry:b=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_entry_title");c=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_entry_text");break;case d.Comment:b=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_comment_title");c=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_comment_text");break;case d.Trackback:b=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_trackback_title");c=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_trackback_text")}var k=new SimpleDialogData(name,null,null,null,c.encodeHtml()+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone").encodeHtml()+"</p>",Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),Spaces.Utility.GetString(Spaces.Common.Strings,"global_cancel"));function i(){alert(gblErrorOccurred);return false}function h(){var d=document.getElementById(a+g);if(d!=null)d.style.display="none";var b=document.getElementById(a+"body"),c=parseInt(b.getAttribute("itemcount"))-1;b.setAttribute("itemcount",c);if(c==0)b.style.display="none"}function l(){var d=e?e:h,j=f?f:i,c=[],b=BlogService.BlogItem();b.BlogItemType=a;b.Handle=g;c.push(b);Spaces.Blog.GetFppService().delete_items(c,d,null,j,10000)}Spaces.PopOvers.SimplePopOver(j,b,k,null,l)};_SpacesBE.AddNewCategory=function(d,c){var e=false,b=false,j="",f=gblTotalCategory,a=document.getElementById("category");if(!d)d="";function h(l){var j=true,k=l.obj,d=k.ReturnValues[0];if(d)d=d.trim();else if(d!=""){b=true;d=""}var h=false;if(d.length>c){alert(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_categorytoolong"));h=true}if(d.length==0&&b==false){alert(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_invalidcategory"));h=true}if(b==false&&d.length>0&&d.length<=c){for(i=0;i<a.length;i++)if(a.options[i].value.toUpperCase()==d.toUpperCase()){e=true;break}if(e)a.options[i].selected=true;else{var g=new Option(d);g.value=d;a.options[f]=g;g.selected=true}}if(!b&&h)j=false;return j}var g=new ComplexDialogData(new Array(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_entrycategory")),new Array(d),Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_addnewcategorytext").format('<span class="bold">',"</span>"),Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_addcategorypopoveradd"),Spaces.Utility.GetString(Spaces.Common.Strings,"global_cancel"),[c]);Spaces.PopOvers.SimplePopOver("SingleNameValue",Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_addcategorypopovertitle"),g,null,h)};registerNamespace("Spaces.BlogEntry");Spaces.BlogEntry.ConfirmNavigate=function(e,c){Spaces.BlogEntry.ConfirmNavigate.initializeBase(this,arguments);c=this.getParameters();var a=null;function d(b,c){if(c)a=b;else a=null}function b(){if(!Spaces.BlogEntry.ConfirmNavigate._disabled&&a&&a.isDirty())event.returnValue=c.message}this.initialize=function(){window.attachEvent("onbeforeunload",b);Spaces.BlogEntry.ConfirmNavigate.callBaseMethod(this,"initialize",arguments);this.registerFor("$UI.Editor",d)};this.dispose=function(){window.detachEvent("onbeforeunload",b);a=null;e=null;Spaces.BlogEntry.ConfirmNavigate.callBaseMethod(this,"dispose",arguments)}};Spaces.BlogEntry.ConfirmNavigate.registerClass("Spaces.BlogEntry.ConfirmNavigate","$Binding");Spaces.BlogEntry.ConfirmNavigate.skipClass=true;Spaces.BlogEntry.ConfirmNavigate.Params=new $Enum("message");Spaces.BlogEntry.ConfirmNavigate._disabled=false;Spaces.BlogEntry.ConfirmNavigate.Enable=function(){Spaces.BlogEntry.ConfirmNavigate._disabled=false};Spaces.BlogEntry.ConfirmNavigate.Disable=function(){Spaces.BlogEntry.ConfirmNavigate._disabled=true};Spaces.Blog.Entry.PostButton=function(F,a){Spaces.Blog.Entry.PostButton.initializeBase(this,arguments);a=this.getParameters();var d=this,A=256,z=65536,B=10,e=false,b="",v="",D=false,O="trackbackurl",k,T="title",l,S="DLEditBox",s,R="category",r,g=null,c=null,u=null,f,i,p,q,w,E;this.initialize=function(c){Spaces.Blog.Entry.PostButton.getBaseMethod(this,"initialize","Spaces.ActionToolbar.MenuItem").call(this,c);i=new $Memory.Groups;A=parseInt(a.max_title_length);z=parseInt(a.max_entry_length);B=parseInt(a.max_trackbacks);e=a.save_as_draft=="true";if(a.post_handle)b=a.post_handle;if(a.reply_handle)v=a.reply_handle;if(a.is_quote)D=Boolean.parse(a.is_quote);k=document.getElementById(O);l=document.getElementById(T);s=document.getElementById(S);r=document.getElementById(R);i.create(null).Events.register(F,{onclick:P});d.registerFor("Spaces.Blog.PhotoList",I);d.registerFor("Spaces.Blog.ErrorArea",M);d.registerFor("Spaces.Blog.Entry.PostButton",K);d.registerFor("Spaces.Blog.Entry",H)};this.dispose=function(a){if(i){i.dispose();i=null}F=null;k=null;l=null;s=null;r=null;d=null;u=null;g=null;c=null;f=null;Spaces.Blog.Entry.PostButton.getBaseMethod(this,"dispose","Spaces.ActionToolbar.MenuItem").call(this,a)};function I(b,a){if(a)g=b;else g=null}function M(b,a){if(a)c=b;else c=null}function K(a,b){if(b){if(a!=d)u=a}else if(a!=d)u=null}function H(b,a){if(a){f=b;f.SetSaveEnabledStatus()}else f=null}function C(){var a=new Array(0),b=document.getElementById("DlUploadArea");if(b&&b.style.display!="none"){a.queue(document.getElementById("filectrl0"));a.queue(document.getElementById("filectrl1"));a.queue(document.getElementById("filectrl2"));a.queue(document.getElementById("filectrl3"));a.queue(document.getElementById("filectrl4"))}return a}function x(a){var b;if(!a)a=C();if(a.length>0)b=a[0].value||a[1].value||a[2].value||a[3].value||a[4].value;else b=false;return !!b}function P(){event.returnValue=false;if(!d.IsEnabled())return false;var i="",h="",t="",p="",f=true,q=new Array(0);if(l){i=l.value.trim();if(i.length>A){n(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_titletoolong"));l.focus();return false}}RecopyRTE(s);h=s.value;if(h.length>z){n(Spaces.Utility.GetString(Spaces.Blog.Strings,a.length_err_key.replace(/\./g,"_")));return false}if(k){p=k.value;if(p!=""){var y=p.split(";");if(y.length>B){n(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_trackbackerror"));k.focus();return false}}}L();if(c)if(e)c.DisplayProgressMessage(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_publishdraftwait"));else c.DisplayProgressMessage(Spaces.Utility.GetString(Spaces.Blog.Strings,a.save_wait_key.replace(/\./g,"_")));if(r)t=r.value;var w=GetParentHandle();if(b);if(g&&!b)b=g.PostHandle;if(a.entry_type=="discussionreply"){if(v&&!D)f=false}else if(b)f=false;if(!b&&w){f=false;b=w}if(g)q=g.GetNewPhotos();Spaces.BlogEntry.ConfirmNavigate.Disable();try{if(a.entry_type=="guestbook")Spaces.Blog.GetFppService().update_guestbook_message(h,b,o,null,m,a.ms_timeout);else if(a.entry_type=="discussionpost")Spaces.Blog.GetFppService().post_discussions_entry(h,i,e,t,f,b,o,null,m,a.ms_timeout);else if(a.entry_type=="discussionreply")Spaces.Blog.GetFppService().post_discussions_reply(h,i,e,f,b,v,o,null,m,a.ms_timeout);else{var u=x();Spaces.Blog.GetFppService().post_blog_entry(h,i,p,e,t,f,b,q,q.length>0||u,g.GetHasInlinePhotos()&&!u,o,null,m,a.ms_timeout)}}catch(C){j()}return false}function o(c){var f=null,d=false;if(c)d=!c.PostHandle&&!c.CommentHandle;if(!c||d||!c.Success){if(c)j(c.IsProfanityError);else j();return}E=c.WasDraft;if(a.entry_type!="discussionreply")if(b);else b=c.PostHandle;Q();if(!e)J(c.Trackbacks,c.Alias,c.PostTitle,c.PostPermalink);else{p=true;h()}}function m(a){if(a==Spaces.Blog.GetFppService().FppStatus.ERR_HTTP_TIMEOUT)j(false,true);else j(false,false)}function j(c,d){N();var a;if(c)a=Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_containsprofanity");else if(d&&!b)a=Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_timeouterror");else a=Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_genericerror");n(a)}function Q(){var d=[],f=[],a,j=true;function e(){if(!j){var c=false;try{if(frames["uploadFrame"].document.forms&&frames["uploadFrame"].document.forms.length>0&&frames["uploadFrame"].document.forms[0]){var g=frames["uploadFrame"].document.forms[0].elements["Img_0_Success"],a=frames["uploadFrame"].document.forms[0].elements["Img_0_ID"];if(g&&g.value=="1"&&a&&a.value){f.push(a.value);c=true}}}catch(h){$Tracing.Error.submitFromException(h,"Spaces.Blog.Entry.PostButton.UploadPhotos")}if(!c)w=true}j=false;if(d.length>0){do elFileInput=d.dequeue();while(elFileInput.value.length==0&&d.length>0);if(elFileInput.value.length>0){elForm=elFileInput.parentElement;elForm.target="uploadFrame";elForm.elements["Img_ParentID"].value=b;try{elForm.submit()}catch(h){w=true;e()}}else y(f)}else y(f)}var g=document.getElementById("DlUploadArea");if(g&&g.style.display!="none"){d=C();if(x(d)){if(c)c.DisplayProgressMessage(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_photoswait"));if(!a){a=document.createElement("iframe");a.style.display="none";a.id=a.name="uploadFrame";document.getElementById("DlUploadArea").appendChild(a);i.create(null).Events.register(a,{onload:e})}else e()}else{q=true;h()}}else{q=true;h()}}function y(c){if(!e&&c&&c.length>0)Spaces.Blog.GetFppService().update_blog_photos(b,E,c,t,null,t,a.ms_timeout);else t()}function t(){q=true;h()}function h(){if(p&&q)G()}function G(){if(w)newLocation=a.photo_error_url.replace("%7b0%7d","{0}").format(b);else if(e)newLocation=a.draft_url.replace("%7b0%7d","{0}").format(b);else newLocation=a.blog_url;window.location=newLocation}function J(b,e,f,d){var a=0;function c(){if(b[a])try{var i=document.createElement("div");i.style.display="none";document.body.appendChild(i);var g='<iframe name="tbFrame'+a+'" id="tbFrame'+a+'" style="display:none"></iframe>';g+='<form name="tbForm'+a+'" id="tbForm'+a+'" target="tbFrame'+a+'" method="post" action="'+b[a].encodeHtml()+'" >';g+='<input type="hidden" id="url" name="url" value="'+d.encodeHtml()+'" />';g+='<input type="hidden" id="excerpt" name="excerpt" value="'+f.encodeHtml()+'" />';g+='<input type="hidden" id="blog_name" name="blog_name" value="'+e.encodeHtml()+'" />';g+="</form>";i.innerHTML=g;document.getElementById("tbForm"+a).submit()}catch(j){}a++;if(a<b.length)window.setTimeout(c,0);else{p=true;h()}}if(b!=null&&b.length>0)window.setTimeout(c,0);else{p=true;h()}}function L(){if(f)f.Disable()}function N(){if(f)f.Enable();Spaces.BlogEntry.ConfirmNavigate.Enable()}function n(a){if(c)c.DisplayErrorMessage(a);else alert(a)}};Spaces.Blog.Entry.PostButton.registerClass("Spaces.Blog.Entry.PostButton","Spaces.ActionToolbar.MenuItem");Spaces.Blog.Entry.PostButton.skipClass=true;Spaces.Blog.Entry.PostButton.Params=new $Enum("post_handle","reply_handle","is_quote","save_as_draft","ms_timeout","max_trackbacks","max_title_length","max_entry_length","photo_error_url","draft_url","blog_url","entry_type","save_wait_key","length_err_key","enabled_icon","href","state","id");Spaces.Blog.Entry.ToolbarButton=function(h,a){Spaces.Blog.Entry.ToolbarButton.initializeBase(this,arguments);a=this.getParameters();var d=this,c,b,g,f;this.initialize=function(b){h.attachEvent("onclick",k);c=a.id;Spaces.Blog.Entry.ToolbarButton.getBaseMethod(this,"initialize","Spaces.ActionToolbar.MenuItem").call(this,b);if(c=="Cancel"||c=="Delete"){d.registerFor("Spaces.Blog.PhotoList",j);d.registerFor("Spaces.Blog.Entry",l);d.registerFor("Spaces.Blog.ErrorArea",m)}if(c=="Preview")d.registerFor("Spaces.Blog.PhotoList",j)};this.dispose=function(a){if(h)h.detachEvent("onclick",k);h=null;d=null;b=null;g=null;f=null;Spaces.Blog.Entry.ToolbarButton.getBaseMethod(this,"dispose","Spaces.ActionToolbar.MenuItem").call(this,a)};var k=function(){if(!d.IsEnabled)return;if(c=="Delete"){var a=new SimpleDialogData(null,null,null,null,Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_entry_text")+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),null);Spaces.PopOvers.SimplePopOver(null,Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_entry_title"),a,null,o,h)}else if(c=="Preview")p();else if(c=="Edit")q();else if(c=="Cancel"){var a=new SimpleDialogData(null,null,null,null,Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_cancelprompt")+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",null,null);Spaces.PopOvers.SimplePopOver(null,Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_canceltitle"),a,null,n,h)}},o=function(){g.HideErrorMessage();f.Disable();var c=new BlogService.BlogItem;if(a.entry_type=="discussions"){c.BlogItemType=BlogService.BlogItemType.DiscussionPost;c.Handle=a.post_handle}else{c.BlogItemType=BlogService.BlogItemType.Entry;c.Handle=b.PostHandle}Spaces.Blog.GetFppService().delete_items(new Array(c),e,null,r,a.ms_timeout)},e=function(){Spaces.BlogEntry.ConfirmNavigate.Disable();window.location=a.blog_url},r=function(){f.Enable();g.DisplayErrorMessage(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_deleteerror"))},n=function(){f.Disable();g.HideErrorMessage();var h=false,d;if(a.photos_enabled=="true"){d=b.GetNewPhotos();h=d.length>0}if(h)if(a.new_post=="1"){var c=new BlogService.BlogItem;c.BlogItemType=BlogService.BlogItemType.Entry;c.Handle=b.PostHandle;Spaces.Blog.GetFppService().delete_items(new Array(c),e,null,e,a.ms_timeout)}else Spaces.Blog.GetFppService().delete_blog_photos(d,b.PostHandle,e,null,e,a.ms_timeout);else e()},j=function(c,a){if(a){b=c;i()}},m=function(b,a){if(a){g=b;i()}},l=function(b,a){if(a){f=b;i()}},i=function(){if(f&&g&&(b||a.photos_enabled!="true"))d.Enable()},p=function(){document.getElementById("blogEntryDiv").style.display="none";var c=document.getElementById("DLEditBox");RecopyRTE(c);var a=c.value;if(b)a+=b.getPhotoHtml();document.getElementById("previewbox").innerHTML=a;Spaces.ActionToolbar.ToolbarManager.getInstance().TryHideMenuItem("Preview");Spaces.ActionToolbar.ToolbarManager.getInstance().TryShowMenuItem("Edit");document.getElementById("previewbox").style.display="block";window.focus()},q=function(){document.getElementById("blogEntryDiv").style.display="block";document.getElementById("previewbox").style.display="none";Spaces.ActionToolbar.ToolbarManager.getInstance().TryHideMenuItem("Edit");Spaces.ActionToolbar.ToolbarManager.getInstance().TryShowMenuItem("Preview");document.getElementById("DLEditBox").focus()}};Spaces.Blog.Entry.ToolbarButton.registerClass("Spaces.Blog.Entry.ToolbarButton","Spaces.ActionToolbar.MenuItem");Spaces.Blog.Entry.ToolbarButton.skipClass=true;Spaces.Blog.Entry.ToolbarButton.Params=new $Enum("enabled_icon","href","state","id","blog_url","ms_timeout","new_post","photos_enabled","post_handle","entry_type");Spaces.Blog.Management=function(h,o){Spaces.Blog.Management.initializeBase(this,arguments);o=this.getParameters();var a=BlogService.BlogItemType,s=this,e=h,b,c;this.initialize=function(){Spaces.Blog.Management.callBaseMethod(this,"initialize",arguments);b=new $Memory.Groups;b.create(null).Events.register(e,{onclick:p});this.registerFor("Spaces.ActionToolbar.Toolbar",k)};this.dispose=function(a){Spaces.Blog.Management.callBaseMethod(this,"dispose",arguments);if(b){b.dispose(a);b=null}h=null;e=null};function k(d,a){if(a){c=d.GetToolbarItem("Delete");if(c)b.create("Toolbar").Events.register(c,{onclick:n})}else{c=null;b.disploseGroup("Toolbar")}}function n(){g();if(!Spaces.ActionToolbar.ToolbarManager.getInstance().IsMenuItemEnabled("Delete"))return false;i();event.returnValue=false}function g(){if(!(typeof Spaces!="undefined"&&Spaces&&Spaces.ActionToolbar&&Spaces.ActionToolbar.ToolbarManager))return;var a=d(),c=true;for(var b=0;b<a.length;b++)if(a[b].checked){c=false;break}if(c)Spaces.ActionToolbar.ToolbarManager.getInstance().TryDisableMenuItem("Delete");else Spaces.ActionToolbar.ToolbarManager.getInstance().TryEnableMenuItem("Delete");return a}function j(b){var c=g();if(b.getAttribute("checktype")==a.Entry)f(c,b)}function f(f,e){var g=e.getAttribute("entry"),h=e.checked,b,c;for(var d=0;d<f.length;d++){b=f[d];c=b.getAttribute("checktype");if(b.getAttribute("entry")==g&&(c==a.Trackback||c==a.Comment))b.disabled=h}}function p(){var a=event.srcElement;if(a.tagName=="INPUT"&&a.type=="checkbox"&&!a.disabled)j(a);else{var c=a.getAttribute("bmItemType"),g=a.getAttribute("bmHandle");if(c&&g){var i=document.getElementById(c+g),e=i.webBindings[0];e.toggleDisplay(false,false);if(e.isOpen){var b=document.getElementById("entryCheck"+a.getAttribute("entry"));if(b){var h=d();f(h,b)}}event.returnValue=false}}}function d(){var c=e.getElementsByTagName("INPUT"),b=[];for(var a=0;a<c.length;a++){var d=c[a];if(d.type=="checkbox")b.push(d)}return b}var i=function(){var g=[],h={},e=[],c=d();for(var b=0;b<c.length;b++)switch(Number.coerceInt(c[b].getAttribute("checktype"))){case a.Entry:if(c[b].checked==true){var i=c[b].getAttribute("entry"),f=BlogService.BlogItem();f.BlogItemType=a.Entry;f.Handle=c[b].getAttribute("handle");g.push(f);h[i]=true}break;case a.Trackback:case a.Comment:e.push(c[b])}for(var b=0;b<e.length;b++)if(e[b].checked==true){var i=e[b].getAttribute("entry");if(h[i]!=true){var f=BlogService.BlogItem();f.BlogItemType=e[b].getAttribute("checktype");f.Handle=e[b].getAttribute("handle");g.push(f)}}if(g.length>0){var j=new SimpleDialogData(null,null,null,null,Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_multiple_text")+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),Spaces.Utility.GetString(Spaces.Common.Strings,"global_cancel")),k=Spaces.Utility.GetString(Spaces.Blog.Strings,"deleteblogitem_multiple_title"),n=function(){Spaces.Blog.GetFppService().delete_items(g,m,null,l,10000)};Spaces.PopOvers.SimplePopOver(null,k,j,null,n,event.srcElement)}};function m(){location.reload()}function l(){m_fppCallInProgress=false;alert(Spaces.Utility.GetString(Spaces.Blog.Strings,"global_errorretrievingcontent"))}};Spaces.Blog.Management.registerClass("Spaces.Blog.Management","$Binding");Spaces.Blog.Management.skipClass=true;registerNamespace("Spaces.Blog");Spaces.Blog.PhotoListItem=function(d,a){Spaces.Blog.PhotoListItem.initializeBase(this,arguments);a=this.getParameters();var e=this,b,c,f,i;this.initialize=function(){Spaces.Blog.PhotoListItem.callBaseMethod(this,"initialize",arguments);this.photoHandle=a.handle;i=a.caption;var e;if(a.url&&a.url.length>0){e=document.createElement("a");e.href=a.url;e.target="_blank"}else e=document.createElement("span");e.innerHTML='<img src="'+PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"attachmenticon.gif")+'" alt="">'+a.caption.encodeHtml();e.className=a.classname;f=document.createElement("td");f.appendChild(e);d.appendChild(f);var j=document.createElement("img");j.src=PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"delete.gif");j.style.borderStyle="none";b=document.createElement("a");b.href="#";b.title=Spaces.Blog.Strings.blogentry_deletephoto_tooltip.format(a.caption);b.appendChild(j);c=document.createElement("img");c.src=PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,null,"delete_d.gif");c.style.display="none";var g=document.createElement("td");g.align="center";g.vAlign="center";g.appendChild(b);g.appendChild(c);b.attachEvent("onclick",h);d.appendChild(g)};this.dispose=function(){Spaces.Blog.PhotoListItem.callBaseMethod(this,"dispose",arguments);if(b)b.detachEvent("onclick",h);e=null;d=null};this.getThumbUrl=function(){return a["thumburl"]};this.getWebReadyUrl=function(){return a["url"]};function j(){d.parentNode.removeChild(d);e.fire("ondelete",e.photoHandle);$Binding.remove(d)}this.GrayItem=function(){f.className="grayText";b.style.display="none";c.style.display=""};this.UnGrayItem=function(){f.className="";c.style.display="none";b.style.display=""};function g(a){if(a==true)j();else{alert(Spaces.Blog.Strings.blogentry_deletephoto_jserror);e.UnGrayItem()}}function h(b){var c=new SimpleDialogData(null,null,null,null,Spaces.Blog.Strings.blogentry_deletephoto_prompt.format(i.encodeHtml(),a.prod_name.encodeHtml())+"<p>"+Spaces.Utility.GetString(Spaces.Common.Strings,"global_cannotbeundone")+"</p>",Spaces.Utility.GetString(Spaces.Common.Strings,"global_delete"),null);function d(){try{e.GrayItem();Spaces.Blog.GetFppService().delete_blog_photos(new Array(a.handle.toString()),a.post_handle.toString(),g,null,g,a.ms_timeout)}catch(b){g(false)}return true}Spaces.PopOvers.SimplePopOver(null,Spaces.Utility.GetString(Spaces.Blog.Strings,"blogentry_deletephoto"),c,null,d,b.srcElement);b.returnValue=false;return false}};Spaces.Blog.PhotoListItem.registerClass("Spaces.Blog.PhotoListItem","$Binding");Spaces.Blog.PhotoListItem.skipClass=true;Spaces.Blog.PhotoListItem.Params=new $Enum("url","thumburl","caption","handle","post_handle","classname","ms_timeout","prod_name");Spaces.Blog.PhotoListItem.Events=new $Enum("ondelete");registerNamespace("Spaces.Blog");Spaces.Blog.PhotoList=function(f,e){Spaces.Blog.PhotoList.initializeBase(this,arguments);e=this.getParameters();var b=this,k=true,d={},a=[],p=f.childNodes[1],h,c,g;this.initialize=function(){b.PostHandle=e.post_handle;b.Count=0;Spaces.Blog.PhotoList.callBaseMethod(this,"initialize",arguments);b.registerFor("Spaces.Blog.PhotoListItem",n);b.registerFor("Spaces.Blog.Entry",l);b.registerFor("$UI.Editor",o);g=e["existing_inline"]=="true"};this.dispose=function(){Spaces.Blog.PhotoList.callBaseMethod(this,"dispose",arguments);f=null;p=null;for(var d=0;d<a.length;d++)a[d].detachEvent("ondelete",j);b=null;a=null;h=null;c=null};function n(c,d){if(d){b.Count+=1;if(e.show_photos=="true"){f.style.display="";c.attachEvent("ondelete",j)}a.add(c);if(!k)c.GrayItem()}else{b.Count-=1;if(b.Count<1)f.style.display="none";a.remove(c);c.detachEvent("ondelete",j)}}function l(b,a){if(a)h=b;else h=null}function o(b,a){if(a)c=b;else c=null}this.AddFromSPUD=function(a,j){if(a.length>0){b.PostHandle=j;var e=b.getPhotoHtml();for(i=0;i<a.length;i++){var h=m(a[i].WebWidth,a[i].WebHeight),l='<a href="'+a[i].MiniSource+'" target="_blank"><img src="'+a[i].MiniSource+'" width="'+h.width+'" height="'+h.height+'" alt="'+a[i].Caption+'" /></a>';if(c){var f=false;if(!c.isRTEMode()){f=true;c.switchEditMode()}c.insertHTML(l);if(f)c.switchEditMode();g=true}d[a[i].GUID]=true}if(!c)$Tracing.Error.submitFromException("","Spaces.Blog.PhotoList.AddFromSPUD",null,"m_objRTE is null while adding photos - should not happen and can cause attached blog images to appear to be lost");if(b.GetHasInlinePhotos()&&e){var k=c.getValue();c.setValue(k+e)}b.fire("onaddphoto")}};function m(c,b){var a={},e=c,d=b;if(b>250||c>400){d=Math.round(b/2);e=Math.round(c/2)}a.height=d;a.width=e;return a}this.GetNewPhotos=function(){var b=[];for(var a in d)if(d[a])b.add(a);return b};this.GetHasInlinePhotos=function(){return g};this.Disable=function(){k=false;for(var b=0;b<a.length;b++)a[b].GrayItem()};this.Enable=function(){k=true;for(var b=0;b<a.length;b++)a[b].UnGrayItem()};this.isReadyForUpload=function(){return !!c};this.getPhotoHtml=function(){if(b.GetHasInlinePhotos()||a.length==0)return "";var c=new $StringBuilder('<table cellspacing="0" border="0">');for(var d=0;d<a.length;d++)if(d%2==0){c.append('<tr height="8"><td></td></tr><tr><td valign="top"><a href="');c.append(a[d].getWebReadyUrl().encodeHtml());c.append('" target="_blank"><img src="');c.append(a[d].getThumbUrl().encodeHtml());c.append('" border="0"></a></td>')}else{c.append('<td width="15"></td><td valign="top"><a href="');c.append(a[d].getWebReadyUrl().encodeHtml());c.append("\" target='_blank'><img src=\"");c.append(a[d].getThumbUrl().encodeHtml());c.append('" border="0" /></a></td></tr>')}if(d%2!=0)c.append("</tr>");c.append("</table>");return c.toString()};function j(b){var a=b.srcBinding.photoHandle;if(d[a])d[a]=false}};Spaces.Blog.PhotoList.registerClass("Spaces.Blog.PhotoList","$Binding");Spaces.Blog.PhotoList.skipClass=true;Spaces.Blog.PhotoList.Params=new $Enum("post_handle","existing_inline","show_photos");Spaces.Blog.PhotoList.Events=new $Enum("onaddphoto");registerNamespace("Spaces.Blog");Spaces.Blog.EmbedVideoPopover=function(i){var g="save",f="cancel",a=Spaces.Blog.Strings,e=Spaces.Common.Strings,b=new Spaces.Controls.Popover,d=document.createElement("textarea"),c=document.createElement("div");function h(p,o){if(g!=o){d=null;c=null;b=null;return true}var e=d.value;if(""==e){c.innerHTML=a.embedvideopopover_emptyembed;return}var f=new RegExp("</?\\s*(?:object|param)(?:\\s+[^>]*>|/?>)","gim");e=e.replace(f,"");f=new RegExp("(<\\s*(?:embed)[^>]*?)\\s+wmode=(['\"]?)[^\\2]*?\\2((?:\\s+[^>]*>|>))","gim");e=e.replace(f,"$1$3");f=new RegExp("(<\\s*(?:embed))((?:\\s+[^>]*>|/?>))","gim");e=e.replace(f,'$1 wmode="opaque"$2');var n,m=false;f=f=new RegExp("<\\s*(?:embed)(?:\\s+[^>]*>|/?>)","gim");while(null!=(n=f.exec(e))){m=true;if(!k(n[0]))return}if(!m){c.innerHTML=a.embedvideopopover_invalidembed;return}var j=document.getElementById("DLEditBox").webBindings,h=null;for(var i=0;i<j.length;i++)if("$UI.Editor"==j[i].getType()){h=j[i];break}if(null!=h){var l=false;if(!h.isRTEMode()){l=true;h.switchEditMode()}if(!$Browser.isIE())try{h.getExecElement().designMode="off"}catch(q){}h.insertHTML(e);if(!$Browser.isIE())setTimeout(function(){try{h.getExecElement().designMode="on"}catch(a){}},0);if(l)h.switchEditMode()}return true}function k(h){var e,g=false,f=new RegExp("\\s+type=(['\"]?)([^\\1]*?)\\1[\\s>]","gim");while(null!=(e=f.exec(h))){g=true;if("application/x-shockwave-flash"!=e[2]){c.innerHTML=a.embedvideopopover_invalidplayer;return}}if(!g){c.innerHTML=a.embedvideopopover_invalidplayer;return}var i=false;f=new RegExp("\\s+src=(['\"]?)([^\\1]*?)\\1[\\s>]","gim");while(null!=(e=f.exec(h))){i=true;var b=e[2],n=b.indexOf(":");if(-1!=n)if(!b.match("^https?://")){c.innerHTML=a.embedvideopopover_invalidplayer;return}var k=b.indexOf("#"),j=b.indexOf("?"),d=b.substr(0,Math.min(-1==k?b.length:k,-1==j?b.length:j)),l=d.lastIndexOf("."),o=d.lastIndexOf("/");if(l>o){var m=d.substr(l+1,d.length);if("swf"!=m){c.innerHTML=a.embedvideopopover_invalidplayer;return}}}if(!i){c.innerHTML=a.embedvideopopover_invalidplayer;return}return true}function l(){var j=document.createElement("div"),l=document.getElementById("embedvideohelplink");j.innerHTML='<div style="padding-bottom:12px"><span>'+a.embedvideopopover_instructions+"</span>  <span>"+l.innerHTML+'</span></div><label for="embedBox">'+a.embedvideopopover_embedcode+"</label>";d.style.width="430px";d.style.height="64px";d.id="embedBox";if($Browser.isMozilla()){d.style.position="fixed";d.style.overflow="auto";var k=document.createElement("div");k.style.height="64px";k.appendChild(d);j.appendChild(k)}else j.appendChild(d);c.className="InlineError";c.style.marginBottom="10px";j.appendChild(c);b.width="450";b.addButton(g,e.global_save,true,false);b.addButton(f,e.global_cancel,false,true);b.header=a.embedvideopopover_title;b.body=j;b.show(h,i)}function j(){var c=document.createElement("div");c.innerHTML=a.embedvideopopover_invalidversion+'  <a href="http://www.macromedia.com/go/getflashplayer" target="_blank">'+a.embedvideopopover_downloadflash+'</a><div style="margin-top:10px;text-align:center;"><a href="http://www.macromedia.com/go/getflashplayer" target="_blank"><img alt="" src="'+PathUtility.MapPath(PathUtility.MapPathType.Image,PathUtility.MapPathServerType.SpacesWeb,"","noflash.gif")+'" /></a></div>';b.width="450";b.addButton(f,e.global_cancel,false,true);b.header=a.embedvideopopover_title;b.body=c;b.show(h,i)}if(!FlashDetection||FlashDetection.HasFlash())l();else j()};Spaces.Blog.CreateEmbedVideoPopover=function(a){new Spaces.Blog.EmbedVideoPopover(a);if(event)event.returnValue=false;return false};registerNamespace("Spaces.Blog");Spaces.Blog._fppService=null;Spaces.Blog.GetFppService=function(){if(!Spaces.Blog._fppService){var a=new BlogService.FppProxySettings;a.UseClientXmlProxy=true;a.Version=BlogService.FppVersion.TWO;a.CanaryToken=C_CANARY_COOKIE_NAME;Spaces.Blog._fppService=BlogService.initializeEx("http://"+window.location.hostname+"/parts/blog/script/BlogService.fpp",a)}return Spaces.Blog._fppService};registerNamespace("Spaces.Blog");Spaces.Blog.PermalinkEntry=function(e,a){Spaces.Blog.PermalinkEntry.initializeBase(this,arguments);a=this.getParameters();var c,m=this,i=a.catbaseurl,j=a.cat,k=a.ca&&a.ca=="true"?true:false,b=[],d=e;this.initialize=function(){Spaces.Blog.PermalinkEntry.callBaseMethod(this,"initialize",arguments);c=new $Memory.Groups;c.create(null).Events.register(d,{onclick:g});this.registerFor("Spaces.Blog.EntrySubContainer",f)};this.dispose=function(a){if(c){c.dispose(a);c=null}e=null;d=null;Spaces.Blog.PermalinkEntry.callBaseMethod(this,"dispose",arguments)};function f(d,e){var g=BlogService.BlogItemType,c=d.itemType;if(e){b[c]=d;var f=document.location.hash;if(f=="#"+c||document.location.search.indexOf("action="+c)>=0)d.show(false,true);else if(a.open&&a.open.indexOf(c)>=0)d.show(false,false);else if(c=="post"&&BlogJS_IsPassportAuthenticated=="true")d.show(false,false);h()}else b[c]=null}var h=function(){if(b.comment&&b.trackback&&(!k||b.post))if(Spaces.LoadMonitor)Spaces.LoadMonitor.CompleteComponent("sp_pct_blogpermalink")},g=function(){var a=event.srcElement.getAttribute("bvItemType");if(a&&a!="")if(a=="category")location.href=i.format(encodeURI(encodeURI(j)));else{var c=b[a];c.show(false,true);event.returnValue=false}}};Spaces.Blog.PermalinkEntry.registerClass("Spaces.Blog.PermalinkEntry","$Binding");Spaces.Blog.PermalinkEntry.skipClass=true;Spaces.Blog.PermalinkEntry.Params=new $Enum("open","cns","ca","cat","catbaseurl","caturl");Spaces.Blog.EntrySubContainer=function(e,d){Spaces.Blog.EntrySubContainer.initializeBase(this,arguments);d=this.getParameters();var a=this,b=e,c,f;this.controlBox=null;this.content=null;this.cns=d.cns;this.itemType=null;this.isOpen=false;this.initialize=function(){this.controlBox=$Dom.Css.getElementsByCssSelector(".ControlBox",e)[0];this.content=$Dom.Css.getElementsByCssSelector(".Content",e)[0];Spaces.Blog.EntrySubContainer.callBaseMethod(this,"initialize",arguments);c=new $Memory.Groups;f=c.create(null);if(d.closebox=="1"){var b=this._setupButton(a.close,"close",d.closeboxtooltip,d.closeboxtooltip,null);if(this.controlBox)this.controlBox.appendChild(b)}};this.dispose=function(d){Spaces.Blog.EntrySubContainer.callBaseMethod(this,"dispose",arguments);if(c){c.dispose(d);c=null}e=null;b=null;a.controlBox=null;a.content=null};this.isLoaded=function(){if(this.content&&this.content.innerHTML!="")return true;else return false};this.loadDefaultView=function(){};this.show=function(c,b){if(c||!a.isLoaded())a.loadDefaultView(b);g(b);a.isOpen=true};this.toggleDisplay=function(c,b){if(a.isOpen)a.close();else a.show(c,b);return a.isOpen};var g=function(e){if(b.style.display=="none"||b.style.display=="")b.style.display="block";if(e){var f=Web.UI.getLocation(b),c=f.top+50,a=document.documentElement.scrollTop,d=document.documentElement.clientHeight;if(c<a||c>a+d)b.scrollIntoView(true)}};this.close=function(){b.style.display="none";a.isOpen=false;if(event)event.returnValue=false};this.revalidateAfterSectionOpen=function(d){var b;for(var c=d.childNodes.length-1;c>=0;c--){b=d.childNodes[c];if(b.tagName!=null&&b.tagName.toLowerCase()=="button"||b.className!=null&&b.className.toLowerCase()=="ccui"||b.className!=null&&b.className.toLowerCase()=="hoverbutton"||b.className!=null&&b.className.toLowerCase()=="notify"||b.className!=null&&b.className.toLowerCase().indexOf("identctrl")>-1)$Binding.validate(b);if(b.childNodes.length>0)a.revalidateAfterSectionOpen(b)}};this.removeBindingsDeep=function(b,e){if(b.childNodes)for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(d)a.removeBindingsDeep(d,true)}if(e)try{$Binding.remove(b)}catch(f){}};this._setupButton=function(g,d,h,j,i){var a=document.createElement("a");a.href="#";f.Events.register(a,{onclick:g});var b=document.createElement("img"),c=$Config.Themes.url+"hig/img/";b.src=c+"glyph/"+d+"_rest_~ContainerHeaderTextLuminance~.gif";b.alt=j;a.img=b;a.title=h;a.appendChild(b);a.style.display=i?"none":"";var e=new Spaces.Controls.HoverButton(b,{hoversrc:c+"glyph/"+d+"_hover_~ContainerHeaderTextLuminance~.gif"});f.Properties.register(e);return a};$Spaces.registerAllBaseMethods(Spaces.Blog.EntrySubContainer,this)};Spaces.Blog.EntrySubContainer.registerClass("Spaces.Blog.EntrySubContainer","$Binding");Spaces.Blog.EntrySubContainer.skipClass=true;Spaces.Blog.EntrySubContainer.Params=new $Enum("cns","closebox","closeboxtooltip");Spaces.Blog.EntryComments=function(l,a){Spaces.Blog.EntryComments.initializeBase(this,arguments);a=this.getParameters();var b=this,v=l,c,e,f,d,k,i,j,h,g,p=Number.coerceInt(a.pagesize),t=Number.coerceInt(a.commentcount),u=a.viewmode,q=Number.coerceInt(a.entry);this.initialize=function(g){b.itemType="comment";Spaces.Blog.EntryComments.getBaseMethod(this,"initialize","Spaces.Blog.EntrySubContainer").call(this,g);e=this.controlBox;f=this.content;d=$Dom.Css.getElementsByCssSelector(".ControlBox",l)[1];k=b._setupButton(o,"backnext_~Left~",a.prevtooltip,a.prevtooltip,true);i=b._setupButton(o,"backnext_~Left~",a.prevtooltip,a.prevtooltip,true);j=b._setupButton(r,"backnext_~Right~",a.nexttooltip,a.nexttooltip,true);h=b._setupButton(r,"backnext_~Right~",a.nexttooltip,a.nexttooltip,true);if(e){e.appendChild(k);e.appendChild(j);if(d){d.appendChild(i);d.appendChild(h)}c=new BlogService.BlogFppPaging;c.IsPrevious=false;c.IsNext=t>p?true:false;c.LastHandle=a.lastcns;m(c)}if(a.display=="1")b.show(false,a.scroll=="1"?true:false)};this.dispose=function(a){Spaces.Blog.EntryComments.getBaseMethod(this,"dispose","Spaces.Blog.EntrySubContainer").call(this,a);l=null;v=null;e=null;f=null;d=null;k=null;i=null;j=null;h=null};function r(){b.getComments(c.LastHandle,BlogService.BlogPagingDirection.Forward);event.returnValue=false}function o(){b.getComments(c.FirstHandle,BlogService.BlogPagingDirection.Reverse);event.returnValue=false}function m(a){c=a;k.style.display=a.IsPrevious?"":"none";i.style.display=a.IsPrevious?"":"none";j.style.display=a.IsNext?"":"none";h.style.display=a.IsNext?"":"none"}function s(){g=false;alert(Spaces.Utility.GetString(Spaces.Blog.Strings,"global_errorretrievingcontent"))}function n(a){b.removeBindingsDeep(f);f.innerHTML=a.Html;b.revalidateAfterSectionOpen(f);if(a.BlogFppPaging)m(a.BlogFppPaging);g=false}this.emitComments=function(a){n(a)};this.getComments=function(c,a){if(g)return;g=true;Spaces.Blog.GetFppService().get_comments(b.cns,c,a?a:BlogService.BlogPagingDirection.None,p,u,q?q:0,$Config.Themes.current,g_spLastMTime,n,null,s,10000)};this.loadDefaultView=function(){return b.getComments()}};Spaces.Blog.EntryComments.registerClass("Spaces.Blog.EntryComments","Spaces.Blog.EntrySubContainer");Spaces.Blog.EntryComments.skipClass=true;Spaces.Blog.EntryComments.Params=new $Enum("cns","viewmode","display","closebox","closeboxtooltip","scroll","pagesize","commentcount","lastcns","entry","prevtooltip","nexttooltip");Spaces.Blog.EntryTrackbacks=function(f,c){Spaces.Blog.EntryTrackbacks.initializeBase(this,arguments);c=this.getParameters();var a=this,k=f,e,b,d,i=c.viewmode,j=Number.coerceInt(c.entry);this.initialize=function(d){a.itemType="trackback";Spaces.Blog.EntryTrackbacks.getBaseMethod(this,"initialize","Spaces.Blog.EntrySubContainer").call(this,d);e=this.controlBox;b=this.content;if(c.display=="1")a.show(false,c.scroll=="1"?true:false)};this.dispose=function(a){Spaces.Blog.EntryTrackbacks.getBaseMethod(this,"dispose","Spaces.Blog.EntrySubContainer").call(this,a);f=null;k=null;e=null;b=null};function g(){d=false;alert(Spaces.Utility.GetString(Spaces.Blog.Strings,"global_errorretrievingcontent"))}function h(c){a.removeBindingsDeep(b);b.innerHTML=c.Html;a.revalidateAfterSectionOpen(b);d=false}this.getTrackbacks=function(){if(d)return;d=true;Spaces.Blog.GetFppService().get_trackbacks(a.cns,i,j,g_spLastMTime,h,null,g,10000)};this.loadDefaultView=function(){return a.getTrackbacks()}};Spaces.Blog.EntryTrackbacks.registerClass("Spaces.Blog.EntryTrackbacks","Spaces.Blog.EntrySubContainer");Spaces.Blog.EntryTrackbacks.skipClas=true;Spaces.Blog.EntryTrackbacks.Params=new $Enum("cns","closebox","closeboxtooltip","viewmode","display","scroll","entry");registerNamespace("Spaces.Blog");var gblMsnScriptTimeout=false;Spaces.Blog.PostComment=function(j,f){Spaces.Blog.PostComment.initializeBase(this,arguments);f=this.getParameters();var e,b=this,s=j,a=f.cns,g,d;this.initialize=function(a){b.itemType="post";Spaces.Blog.PostComment.getBaseMethod(this,"initialize","Spaces.Blog.EntrySubContainer").call(this,a);e=new $Memory.Groups;if(f.display=="1")b.show(f.scroll=="1"?true:false);e.create(null).Events.register(b.content,{onclick:r});b.registerFor("Spaces.Blog.PermalinkEntry",k);b.registerFor("Spaces.Blog.EntryComments",l)};this.dispose=function(a){if(e){e.dispose(a);e=null}g=null;d=null;j=null;s=null;Spaces.Blog.PostComment.getBaseMethod(this,"dispose","Spaces.Blog.EntrySubContainer").call(this,a)};function k(b,a){if(a)g=b;else g=null}function l(b,a){if(a)d=b;else d=null}this.isLoaded=function(){return false};this.loadDefaultView=function(a){return o(a)};var r=function(){var a=event.srcElement.getAttribute("action");if(a=="close"){b.close();event.returnValue=false}else if(a=="post"){q();event.returnValue=false}else if(a=="cc")h()},n=function(){var d=Spaces.Blog.Strings,c=Spaces.Utility.GetString,e,b=new $StringBuilder(""),f=false;if(BlogJS_CID!="0")f=true;if(BlogJS_IsPassportAuthenticated=="true"){e=false;var g=e?"bvSectionContentG":"bvSectionContentPC";b.append('<div class="'+g+'">');b.append('<div id="Err'+a+'" class="Err" ></div>');b.append(m());b.append('<div class="bvPostCommentInner">');b.append('<label id="lblName'+a+'" for="txtName'+a+'">'+c(d,"blogview_commentname").encodeHtml()+"</label>");b.append('<div class="ccAddFieldWrapper InputWrapper" ><input type="text" style="line-height:normal" '+(f?'display="none" ':"")+(f?" disabledText":"")+'" id="txtName'+a+'" name="txtName'+a+'" maxlength='+c_Name+' value="'+c(d,"profile_lc_noAbDisplayName")+'"></div>');b.append('<label for="txtEmail'+a+'">'+c(d,"blogview_commentemail").encodeHtml()+"</label>");b.append('<div class="ccAddFieldWrapper InputWrapper" ><input type="text" style="line-height:normal" '+(e?'readonly="True" ':"")+(e?" disabledText":"")+'" id="txtEmail'+a+'" name="txtEmail'+a+'" value="" maxlength='+c_Email+"></div>");b.append('<label id="lblURL'+a+'" for="txtURL'+a+'">'+c(d,"blogview_commentblogurl").encodeHtml()+"</label>");b.append('<div class="ccAddFieldWrapper InputWrapper" ><input type="text" style="line-height:normal" '+(f?'display="none" ':"")+(f?" disabledText":"")+'" id="txtURL'+a+'" name="txtURL'+a+'" value="'+strVisitorUrl+'" maxlength='+c_Url+"></div>");b.append('<label for="txtComment'+a+'">'+c(d,"blogview_commentshtmltext").encodeHtml()+"</label>");b.append('<table width="100%" cellspacing="0"><tr><td><div class="COMMENTENTRY"><textarea class="rtecomment" id="txtComment'+a+'" name="txtComment'+a+'" '+(e?"readonly":"")+' value="" ></textarea></div></td></tr></table>');b.append('<div class="ButtonBar">');b.append('<button id="commAdd'+a+'" type="submit" action="post" class="Default" '+(e?'disabled="0"':"")+">"+c(d,"blogview_publishcomment").encodeHtml()+"</button>");b.append('<button id="commCancel'+a+'" action="close" '+(e?'disabled="0"':"")+">"+c(Spaces.Common.Strings,"global_cancel").encodeHtml()+"</button>");b.append("</div></div></div>")}else{b.append('<div class="Notify" nb:importance="Med" nb:fullwidth="1" style="margin-bottom:0px;border-bottom:none">');b.append('<span class="bold">');b.append(c(d,"blogview_passportsignin").encodeHtml());b.append(" ");b.append(BlogJS_PPLogo);b.append("</span><div>");b.append(BlogJS_blogview_getonetoday);b.append("</div></div>")}return b.toString()},h=function(){var g=document.getElementById("lblName"+a),b=document.getElementById("txtName"+a),h=document.getElementById("lblURL"+a),c=document.getElementById("txtURL"+a),f=document.getElementById("txtShowContactControl"+a),d=document.getElementById("addcommentcontrol"+a),d=document.getElementById("addcommentcontrol"+a);if(b!=null&&c!=null&&f!=null&&d!=null){var e=BlogJS_AuthorName;if(ValidateNonEmptyString(e))b.value=e;else b.value=Spaces.Utility.GetString(Spaces.Blog.Strings,"profile_lc_noAbDisplayName");c.value=strVisitorUrl;if(BlogJS_CID)if(b.value!=null&&c.value!=null)if(f.checked){d.style.visibility="visible";g.style.display="none";b.parentElement.style.display="none";h.style.display="none";c.parentElement.style.display="none"}else{d.style.visibility="hidden";g.style.display="";b.parentElement.style.display="";h.style.display="";c.parentElement.style.display=""}else{if(b){b.readOnly=false;b.className=b.className.removeSpaceDelimitedString("disabledText")}if(c){c.readOnly=false;c.className=c.className.removeSpaceDelimitedString("disabledText")}txtShowContact.disabled=true;txtShowCOntact.checked=false}else{d.style.visibility="hidden";b.readOnly=true;c.readOnly=true;if(b.className.indexOf("disabledText")==-1)b.className+=" disabledText";if(c.className.indexOf("disabledText")==-1)c.className+=" disabledText"}}},m=function(){var b;b="<table>"+'<tr><td style="vertical-align:top; height:71px; width:49px;"><div id="addcommentcontrol'+a+'">'+BlogJS_AuthorCC+"</div></td>"+'<td><input action="cc" type="checkbox" name="txtShowContactControl{0}" id="txtShowContactControl{0}" checked="true" /><label for="txtShowContactControl{0}"> {1}</label></td></tr></table>';return b.format(a.toString(),Spaces.Utility.GetString(Spaces.Blog.Strings,"Photos_ShowContactPic"))},o=function(i){var e=n();e=e.replace("spacesbeid",a);b.content.innerHTML=e;b.revalidateAfterSectionOpen(b.content);var f=document.getElementById("txtComment"+a);if(f!=null)$Binding.validate(f);if(i){var c=document.getElementById("txtName"+a);if(c!=null&&c.readOnly==false)if(c.value.length==0)c.focus();else{var d=document.getElementById("txtEmail"+a);function g(){if(d!=null&&d.readOnly==false)try{d.focus()}catch(a){}}window.setTimeout(g,0)}}if(document.getElementById("txtShowContactControl"+a)!=null)h()},c=function(a){return '<div class="Notify" nb:importance="High" nb:fullwidth="true">'+a+"</div>"},q=function(){var h=document.getElementById("txtName"+a),f=document.getElementById("txtEmail"+a),j=document.getElementById("txtURL"+a),e=document.getElementById("txtComment"+a),s=document.getElementById("txtShowContactControl"+a),n=document.getElementById("commAdd"+a),t=document.getElementById("commCancel"+a),d="";if(n.disabled)return;var r=ValidateNonEmptyString(h.value);if(!r||h.value.length>c_Name)if(d.length==0)h.focus();if(!r)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_namerequired"));else if(h.value.length>c_Name)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_nametoolong"));var o=ValidateEmail(f.value);if(f.value.length>0&&!o||f.value.length>c_Email)if(d.length==0)f.focus();if(f.value.length>0&&!o)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_invalidemail"));else if(f.value.length>c_Email)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_emailtoolong"));if(j.value.length>c_Url){if(d.length==0)j.focus();d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_urltoolong"))}var k=!e.RichEdit||e.RichEdit&&e.RichEdit.HasContents();if(e.RichEdit)e.value=e.RichEdit.GetValue();var l=e.value.trim().length,g=document.createElement("div");g.innerHTML=e.value;var m=0!=g.innerText.trim().length||0!=g.getElementsByTagName("IMG").length||0!=g.getElementsByTagName("EMBED").length||0!=g.getElementsByTagName("IFRAME").length;g.innerHTML="";if(!m||l>c_Comment||!k)if(d.length==0)try{e.focus()}catch(w){}if(!m||!k)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"comments_invalidcomment").encodeHtml());else if(l>c_Comment)d+=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogjs_commenttoolong"));if(d.length>0){var q=document.getElementById("Err"+a);q.innerHTML=d;b.revalidateAfterSectionOpen(q);return}var u=document.getElementById("LastMDate"+a)!=null?true:false;n.disabled=true;t.disabled=true;Spaces.Blog.GetFppService().add_comment(a,h.value,j.value,f.value,e.value,s.checked,u,$Config.Themes.current,p,null,i,10000)};function p(e){if(!e)i();if(e.IsRestrictedByFssError){var f=document.getElementById("Err"+a);f.innerHTML=c(e.FssRestrictedAddCommentMessage);b.revalidateAfterSectionOpen(f);return}b.close();b.removeBindingsDeep(b.content);b.content.innerHTML="";if(d){d.emitComments(e.GetCommentsResult);d.show(false,false)}}function i(f,g,h,e){if(e&&e.Code&&e.Code.toLowerCase()=="itemcontainsprofanity"){var d=document.getElementById("Err"+a);d.innerHTML=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogview_containsprofanity"));b.revalidateAfterSectionOpen(d)}else{var d=document.getElementById("Err"+a);d.innerHTML=c(Spaces.Utility.GetString(Spaces.Blog.Strings,"blogview_servererror"));b.revalidateAfterSectionOpen(d)}document.getElementById("commAdd"+a).disabled=false;document.getElementById("commCancel"+a).disabled=false}};Spaces.Blog.PostComment.registerClass("Spaces.Blog.PostComment","Spaces.Blog.EntrySubContainer");Spaces.Blog.PostComment.skipClass=true;Spaces.Blog.PostComment.Params=new $Enum("cns","display","closebox","closeboxtooltip","scroll");Spaces.Blog.PostComment.Utils={doPassportAuthForComments:function(b){var a=window.location.hostname.substring(window.location.hostname.indexOf("."));document.cookie="wlru="+BlogJS_return_url+";path=/;domain="+a+";";document.location=b}};$Network.registerFpp("BlogService",function(){var f=$Network.FppProxy,a=f.__string,b=f.__primitive,d=f.__array,g=f.__custom,e=f.__enum,j=f.__date,h=f.__object,i=f.__oArray,c=new $Network.FppProxy("BlogService");c.rfc("BlogFppPaging",[a("FirstHandle"),a("LastHandle"),b("IsPrevious"),b("IsNext")]);c.rfc("GetEntriesResult",[a("Html"),g(c.BlogFppPaging,"BlogFppPaging")]);c.rfc("GetCommentsResult",[a("Html"),g(c.BlogFppPaging,"BlogFppPaging")]);c.rfc("GetTrackbacksResult",[a("Html")]);c.rfc("BlogItem",[e("BlogItemType"),a("Handle")]);c.rfc("AddCommentResult",[b("IsRestrictedByFssError"),a("FssRestrictedAddCommentMessage"),g(c.GetCommentsResult,"GetCommentsResult")]);c.rfc("PostResult",[b("IsProfanityError"),a("PostHandle"),a("CommentHandle"),a("PostTitle"),a("Alias"),a("PostPermalink"),d("Trackbacks"),b("Success"),b("WasDraft")]);c.BlogItemType=new $Flags("Entry",0,"Comment",1,"Trackback",2,"Category",3,"DiscussionPost",4,"DiscussionReply",5);c.BlogViewMode=new $Flags("Public",0,"Summary",1,"SummaryWithDelete",2,"Entry",3);c.BlogPagingDirection=new $Flags("None",0,"Forward",1,"Reverse",2);c.InviteReturnCodes=new $Flags("Success",0,"GenericError",1,"InputValidationError",2,"QuotaExceeded",3,"QuotaEmpty",4,"ABCHError_CanRetry",5,"ABCHError_NoRetry",6);c.rfc("InviteReturnData",[e("Code"),a("Detail"),a("DisplayMessage")]);c.rfc("FindOptions",[b("OpenDefaultActionsInNewWindow"),b("SortFriends"),b("MaxFriendCount"),b("IncludeTags"),b("IncludeNotes"),b("IncludeFans"),a("Theme"),b("PageSize"),b("Page"),b("CanEdit"),b("FullSize"),b("ShouldPivot"),a("FilterTag"),a("DefaultClickActionRelativeUrl")]);c.rfc("__0",[a("FUCID"),a("DisplayName"),a("EMail"),b("MembershipId"),b("IsFan"),b("IsSponsored"),a("Comments"),d("Tags"),b("SortOrder"),a("IdentityUI")]);c.rfc("__1",[a("BrowseUserId"),d("Friends"),d("Tags"),b("HRESULT"),b("TotalFriendCount"),a("OwnerName"),a("OwnerUI"),a("UserUI"),a("UserName")]);c.rfc("FriendRenderResult",[a("BrowseUserId"),d("Friends"),d("IdentityUI"),d("DisplayName")]);c.rfc("RenderData",[a("FUCID"),a("EMail"),a("DisplayName"),a("Comments"),d("Tags")]);c.rfc("RenderOptions",[a("Theme"),b("OpenDefaultActionsInNewWindow"),b("CanEdit"),b("FullSize"),b("ShouldPivot"),d("Data"),a("DefaultClickActionRelativeUrl")]);c.rfc("__2",[a("Name")]);c.rfc("__3",[a("Category"),a("Message")]);c.rfc("__4",[d("m_serverTraceCollection")]);c.FppStatus=new $Flags("SUCCESS",0,"ERR_HTTP_MISCONFIGURATION",-7,"ERR_HTTP_PARSE_FAILURE",-6,"ERR_HTTP_CONNECT_FAILURE",-5,"ERR_HTTP_TIMEOUT",-4,"ERR_SERVER_UNCAUGHT",-3,"ERR_APP_SPECIFIC",-2,"ERR_FPP_PROTOCOL",-1);c.rfc("FppError",[a("ErrorCode"),a("Message"),h("ErrorObj"),a("StackTrace")]);c.rfc("FppReturnPackage",[e("Status"),h("Value"),i("OutRefParams"),g(c.FppError,"Error"),h("ProfilingInfo")]);c.FppCommandType=new $Flags("FPP",0,"FPP_JSON",1,"FPP_RP",2,"FPP_RP_JSON",3);c.FppVersion=new $Flags("BASE",0,"ONE",1,"TWO",2,"CURRENT",2);c.rfc("FppProxySettings",[e("Version"),e("CommandType"),a("PartnerId"),a("SessionId"),a("AuthUser"),a("ServerTunnelingUrl"),b("UseClientXmlProxy"),a("CanaryToken"),b("DefaultRetry"),b("Notify"),e("DateType")]);c.FppDateType=new $Flags("Local",0,"UTC",1);c.rfm("get_comments",[a("postHandle"),a("firstItemHandle"),e("pagingDirection"),b("numItems"),e("viewMode"),b("entryIndex"),a("theme"),a("cacheToken")],"get_comments",$Network.Type.XMLGet,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("get_trackbacks",[a("postHandle"),e("viewMode"),b("entryIndex"),a("cacheToken")],"get_trackbacks",$Network.Type.XMLGet,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("delete_blog_photos",[d("photoHandles"),a("blogPostHandle")],"delete_blog_photos",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("post_blog_entry",[a("entryText"),a("title"),a("trackbacks"),b("isDraft"),a("category"),b("isNewEntry"),a("resourceId"),d("newPhotoHandles"),b("hasNewPhotos"),b("photosAreInline")],"post_blog_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("post_discussions_entry",[a("entryText"),a("title"),b("isDraft"),a("category"),b("isNewEntry"),a("resourceId")],"post_discussions_entry",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("post_discussions_reply",[a("entryText"),a("title"),b("isDraft"),b("isNewEntry"),a("postId"),a("resourceId")],"post_discussions_reply",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("update_guestbook_message",[a("messageContent"),a("messageHandle")],"update_guestbook_message",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("add_comment",[a("postHandle"),a("authorName"),a("authorUrl"),a("authorEmail"),a("commentText"),b("showContactControl"),b("lastMDate"),a("theme")],"add_comment",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("delete_items",[d("blogItems")],"delete_items",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.rfm("update_blog_photos",[a("postHandle"),b("wasDraft"),d("newPhotoHandles")],"update_blog_photos",$Network.Type.XMLPost,null,"Microsoft.Spaces.Web.Parts.BlogPart.FireAnt.BlogService");c.seal();return c})