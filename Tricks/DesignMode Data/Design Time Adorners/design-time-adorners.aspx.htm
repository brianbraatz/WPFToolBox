<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>See Win App : Design Time Adorners</title>
 




<meta name="description" content="I've posted about design time adorners a few times in the past however there have been some API changes since then so I thought I'd do a fresh post. What are design time adorners ? Adorners are WPF elements that you can put on the Cider design surface">
<meta name="GENERATOR" content="CommunityServer 2.1 SP1 (Build: 61025.2)">
<link rel="pingback" href="http://blogs.msdn.com/jnak/pingback.aspx">
<link rel="stylesheet" href="design-time-adorners.aspx_files/style.css" type="text/css" media="screen">
<link rel="stylesheet" href="design-time-adorners.aspx_files/print.htm" type="text/css" media="print">
<link rel="stylesheet" href="design-time-adorners.aspx_files/sidebar_left_wide.css" type="text/css" media="screen">
<link rel="stylesheet" href="design-time-adorners.aspx_files/customcss.css" type="text/css" media="screen">
<link rel="shortcut icon" type="image/ico" href="http://blogs.msdn.com/favicon.ico">
<link rel="alternate" type="application/rss+xml" title="See Win App (RSS 2.0)" href="http://blogs.msdn.com/jnak/rss.xml">
<link rel="alternate" type="application/atom+xml" title="See Win App (Atom 1.0)" href="http://blogs.msdn.com/jnak/atom.xml">
<link rel="alternate" type="application/rss+xml" title="Design Time Adorners Comment RSS (RSS 2.0)" href="http://blogs.msdn.com/jnak/commentrss.aspx?PostID=5002873">

	<script src="design-time-adorners.aspx_files/global.js" type="text/javascript"></script>
<style>
.DoNotDisplay { display: none; }
</style></head><body>
<form name="aspnetForm" method="post" action="/jnak/archive/2007/09/19/design-time-adorners.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm">
<div>
<input name="__EVENTTARGET" id="__EVENTTARGET" value="" type="hidden">
<input name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" type="hidden">
<input name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTMyNjg0MDc1MWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFI2N0bDAwJF8kY3RsMDAkXyRicyRfJHdzJF8kU2VhcmNoQm94rkRXbV1z5ohWybmugg6l5bfTy3M=" type="hidden">
</div>

<script type="text/javascript">
<!--
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
// -->
</script>


<script src="design-time-adorners.aspx_files/WebResource_002.js" type="text/javascript"></script>

<script language="javascript" type="text/javascript" src="design-time-adorners.aspx_files/Telligent_Modal.js"></script><script language="javascript" type="text/javascript">
// <![CDATA[
Telligent_Modal.Configure('/utility/loading.htm',['Modal'],['ModalTitle'],['ModalClose'],['ModalContent'],['ModalFooter'],['ModalResize'],['ModalMask'],100);
// ]]>
</script><script language="javascript" type="text/javascript">
var RatingControlAJAX = {
"SaveRating":function(id,p0,cb){return Ajax_CallBack('CommunityServer.Blogs.Controls.BlogRatePost',id,'SaveRating',[p0],cb,0,0,0,1);}};
</script><script language="javascript" type="text/javascript">
var ThreadSubscribeLinkButton = {
"ToggleEmailReplies":function(id,p0,cb){return Ajax_CallBack('CommunityServer.Controls.ThreadSubscribeLinkButton',id,'ToggleEmailReplies',[p0],cb,0,0,0,0);}};
</script><script type="text/javascript" src="design-time-adorners.aspx_files/ratingcontrol.js"></script><script language="JavaScript" type="text/javascript">var ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = false;var ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = false;function updateSubscriptionText() {if(ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus == true) {document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Stop sending me email alerts for this post';} else {document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Send me email alerts for new comments to this post';}}function toggleSubscription() {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = true;document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Updating email notifications...';ThreadSubscribeLinkButton.ToggleEmailReplies('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton',536208, toggleSubscriptionCallback);}function toggleSubscriptionCallback(response) {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = false;if((response.error == null) && (response.value == true)) {if(ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus == true) {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = false;} else {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = true;}updateSubscriptionText();} else {updateSubscriptionText();alert('An error happened while processing your request.  Please notify an administrator and try again later.');}}</script>
<script src="design-time-adorners.aspx_files/WebResource.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
// -->
</script>

			
<div id="masthead">
	
		<div id="welcome" align="right">
			
					Signed in as <a href="http://blogs.msdn.com/user/EditProfile.aspx?ReturnUrl=/blogs/post.aspx?App=jnak&amp;y=2007&amp;m=09&amp;d=19&amp;PostName=design-time-adorners">bbraatz</a>
 | <a id="ctl00___ctl00___duw1_rc1___logout" href="http://blogs.msdn.com/logout.aspx">Sign out</a>



				
			 | 
			<a id="ctl00___ctl00___duw1_Faq1" href="http://blogs.msdn.com/languages/en-US/docs/faq.aspx">Help</a>
		</div>
	
</div>
<div id="wrapper"><div id="container">
	<div id="header">
		
<div id="title">
	<h1><a id="ctl00___ctl00___bt___BlogTitle" class="headermaintitle" href="http://blogs.msdn.com/jnak/default.aspx">See Win App</a></h1>
	<p id="tagline">The Cider Chronicles</p>
</div>
<div id="SubscriptionsSideBar">
	
<div id="subscriptions">
<ul>
	<li><a id="ctl00___ctl00___bt___s___rss" href="http://blogs.msdn.com/jnak/rss.xml">RSS 2.0</a></li>
	<li><a id="ctl00___ctl00___bt___s___atom" href="http://blogs.msdn.com/jnak/atom.xml">Atom 1.0</a></li>
	<li><a id="ctl00___ctl00___bt___s___email" href="http://blogs.msdn.com/jnak/emailsubscriptions.aspx">Email alerts</a></li>
</ul>
</div>
 
 
</div>
<div id="nav">
	<ul>
	<li><a id="ctl00___ctl00___bt___home" href="http://blogs.msdn.com/jnak/default.aspx">Home</a></li>
	
	<li><a id="ctl00___ctl00___bt___Contactlink1" href="http://blogs.msdn.com/jnak/contact.aspx">Email</a></li>
	</ul>
</div>
	</div>
	<div id="contentwrapper">
		<div id="sidebar-a">
			
<div id="TasksSideBar">
	
</div>

<div id="SearchSideBar">
	
<div id="search">
	<h3>Search</h3>
	<input name="ctl00$_$ctl00$_$bs$_$ws$_$SearchBox" id="ctl00___ctl00___bs___ws___SearchBox" class="searchBox" onkeydown="KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event);" type="text">
	<a id="ctl00___ctl00___bs___ws___SearchButton" href="javascript:__doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')">Go</a>
</div><br>
</div>

<div id="TagSideBar">
	<h3>Tags</h3>
	<ul>
	<ul class="SidebarTagCloud">
<li class="Tag3"><a href="http://blogs.msdn.com/jnak/archive/tags/Chit-chat/default.aspx" rel="tag">Chit-chat</a></li>
<li class="Tag1"><a href="http://blogs.msdn.com/jnak/archive/tags/Cider/default.aspx" rel="tag">Cider</a></li>
<li class="Tag5"><a href="http://blogs.msdn.com/jnak/archive/tags/Software/default.aspx" rel="tag">Software</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/jnak/archive/tags/TechEd/default.aspx" rel="tag">TechEd</a></li>
<li class="Tag4"><a href="http://blogs.msdn.com/jnak/archive/tags/Visual+Studio+2008/default.aspx" rel="tag">Visual Studio 2008</a></li>
<li class="Tag2"><a href="http://blogs.msdn.com/jnak/archive/tags/WPF/default.aspx" rel="tag">WPF</a></li>
</ul>

	</ul>
</div>

<div id="NewsSideBar">
	
</div>

<div id="ArchiveSideBar">
	

<h3>Archives</h3>
<ul>

	<li><a href="http://blogs.msdn.com/jnak/archive/2007/10.aspx">October 2007 (5)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2007/09.aspx">September 2007 (4)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2007/08.aspx">August 2007 (6)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2007/06.aspx">June 2007 (1)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/12.aspx">December 2006 (1)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/11.aspx">November 2006 (1)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/10.aspx">October 2006 (1)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/08.aspx">August 2006 (2)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/07.aspx">July 2006 (3)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/06.aspx">June 2006 (4)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/05.aspx">May 2006 (4)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/04.aspx">April 2006 (4)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/03.aspx">March 2006 (10)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/02.aspx">February 2006 (5)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2006/01.aspx">January 2006 (4)</a></li>

	<li><a href="http://blogs.msdn.com/jnak/archive/2005/12.aspx">December 2005 (7)</a></li>

</ul>

</div>

<div id="LinkSideBar">
	
    <h3>Blog Roll</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl01_Link" href="http://www.joelonsoftware.com/">Joel on Software</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl02_Link" href="http://www.charlespetzold.com/blog/blog.xml">Charles Petzold</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl03_Link" href="http://martinfowler.com/bliki/">Martin Fowler</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl04_Link" href="http://blogs.msdn.com/fyuan/">Feng Yuan</a></li>
    </ul>

    <h3>Cider Bloggers</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl01_Link" rel="co-worker" href="http://blogs.msdn.com/jfoscoding">Jessica Fosler's jfo's coding</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl02_Link" rel="co-worker" href="http://blogs.msdn.com/subhagpo/">Subhag Oak</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl03_Link" rel="co-worker" href="http://www.urbanpotato.net/">Brian Pepin</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl04_Link" rel="co-worker" href="http://www.removingalldoubt.com/">Removing all Doubt - Chuck Jazdzewski</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl05_Link" rel="co-worker" href="http://myfun.spaces.live.com/blog/">Richard Bailey</a></li>
    </ul>

    <h3>Cider Links</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl01_Link" href="http://forums.microsoft.com/MSDN/ShowForum.aspx?ForumID=169&amp;SiteID=1">MSDN Forum</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl02_Link" href="http://channel9.msdn.com/wiki/default.aspx/Cider.HomePage">Channel9 Wiki</a></li>
    </ul>

    <h3>Other Microsoft Blogs</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl01_Link" href="http://blogs.msdn.com/OldNewThing">Raymond Chen's The Old New Thing</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl02_Link" href="http://blogs.msdn.com/ericgu">Eric Gunnerson's C# Compendium</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl03_Link" href="http://scobleizer.wordpress.com/">Scobleizer</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl04_Link" href="http://pluralsight.com/blogs/dbox">Don Box's Spoutlet</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl05_Link" href="http://www.sellsbrothers.com/">Marquee de Sells</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl06_Link" href="http://blogs.msdn.com/ricom/default.aspx">Rico Mariani's Performance Tidbits</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl07_Link" href="http://shawnburke.com/default.aspx?document=1">Shawn Burke</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl08_Link" href="http://blogs.msdn.com/jgalasyn/default.aspx">Jim Galasyn (Client/Web UE)</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl09_Link" href="http://blogs.msdn.com/dphill/default.aspx">David Hill (Smart Client)</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl10_Link" href="http://spaces.msn.com/manodesign/">Manuel Clement (Windows UX)</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl11_Link" href="http://blogs.msdn.com/brada/default.aspx">Brad Abrams (UIFx)</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl12_Link" href="http://blogs.msdn.com/mhendersblog/default.aspx">Mike Henderlight (WPF/WinForms interop)</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl03_Links_ctl13_Link" href="http://blogs.msdn.com/benwu/">Benjamin Wulfe (WinForms)</a></li>
    </ul>

    <h3>WPF/E</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl04_Links_ctl01_Link" href="http://blogs.msdn.com/mharsh/default.aspx">Mike Harsh</a></li>
    
        <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl04_Links_ctl02_Link" href="http://blogs.msdn.com/jstegman/">Joe Stegman</a></li>
    </ul>


</div></div>
		<div id="content"><div id="content2">
			
			




<div class="post">
	<div class="posthead">
		Wednesday, September 19, 2007 6:08 PM
		<a id="ctl00___ctl00___ctl01___Entry___AuthorLink" href="http://blogs.msdn.com/user/Profile.aspx?UserID=15272">jnak</a> 
		<h2>Design Time Adorners <span class="ratemenu" id="ctl00___ctl00___ctl01___Entry___Ratings" title="Not yet rated"><img title="Poor" src="design-time-adorners.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Poor" src="design-time-adorners.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Fair" src="design-time-adorners.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Fair" src="design-time-adorners.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Average" src="design-time-adorners.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Average" src="design-time-adorners.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Good" src="design-time-adorners.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Good" src="design-time-adorners.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Excellent" src="design-time-adorners.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Excellent" src="design-time-adorners.aspx_files/star-right-off.gif" align="absmiddle" border="0"></span><input value="0" id="ctl00___ctl00___ctl01___Entry___Ratings_Value" type="hidden"></h2>
	</div>
	<div class="postcontent">
		<p>I've
posted about design time adorners a few times in the past however there
have been some API changes since then so I thought I'd do a fresh post.</p>
<p><strong>What are design time adorners</strong>?</p>
<p>Adorners are WPF elements that you can put on the Cider design
surface when your custom control is instantiated and selected.&nbsp;
The end user who is using Cider can interact with your adorners to make
updates to the XAML. </p>
<p>For example, the selection handles, grid lines and rails when a Grid
is selected are put on the design surface through the same adorner
infrastructure I am describing in this post.</p>
<p><strong>Create an AdornerProvider</strong></p>
<p>The first step is to create an AdornerProvider that will add your
adorners when your control is selected.&nbsp; You will associate this
AdornerProvider to your control using the Metadata Store as described
in <a class="" href="http://blogs.msdn.com/jnak/archive/2007/08/10/adding-design-time-metadata-to-cider-and-blend.aspx" mce_href="http://blogs.msdn.com/jnak/archive/2007/08/10/adding-design-time-metadata-to-cider-and-blend.aspx">this post</a> and <a class="" href="http://blogs.msdn.com/jnak/archive/2007/08/14/how-are-metadata-assemblies-found.aspx" mce_href="http://blogs.msdn.com/jnak/archive/2007/08/14/how-are-metadata-assemblies-found.aspx">this post</a>.</p>
<p>public class MyCustomAdornerProvider : PrimarySelectionAdornerProvider { <br>Public MyCustomAdornerProvider () {<br>&nbsp;&nbsp;&nbsp; Button buttonAdorner = new Button();<br>&nbsp;&nbsp;&nbsp; buttonAdorner.Background = Brushes.Red;<br>&nbsp;&nbsp;&nbsp; AdornerPanel panel = new AdornerPanel();<br>&nbsp;&nbsp;&nbsp; panel.Children.Add(buttonAdorner);<br>&nbsp;&nbsp;&nbsp; Adorners.Add(panel);<br>} (...) }</p>
<p>The key things to point out here are:</p>
<ul>
<li>MyCustomAdornerProvider derives from
PrimarySelectionAdornderProvider.&nbsp; This means the adorners will
light up when the control MyCustomAdornerProvder is applied to is
selected.</li>
<li>Adorners are added to the surface by adding them to the&nbsp;Adorners property from the base class</li>
<li>An AdornerPanel is provides a lot of size/positioning help.&nbsp;
You don't strictly need it, an adorner added directly to the Adorners
collection will show up in the upper left hand corner of the control it
is associated with.&nbsp;</li></ul>
<p><strong>Add UIElements (the Adorners) to an AdornerPanel</strong></p>
<p>Setup the AdornerPlacementCollection with Position and Size Methods that are additive (take a factor + offset):</p>
<ul>
<li>PositionRelativeToAdorner[Height/Width]</li>
<li>PositionRelationToContent[Height/Width]</li>
<li>SizeRelativeToAdornerDesired[Height/Width]</li>
<li>SizeRelativeToContent[Height/Width]</li></ul>
<p>In this API, "Content"&nbsp;refers to the control being adorned as its layed out on the design surface at 1X zoom.</p>
<p>For example, to setup a button that will be above and to the left of
the associated control when it is selected, you would do the
following:&nbsp;</p>
<p>AdornerPlacementCollection placement = new AdornerPlacementCollection();<br>placement.SizeRelativeToAdornerDesiredHeight(1.0, 0);<br>placement.SizeRelativeToAdornerDesiredWidth(1.0, 0);<br>placement.PositionRelativeToAdornerHeight(-1, -NudgeAmount);<br>placement.PositionRelativeToAdornerWidth(-1, -NudgeAmount);<br>AdornerPanel.SetPlacements(adorner, placement);</p>
<p>To control how your adorners will act when zooming in and out, you can set the stretch properties on the AdornerPanel:</p>
<p>AdornerPanel.Set[Vertical/Horizontal]Stretch</p>
<p><strong>Handle the interaction with your Adorners (handle events or setup tasks)</strong></p>
<p>For a lot of adorners that you will put on the design surface,
handling the interaction is as simple as handling the events on the
adorner itself.&nbsp; For example:</p>
<p mce_keep="true">BouncyButton adorner = new BouncyButton();<br>adorner.Click += new RoutedEventHandler(OnButtonClick);</p>
<p mce_keep="true">And in OnButtonClick() you can make changes to the
XAML by working through the Editing Object Model.&nbsp; The following
sample code shows how to get the ModelItem for a given adorner and
modify one of its properties through the ModelProperty class.</p>
<p mce_keep="true">ModelItem adornedElementModelItem = AdornerProperties.GetModel(_ColorsListControl);<br>adornedElementModelItem.Properties[Control.BackgroundProperty].SetValue(new SolidColorBrush(_ColorsListControl.SelectedColor));</p>
<p>Hook up your AdornerProvider to the control via the FeatureAttribute and MetadataStore<br></p>
<p mce_keep="true">The other thing you can do is use Tasks.&nbsp; A
Task associates a collection of input gestures that are bound to
commands and the handlers for those commands.&nbsp; Cider defines a set
of ToolGestures that you can use as input gestures and thus handle --
in other words you can handle a click gesture on a Rectangle even
though the Rectangle doesn't have a Click event.</p>
<p mce_keep="true">Task clickTask = new Task();<br>clickTask.ToolCommandBindings.Add(new ToolCommandBinding(_ClickCommand, OnRectangleClick));<br>clickTask.InputBindings.Add(new InputBinding(_ClickCommand, new ToolGesture(ToolAction.Click)));<br>AdornerPanel.SetTask(adorner, clickTask);</p>
<p mce_keep="true">And as before, in OnRectangleClick() you can use the
Editing Model (ModelItem, ModelProperty) to update the XAML from your
adorner.</p>
<p mce_keep="true"><strong>Setup the Metadata</strong></p>
<p mce_keep="true">Finally, in your Metadata Assembly, you will set up
the metadata to associate your AdornerProvider to the control you want
it to show up for:</p>
<p mce_keep="true">builder.AddCustomAttributes(typeof(ButtonWithDesignTime), new FeatureAttribute(typeof(PopupButtonAdornerProvider)));</p>
<p mce_keep="true"><strong>Finally</strong></p>
<p mce_keep="true">I've attached a sample to this blog post that shows all of the concepts above and will work on beta 2 and RTM.</p>
	</div>
	<div><span id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel"></span><input name="ctl00$_$ctl00$_$ctl01$_$Entry$_$InlineTagEditorPanel" id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel_State" value="nochange" type="hidden"></div>
	
	
<br>
<b>Attachment(s): </b><a id="ctl00___ctl00___ctl01___Entry___Attachment___DownLoadLink" href="http://blogs.msdn.com/jnak/attachment/5002873.ashx">DesignTimeAdornerSample.zip</a>	
</div>

<div class="postfoot">
	
<div id="postToolbar">
<h2 class="CommonSubTitle">Comment Notification</h2>
<p>
	
	<a href="javascript:toggleSubscription();" id="ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton" trackingresourcename="Weblogs_UnTrack" nottrackingresourcename="Weblogs_Track" workingresourcename="Weblogs_TrackWorking">Send me email alerts for new comments to this post</a>
</p>
<p>
	Subscribe to this post's comments using
	<a id="ctl00___ctl00___ctl01___DetailedSubBar___CommentRssLink" href="http://blogs.msdn.com/jnak/commentrss.aspx?PostID=5002873">RSS</a>
</p>
</div>

</div>

	<div id="comments">
	<h3>
	Comments
</h3>

	<div class="comment">
	<h4>
		<a id="ctl00___ctl00___ctl01___Comments___Comments_ctl01_PermaLink" title="permalink" href="http://blogs.msdn.com/jnak/archive/2007/09/19/design-time-adorners.aspx#5004609">#</a>
		MSDN Blog Postings  &amp;raquo; Design Time Adorners<a name="5004609"></a>
	</h4>
	<div class="commentssubhead">
		<span class="commentspan"></span>
		Wednesday, September 19, 2007 10:42 PM 
			by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl01_NameLink" rel="nofollow" title="TrackBack" href="http://msdnrss.thecoderblogs.com/2007/09/19/design-time-adorners/" target="_blank">MSDN Blog Postings  » Design Time Adorners</a>
	</div>
	<div class="commentsbody">
		<p>PingBack from <a rel="nofollow" target="_new" href="http://msdnrss.thecoderblogs.com/2007/09/19/design-time-adorners/">http://msdnrss.thecoderblogs.com/2007/09/19/design-time-adorners/</a></p>
	</div>
	</div>

	<div class="comment">
	<h4>
		<a id="ctl00___ctl00___ctl01___Comments___Comments_ctl02_PermaLink" title="permalink" href="http://blogs.msdn.com/jnak/archive/2007/09/19/design-time-adorners.aspx#5020896">#</a>
		Using a Design Time Adorner to Setup Bindings Between Controls<a name="5020896"></a>
	</h4>
	<div class="commentssubhead">
		<span class="commentspan"></span>
		Thursday, September 20, 2007 7:15 PM 
			by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl02_NameLink" rel="nofollow" title="TrackBack" href="http://blogs.msdn.com/jnak/archive/2007/09/20/using-a-design-time-adorner-to-setup-bindings-between-controls.aspx" target="_blank">See Win App</a>
	</div>
	<div class="commentsbody">
		<p>Recently I wrote a post about writing Design Time Adorners . I had a good question come up on our Cider</p>

	</div>
	</div>

	</div>





<div id="commentform">
<h3>Leave a Comment</h3>
<dl>
	
	<dt><label for="ctl00___ctl00___ctl01___form___tbUrl">Your URL</label> <em>(optional</em>)</dt>
	<dd><input name="ctl00$_$ctl00$_$ctl01$_$form$_$tbUrl" id="ctl00___ctl00___ctl01___form___tbUrl" class="smallbox" type="text"></dd>
	<dt><label for="ctl00___ctl00___ctl01___form___tbComment">Comments</label> <em>(required)</em><span id="ctl00___ctl00___ctl01___form___Requiredfieldvalidator3" style="color: Red; visibility: hidden;">*</span></dt>
	<dd><textarea name="ctl00$_$ctl00$_$ctl01$_$form$_$tbComment" rows="5" cols="25" id="ctl00___ctl00___ctl01___form___tbComment"></textarea></dd>
	<dt></dt>
	<dt><input name="ctl00$_$ctl00$_$ctl01$_$form$_$btnSubmit" value="Submit" onclick='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$_$ctl00$_$ctl01$_$form$_$btnSubmit", "", true, "", "", false, false))' id="ctl00___ctl00___ctl01___form___btnSubmit" type="submit"></dt>
</dl>
</div>



   
    
		</div></div>
		<div id="contentfooter">&nbsp;</div>
	</div>

	<div id="footer"></div></div>
</div>

<script type="text/javascript">
<!--
var Page_Validators =  new Array(document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator3"));
// -->
</script>

<script type="text/javascript">
<!--
var ctl00___ctl00___ctl01___form___Requiredfieldvalidator3 = document.all ? document.all["ctl00___ctl00___ctl01___form___Requiredfieldvalidator3"] : document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator3");
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.controltovalidate = "ctl00___ctl00___ctl01___form___tbComment";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.errormessage = "*";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.initialvalue = "";
// -->
</script>

<script language="javascript" type="text/javascript">
<!--
function KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event)
{
	if (event.keyCode == 13)
	{
		event.returnValue = false;
		event.cancel = true;
     __doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')	}
}

//-->
</script>
<script language="javascript">var ctl00___ctl00___ctl01___Entry___Ratings=new RateControl('ctl00___ctl00___ctl01___Entry___Ratings','ctl00___ctl00___ctl01___Entry___Ratings','ctl00___ctl00___ctl01___Entry___Ratings_Value', 5, '/Themes/default/images/common/', false, 'ratemenu','CommonRateControlActive','ratemenu',['Terrible','Poor','Fair','Average','Good','Excellent'],false,true);</script>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://blogs.msdn.com/jnak/archive/2007/09/19/design-time-adorners.aspx"
dc:identifier="http://blogs.msdn.com/jnak/archive/2007/09/19/design-time-adorners.aspx"
dc:title="Design Time Adorners"
trackback:ping="http://blogs.msdn.com/jnak/trackback.aspx?PostID=5002873" />
</rdf:RDF>
-->

<script type="text/javascript">
<!--
var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
// -->
</script>
        </form>
</body></html>