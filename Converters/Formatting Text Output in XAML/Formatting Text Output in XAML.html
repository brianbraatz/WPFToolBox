<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Petzold Book Blog - Formatting Text Output in XAML</title></head><body style="text-align: center;">
    <div style="width: 40em; text-align: left;"><p style="text-align: center;"><b><font size="+4">P</font><font size="+3">ETZOLD</font>&nbsp;<font size="+4">B</font><font size="+3">OOK</font>&nbsp;<font size="+4">B</font><font size="+3">LOG</font></b></p><h4 style="text-align: center;">Charles Petzold on writing books, reading books, and exercising the internal <a title="Universal Turing Machine">UTM</a></h4><hr><table width="100%"><tbody><tr><td width="33%"></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/blog/blog.xml">Recent Entries</a></td><td width="33%"></td></tr><tr><td width="33%"><a href="http://www.charlespetzold.com/blog/2006/03/280834.html">&lt; Previous</a></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/blog/toc.html">Browse the Archives</a></td><td align="right" width="33%"><a href="http://www.charlespetzold.com/blog/2006/04/010000.html">Next &gt;</a></td></tr><tr><td width="33%"></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/rss.xml">Subscribe to the RSS Feed</a></td><td width="33%"></td></tr></tbody></table><hr><a href="http://www.charlespetzold.com/blog/2006/03/310910.html" style="color: rgb(0, 0, 128); text-decoration: none;"><h2>Formatting Text Output in XAML</h2></a><p style="text-align: right;">March 31, 2006<br>New York City</p><p>
I've recently discussed how to use XAML to 
<a href="http://www.charlespetzold.com/blog/2006/03/180953.html">display static properties interspersed with text</a> (in this case static properties of the <i>System.Environment</i> class), and also how to 
<a href="http://www.charlespetzold.com/blog/2006/03/200923.html">use .NET text-formatting strings in XAML</a> for single items, specifically <i>DateTime</i> objects.
</p>
<p>
It's also possible — with a little help from C# code, of course — to
embed a formatting string into XAML to display multiple formatted
objects. This is done through a <i>MultiBinding</i>, which is a binding commonly used to consolidate multiple binding sources into one target. (The <i>MultiBinding</i> documentation suggests that it be used to meld red, green, and blue values into a <i>Color</i> object, and 
<a href="http://www.charlespetzold.com/wpf">my book</a> will have an example of that.) A <i>MultiBinding</i> requires a class that implements the <i>IMultiValueConverter</i> interface. The <i>Convert</i>
method in this class gets an array of objects (these are the binding
sources) and an optional parameter that the method obtains through the <i>ConvertParameter</i> attribute in the <i>MultiBinding</i> element.
</p>
<p>
The <a href="http://www.charlespetzold.com/blog/2006/03/FormattedMultiTextConverter.cs">FormattedMultiTextConverter.cs</a> file contains a class that implements the <i>IMultiValueConverter</i> interface with a trivial <i>Convert</i> method that assumes the <i>ConvertParameter</i> to be a .NET formatting string, and passes both that and the array of binding source objects to <i>String.Format</i>.
</p>
<p>
The <a href="http://www.charlespetzold.com/blog/2006/03/EnvironmentInfo2Window.xaml">EnvironmentInfo2Window.xaml</a> file uses that conversion class to display static properties of the <i>Environment</i> class:
</p>
<ul style="font-family: monospace; font-weight: bold;">
&lt;!--&nbsp;=========================================================<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EnvironmentInfo2Window.xaml&nbsp;(c)&nbsp;2006&nbsp;by&nbsp;Charles&nbsp;Petzold<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=========================================================&nbsp;--&gt;<br>&lt;Window&nbsp;xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:s="clr-namespace:System;assembly=mscorlib"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:src="clr-namespace:Petzold.EnvironmentInfo2"&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Title="Environment&nbsp;Info"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;Window.Resources&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;src:FormattedMultiTextConverter&nbsp;x:Key="conv"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Window.Resources&gt;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;TextBlock&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;TextBlock.Text&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;MultiBinding&nbsp;Converter="{StaticResource&nbsp;conv}"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConverterParameter=<br>"Operating&nbsp;System&nbsp;Version:&nbsp;{0}<br>&amp;#x000A;.NET&nbsp;Version:&nbsp;{1}<br>&amp;#x000A;Machine&nbsp;Name:&nbsp;{2}<br>&amp;#x000A;User&nbsp;Name:&nbsp;{3}<br>&amp;#x000A;User&nbsp;Domain&nbsp;Name:&nbsp;{4}<br>&amp;#x000A;System&nbsp;Directory:&nbsp;{5}<br>&amp;#x000A;Current&nbsp;Directory:&nbsp;{6}<br>&amp;#x000A;Command&nbsp;Line:&nbsp;{7}"&nbsp;&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.OSVersion}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.Version}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.MachineName}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.UserName}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.UserDomainName}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.SystemDirectory}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.CurrentDirectory}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Binding&nbsp;Source="{x:Static&nbsp;s:Environment.CommandLine}"&nbsp;/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/MultiBinding&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/TextBlock.Text&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/TextBlock&gt;<br>&lt;/Window&gt;<br>
</ul>
<p>
Notice that the formatting string is broken into multiple lines and
left aligned to avoid a lot of unwanted white space. Notice also that I
broke the second and later lines so they begin with line feed
characters, again to avoid unwanted white space.
</p>
<p>
The <a href="http://www.charlespetzold.com/blog/2006/03/EnvironmentInfo2App.xaml">EnvironmentInfo2App.xaml</a> file and 
<a href="http://www.charlespetzold.com/blog/2006/03/EnvironmentInfo2.csproj">EnvironmentInfo2.csproj</a> projects file are necessary to compile the program in Visual Studio.
</p>

<div id="comments"><hr><table width="100%"><tbody><tr><td width="33%"></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/blog/blog.xml">Recent Entries</a></td><td width="33%"></td></tr><tr><td width="33%"><a href="http://www.charlespetzold.com/blog/2006/03/280834.html">&lt; Previous</a></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/blog/toc.html">Browse the Archives</a></td><td align="right" width="33%"><a href="http://www.charlespetzold.com/blog/2006/04/010000.html">Next &gt;</a></td></tr><tr><td width="33%"></td><td align="center" width="33%"><a href="http://www.charlespetzold.com/rss.xml">Subscribe to the RSS Feed</a></td><td width="33%"></td></tr></tbody></table><hr><p>(c) Copyright Charles Petzold<br><a href="http://www.charlespetzold.com/">www.charlespetzold.com</a></p></div>
<a href="http://www.charlespetzold.com/">  </a></div></body></html>