<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>Okoboji: a lake, a mythical university, Kevin Moore's blog : On ItemTemplate, ContentTemplate, DataTemplate</title>
 




<meta name="description" content="A recent forum post asked how one could build out ItemsControl-like functionality in a custom control. Let me start from the basics. ContentPresenter presents content. If you give it a UIElement (Grid, Button, Border) it will just display it. Easy enough.">
<meta name="GENERATOR" content="CommunityServer 2.1 SP1 (Build: 61025.2)">
<link rel="pingback" href="http://blogs.msdn.com/okoboji/pingback.aspx">
<link rel="stylesheet" href="on-itemtemplate-contenttemplate-datatemplate.aspx_files/style.css" type="text/css" media="screen">
<link rel="stylesheet" href="on-itemtemplate-contenttemplate-datatemplate.aspx_files/print.css" type="text/css" media="print">
<link rel="stylesheet" href="on-itemtemplate-contenttemplate-datatemplate.aspx_files/ms.css" type="text/css" media="screen">
<link rel="shortcut icon" type="image/ico" href="http://blogs.msdn.com/favicon.ico">
<link rel="alternate" type="application/rss+xml" title="Okoboji: a lake, a mythical university, Kevin Moore's blog (RSS 2.0)" href="http://blogs.msdn.com/okoboji/rss.xml">
<link rel="alternate" type="application/atom+xml" title="Okoboji: a lake, a mythical university, Kevin Moore's blog (Atom 1.0)" href="http://blogs.msdn.com/okoboji/atom.xml">
<link rel="alternate" type="application/rss+xml" title="On ItemTemplate, ContentTemplate, DataTemplate Comment RSS (RSS 2.0)" href="http://blogs.msdn.com/okoboji/commentrss.aspx?PostID=1667371">

	<script src="on-itemtemplate-contenttemplate-datatemplate.aspx_files/global.js" type="text/javascript"></script></head><body>
<form name="aspnetForm" method="post" action="/okoboji/archive/2007/02/12/on-itemtemplate-contenttemplate-datatemplate.aspx" id="aspnetForm">
<div>
<input name="__EVENTTARGET" id="__EVENTTARGET" value="" type="hidden">
<input name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" type="hidden">
<input name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTMyNjg0MDc1MWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFI2N0bDAwJF8kY3RsMDAkXyRicyRfJHdzJF8kU2VhcmNoQm94rkRXbV1z5ohWybmugg6l5bfTy3M=" type="hidden">
</div>

<script type="text/javascript">
<!--
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
// -->
</script>


<script language="javascript" type="text/javascript" src="on-itemtemplate-contenttemplate-datatemplate.aspx_files/Telligent_Modal.js"></script><script language="javascript" type="text/javascript">
// <![CDATA[
Telligent_Modal.Configure('/utility/loading.htm',['Modal'],['ModalTitle'],['ModalClose'],['ModalContent'],['ModalFooter'],['ModalResize'],['ModalMask'],100);
// ]]>
</script>
			
<div id="masthead">
	
		<div id="welcome" align="right">
			
					Welcome to MSDN Blogs
<a id="ctl00___ctl00___duw1_ac1___Login" href="http://blogs.msdn.com/login.aspx?ReturnUrl=%2fokoboji%2farchive%2f2007%2f02%2f12%2fon-itemtemplate-contenttemplate-datatemplate.aspx">Sign in</a> | <a id="ctl00___ctl00___duw1_ac1___Register" href="http://blogs.msdn.com/user/CreateUser.aspx?ReturnUrl=/okoboji/archive/2007/02/12/on-itemtemplate-contenttemplate-datatemplate.aspx">Join</a>



				
			 | 
			<a id="ctl00___ctl00___duw1_Faq1" href="http://blogs.msdn.com/languages/en-US/docs/faq.aspx">Help</a>
		</div>
	
</div>
<div id="wrapper">
	<div id="container">
		<div id="header">
			
<div id="title">
<h1><a id="ctl00___ctl00___bth___BlogTitle" class="headermaintitle" href="http://blogs.msdn.com/okoboji/default.aspx">Okoboji: a lake, a mythical university, Kevin Moore's blog</a></h1></div>
<p>Kevin Moore, Program Manager, Windows Presentation Foundation (WPF), WinFX</p>

		</div>
		<div id="contentwrapper">
			<div id="sidebar-a">
				
<div id="BlogLinksSideBar">
	
<div id="WeblogLinks">
<h3>This Blog</h3>
<ul>
    
	
	<li><a id="ctl00___ctl00___bs___wl___Contactlink1" href="http://blogs.msdn.com/okoboji/contact.aspx">Email</a></li>
</ul>
</div>
</div>

<div id="TasksSideBar">
	
</div>

<div id="SubscriptionsSideBar">
	
<div id="Subscriptions">
 <h3>Syndication</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___bs___rss" href="http://blogs.msdn.com/okoboji/rss.xml">RSS 2.0</a></li>
        <li><a id="ctl00___ctl00___bs___bs___atom" href="http://blogs.msdn.com/okoboji/atom.xml">Atom 1.0</a></li>
    </ul>
 </div>
</div>

<div id="SearchSideBar">
	
	
<div id="Search">
<h3>Search</h3>
<ul><li>
<input name="ctl00$_$ctl00$_$bs$_$ws$_$SearchBox" id="ctl00___ctl00___bs___ws___SearchBox" class="searchBox" onkeydown="KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event);" type="text"> <a id="ctl00___ctl00___bs___ws___SearchButton" href="javascript:__doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')">Go</a>
</li></ul>
</div>
	
</div>

<div id="TagSideBar">
	<h3>Tags</h3>
	<ul>
	<ul class="SidebarTagCloud">
<li class="Tag2"><a href="http://blogs.msdn.com/okoboji/archive/tags/Avalon/default.aspx" rel="tag">Avalon</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/okoboji/archive/tags/Internet/default.aspx" rel="tag">Internet</a></li>
<li class="Tag4"><a href="http://blogs.msdn.com/okoboji/archive/tags/Longhorn/default.aspx" rel="tag">Longhorn</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/okoboji/archive/tags/OSS/default.aspx" rel="tag">OSS</a></li>
<li class="Tag5"><a href="http://blogs.msdn.com/okoboji/archive/tags/PDC05/default.aspx" rel="tag">PDC05</a></li>
<li class="Tag1"><a href="http://blogs.msdn.com/okoboji/archive/tags/Programming/default.aspx" rel="tag">Programming</a></li>
<li class="Tag3"><a href="http://blogs.msdn.com/okoboji/archive/tags/Random/default.aspx" rel="tag">Random</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/okoboji/archive/tags/TechEd+2006/default.aspx" rel="tag">TechEd 2006</a></li>
<li class="Tag4"><a href="http://blogs.msdn.com/okoboji/archive/tags/Windows+Tips+and+Tricks/default.aspx" rel="tag">Windows Tips and Tricks</a></li>
<li class="Tag2"><a href="http://blogs.msdn.com/okoboji/archive/tags/WinFX/default.aspx" rel="tag">WinFX</a></li>
<li class="Tag1"><a href="http://blogs.msdn.com/okoboji/archive/tags/WPF/default.aspx" rel="tag">WPF</a></li>
</ul>

	</ul>
</div>

<div id="NewsSideBar">
	
</div>

<div id="ArchiveSideBar">
	
	
<h3>Archives</h3>
<ul>

        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2007/04.aspx">April 2007 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2007/02.aspx">February 2007 (4)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2007/01.aspx">January 2007 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/12.aspx">December 2006 (5)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/11.aspx">November 2006 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/09.aspx">September 2006 (6)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/08.aspx">August 2006 (4)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/07.aspx">July 2006 (12)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/06.aspx">June 2006 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/05.aspx">May 2006 (3)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/04.aspx">April 2006 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/03.aspx">March 2006 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/02.aspx">February 2006 (5)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2006/01.aspx">January 2006 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/12.aspx">December 2005 (4)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/11.aspx">November 2005 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/10.aspx">October 2005 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/09.aspx">September 2005 (5)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/08.aspx">August 2005 (3)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/06.aspx">June 2005 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/05.aspx">May 2005 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/04.aspx">April 2005 (4)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/03.aspx">March 2005 (3)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/02.aspx">February 2005 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2005/01.aspx">January 2005 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/12.aspx">December 2004 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/11.aspx">November 2004 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/10.aspx">October 2004 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/05.aspx">May 2004 (3)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/04.aspx">April 2004 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/03.aspx">March 2004 (2)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2004/01.aspx">January 2004 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2003/11.aspx">November 2003 (11)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/okoboji/archive/2003/10.aspx">October 2003 (7)</a>
        </li>
    
</ul>
	
</div>

<div id="LinkSideBar">
	
        <h3>Other Microsoft</h3>
        <ul>
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl01_Link" rel="parent colleague" href="http://simplegeek.com/">Chris Anderson</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl02_Link" rel="colleague" href="http://blogs.msdn.com/karstenj/">Karsten Januszewski</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl03_Link" rel="colleague" href="http://blogs.msdn.com/tims/">Tim Sneath</a></li>
            </ul>
    
        <h3>WPF Community</h3>
        <ul>
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl01_Links_ctl01_Link" rel="colleague" href="http://www.notstatic.com/">Robert Ingebretsen</a></li>
            </ul>
    
        <h3>WPF Team Members</h3>
        <ul>
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl01_Link" href="http://blogs.msdn.com/henryh">Henry Hahn</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl02_Link" href="http://laurenlavoie.com/">Lauren Lavoie</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl03_Link" rel="colleague" href="http://scorbs.com/work">Karen Corby</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl04_Link" rel="colleague" href="http://rrelyea.spaces.live.com/">Rob Relyea</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl05_Link" rel="colleague" href="http://blogs.msdn.com/mikehillberg/">Mike Hillberg</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl02_Links_ctl06_Link" rel="colleague" href="http://nerddawg.blogspot.com/">Ashish Shetty</a></li>
            </ul>
    

	
</div>
			</div>
			<div id="content"><div id="content2">
				
        

<div class="post">
	<div class="postsub">			
		<h2>On ItemTemplate, ContentTemplate, DataTemplate</h2>
		<p>A <a href="http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1190413&amp;SiteID=1">recent forum post</a> asked how one could build out ItemsControl-like functionality in a custom control.</p> <p>Let me start from the basics.</p> <p>ContentPresenter
presents content. If you give it a UIElement (Grid, Button, Border) it
will just display it. Easy enough. If you give it "data" (Customer,
Order, Int32) it will display it using a DataTemplate.</p> <p>DataTemplate
is to data as ControlTemplate is to Control. It lets one define a tree
of visuals that represent a given DataContext.</p> <p>Robby and I <a href="http://blogs.msdn.com/okoboji/archive/2006/02/02/523681.aspx">chatted about this</a> just over a year ago.</p> <p>ContentPresenter is the "thing" that does the work to realize the DataTemplate. It has the magic.</p> <p>One can give ContentPresenter a DataTemplate in two ways:</p> <ol> <li>Set the ContentTemplate property. This is typeof(DataTemplate)  </li><li>Set the ContentTemplateSelector. This is typeof(DataTemplateSelector)</li></ol> <p>The selector is used if the ContentTemplate is null. In the end, it just returns a DataTemplate.</p> <p>With me so far?</p> <p>Now
ContentPresenter has no "chrome" to speak of. If you want to show
content with some interactive chrome, use a ContentControl. This way
you can show some non-data state (like selection, focus) and have
non-data&nbsp;behavior (like checking or clicking). This is what
Button, CheckBox, and ListBoxItem do.</p> <p>All of these controls do
very little. The own some purpose-specific state and rely on a
ContentPresenter in their control template to do the work of displaying
content. ContentControl also has a ContentTemplate property and
ContentTemplateSelector property (as well as, you guessed it, a Content
property). These are never really used directly by the Control, they
are simply used to alias values down to the templated ContentPresenter.</p> <p>Moving to ItemsControl (IC), we have a similar story.</p> <p>IC has two analogous properties:</p> <ol> <li>ItemTemplate [typeof(DataTemplate)]  </li><li>ItemTemplateSelector [typeof(DataTemplateSelector)]</li></ol> <p>Now&nbsp;IC
does a very specific trick. It takes data items from a list, creates
wrappers (or containers) for each data item, and places them in a
specified panel.</p> <p><strong>GetContainerForItemOverride</strong> is a virtual method on IC that is used to generate containers--ListBox creates ListBoxItem, TreeView creates TreeViewItem, etc.</p> <p><strong>PrepareContainerForItemOverride</strong>
is another virtual method on IC. This is the method that marries the
generated container to the corresponding data item. In the process, it
sets up the container with the right properties from the parent IC. It
sets the ContentTemplate of the container to be the ItemTemplate of the
IC. Same with ItemTemplateSelector. When the container is a
ContentControl, these are once again proxied to an underlying
ContentPresenter.</p> <p>The question on the forum asks how this can be
accomplished in a custom control. Well, if one doesn't want to use IC,
one can accomplish the same set of things. Create code to generate
either a ContentPresenter or ContentControl for each data item. Expose
Template/TemplateSelector properties on your parent control. When you
generate child items, make sure you alias the properties from parent to
child. That's about it.</p> <p>I do this trick in the <strong>Graph</strong> control as part of the <a href="http://wpf.netfx3.com/files/folders/controls/entry8196.aspx">Bag-o-tricks</a>.</p> <p>I
know that the ItemTemplate, ContentTemplate, DataTemplate naming thing
can be confusing. Remember, at the end of the day, it all boils down to
a ContentPresenter + Template to display data is a cool way.</p> <p>Hope this answers the question and sheds some light on the workings of our more complicated controls.</p> <p>Happy hacking!</p>
		<div class="postfoot">
			Published
			Monday, February 12, 2007 11:33 PM
			by
			<a id="ctl00___ctl00___ctl01___Entry___AuthorLink" href="http://blogs.msdn.com/user/Profile.aspx?UserID=2967">okoboji</a>
			
			
			<div><span id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel"></span><input name="ctl00$_$ctl00$_$ctl01$_$Entry$_$InlineTagEditorPanel" id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel_State" value="nochange" type="hidden"></div>
				
		</div>
	</div>
</div>


<h3>
	Comments
</h3>
<div id="comments">
	
		<p>No Comments</p>
	
</div>

	



<em>Anonymous comments are disabled</em>	
   
    
			</div></div>
			<div id="contentfooter">&nbsp;</div>
		</div>
		<div id="footer">
			
		</div>
	</div>
</div>

<script language="javascript" type="text/javascript">
<!--
function KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event)
{
	if (event.keyCode == 13)
	{
		event.returnValue = false;
		event.cancel = true;
     __doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')	}
}

//-->
</script>

<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://blogs.msdn.com/okoboji/archive/2007/02/12/on-itemtemplate-contenttemplate-datatemplate.aspx"
dc:identifier="http://blogs.msdn.com/okoboji/archive/2007/02/12/on-itemtemplate-contenttemplate-datatemplate.aspx"
dc:title="On ItemTemplate, ContentTemplate, DataTemplate"
trackback:ping="http://blogs.msdn.com/okoboji/trackback.aspx?PostID=1667371" />
</rdf:RDF>
-->
</form>
</body></html>