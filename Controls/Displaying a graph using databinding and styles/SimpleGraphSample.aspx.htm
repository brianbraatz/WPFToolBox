<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>Adrian Vinca's blog : Displaying a graph using databinding and styles</title>
 




<meta name="keywords" content="Expression Blend,Samples,Expression,Designer Tools">
<meta name="description" content="This example shows how databinding and styles can be used for displaying a set of connected nodes. To better illustrate this, I've added some basic interactivity: the nodes can be dragged using the mouse and databinding will update automatically the positions">
<meta name="GENERATOR" content="CommunityServer 2.1 SP1 (Build: 61025.2)">
<link rel="pingback" href="http://blogs.msdn.com/adrianvinca/pingback.aspx">
<link rel="stylesheet" href="SimpleGraphSample.aspx_files/style.css" type="text/css" media="screen">
<link rel="stylesheet" href="SimpleGraphSample.aspx_files/print.css" type="text/css" media="print">
<link rel="stylesheet" href="SimpleGraphSample.aspx_files/red.css" type="text/css" media="screen">
<link rel="stylesheet" href="SimpleGraphSample.aspx_files/customcss.css" type="text/css" media="screen">
<link rel="shortcut icon" type="image/ico" href="http://blogs.msdn.com/favicon.ico">
<link rel="alternate" type="application/rss+xml" title="Adrian Vinca's blog (RSS 2.0)" href="http://blogs.msdn.com/adrianvinca/rss.xml">
<link rel="alternate" type="application/atom+xml" title="Adrian Vinca's blog (Atom 1.0)" href="http://blogs.msdn.com/adrianvinca/atom.xml">
<link rel="alternate" type="application/rss+xml" title="Displaying a graph using databinding and styles Comment RSS (RSS 2.0)" href="http://blogs.msdn.com/adrianvinca/commentrss.aspx?PostID=545016">

	<script src="SimpleGraphSample.aspx_files/global.js" type="text/javascript"></script></head><body>
<form name="aspnetForm" method="post" action="/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm">
<div>
<input name="__EVENTTARGET" id="__EVENTTARGET" value="" type="hidden">
<input name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" type="hidden">
<input name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTMyNjg0MDc1MWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFI2N0bDAwJF8kY3RsMDAkXyRicyRfJHdzJF8kU2VhcmNoQm94rkRXbV1z5ohWybmugg6l5bfTy3M=" type="hidden">
</div>

<script type="text/javascript">
<!--
var theForm = document.forms['aspnetForm'];
if (!theForm) {
    theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
// -->
</script>


<script src="SimpleGraphSample.aspx_files/WebResource.js" type="text/javascript"></script>

<script language="javascript" type="text/javascript" src="SimpleGraphSample.aspx_files/Telligent_Modal.js"></script><script language="javascript" type="text/javascript">
// <![CDATA[
Telligent_Modal.Configure('/utility/loading.htm',['Modal'],['ModalTitle'],['ModalClose'],['ModalContent'],['ModalFooter'],['ModalResize'],['ModalMask'],100);
// ]]>
</script><script language="javascript" type="text/javascript">
var RatingControlAJAX = {
"SaveRating":function(id,p0,cb){return Ajax_CallBack('CommunityServer.Blogs.Controls.BlogRatePost',id,'SaveRating',[p0],cb,0,0,0,1);}};
</script><script language="javascript" type="text/javascript">
var ThreadSubscribeLinkButton = {
"ToggleEmailReplies":function(id,p0,cb){return Ajax_CallBack('CommunityServer.Controls.ThreadSubscribeLinkButton',id,'ToggleEmailReplies',[p0],cb,0,0,0,0);}};
</script><script type="text/javascript" src="SimpleGraphSample.aspx_files/ratingcontrol.js"></script><script language="JavaScript" type="text/javascript">var ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = false;var ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = false;function updateSubscriptionText() {if(ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus == true) {document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Stop sending me email alerts for this post';} else {document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Send me email alerts for new comments to this post';}}function toggleSubscription() {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = true;document.getElementById('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton').innerHTML = 'Updating email notifications...';ThreadSubscribeLinkButton.ToggleEmailReplies('ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton',440519, toggleSubscriptionCallback);}function toggleSubscriptionCallback(response) {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackWorking = false;if((response.error == null) && (response.value == true)) {if(ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus == true) {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = false;} else {ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton_trackStatus = true;}updateSubscriptionText();} else {updateSubscriptionText();alert('An error happened while processing your request.  Please notify an administrator and try again later.');}}</script>
<script src="SimpleGraphSample.aspx_files/WebResource_002.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
// -->
</script>

			
<div id="masthead">
	
		<div id="welcome" align="right">
			
					Signed in as <a href="http://blogs.msdn.com/user/EditProfile.aspx?ReturnUrl=/blogs/post.aspx?App=adrianvinca&amp;y=2006&amp;m=03&amp;d=07&amp;PostName=SimpleGraphSample">bbraatz</a>
 | <a id="ctl00___ctl00___duw1_rc1___logout" href="http://blogs.msdn.com/logout.aspx">Sign out</a>



				
			 | 
			<a id="ctl00___ctl00___duw1_Faq1" href="http://blogs.msdn.com/languages/en-US/docs/faq.aspx">Help</a>
		</div>
	
</div>
<div id="wrapper">
	<div id="container">
		<div id="header">
			
<div id="title"><p id="tagline"></p>
<h1><a id="ctl00___ctl00___bth___BlogTitle" class="headermaintitle" href="http://blogs.msdn.com/adrianvinca/default.aspx">Adrian Vinca's blog</a></h1>
</div>

		</div>
		<div id="contentwrapper">
			<div id="sidebar-a">
				
<div id="BlogLinksSideBar">
	
<div id="WeblogLinks">
<h3>This Blog</h3>
<ul>
    <li><a id="ctl00___ctl00___bs___wl___email" href="http://blogs.msdn.com/adrianvinca/emailsubscriptions.aspx">Email alerts</a></li>
	<li><a id="ctl00___ctl00___bs___wl___Aboutlink1" href="http://blogs.msdn.com/adrianvinca/about.aspx">About</a></li>
	<li><a id="ctl00___ctl00___bs___wl___Contactlink1" href="http://blogs.msdn.com/adrianvinca/contact.aspx">Email</a></li>
</ul>
</div>
</div>

<div id="TasksSideBar">
	
</div>

<div id="SubscriptionsSideBar">
	
<div id="Subscriptions">
 <h3>Syndication</h3>
    <ul>
        <li><a id="ctl00___ctl00___bs___bs___rss" href="http://blogs.msdn.com/adrianvinca/rss.xml">RSS 2.0</a></li>
        <li><a id="ctl00___ctl00___bs___bs___atom" href="http://blogs.msdn.com/adrianvinca/atom.xml">Atom 1.0</a></li>
    </ul>
 </div>
</div>

<div id="SearchSideBar">
	
	
<div id="Search">
<h3>Search</h3>
<ul><li>
<input name="ctl00$_$ctl00$_$bs$_$ws$_$SearchBox" id="ctl00___ctl00___bs___ws___SearchBox" class="searchBox" onkeydown="KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event);" type="text"> <a id="ctl00___ctl00___bs___ws___SearchButton" href="javascript:__doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')">Go</a>
</li></ul>
</div>
	
</div>

<div id="TagSideBar">
	<h3>Tags</h3>
	<ul>
	<ul class="SidebarTagCloud">
<li class="Tag4"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Designer+Tools/default.aspx" rel="tag">Designer Tools</a></li>
<li class="Tag2"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Expression/default.aspx" rel="tag">Expression</a></li>
<li class="Tag1"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Expression+Blend/default.aspx" rel="tag">Expression Blend</a></li>
<li class="Tag4"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/News/default.aspx" rel="tag">News</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Samples/default.aspx" rel="tag">Samples</a></li>
<li class="Tag6"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Tutorials/default.aspx" rel="tag">Tutorials</a></li>
<li class="Tag5"><a href="http://blogs.msdn.com/adrianvinca/archive/tags/Windows+Presentation+Foundation/default.aspx" rel="tag">Windows Presentation Foundation</a></li>
</ul>

	</ul>
</div>

<div id="NewsSideBar">
	
</div>

<div id="ArchiveSideBar">
	
	
<h3>Archives</h3>
<ul>

        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2007/07.aspx">July 2007 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2007/01.aspx">January 2007 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2006/12.aspx">December 2006 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2006/11.aspx">November 2006 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2006/06.aspx">June 2006 (1)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2006/03.aspx">March 2006 (4)</a>
        </li>
    
        <li>
            <a href="http://blogs.msdn.com/adrianvinca/archive/2006/02.aspx">February 2006 (4)</a>
        </li>
    
</ul>
	
</div>

<div id="LinkSideBar">
	
        <h3>Microsoft Expression Interactive Designer Links</h3>
        <ul>
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl01_Link" href="http://blogs.msdn.com/Expression">Expression Team's Blog</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl02_Link" rel="colleague" href="http://blogs.msdn.com/unnir">Unni's blog</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl03_Link" title="The official page of the Expression Interactive Designer" href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Expression Interactive Designer</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl04_Link" rel="colleague" href="http://blogs.msdn.com/adrianma/">AdrianMa's Blog</a></li>
            
                <li><a id="ctl00___ctl00___bs___lcl___Categories_ctl00_Links_ctl05_Link" rel="colleague" href="http://blogs.msdn.com/mariogu/">Mario Guzzi's Blog</a></li>
            </ul>
    

	
</div>
			</div>
			<div id="content"><div id="content2">
				
        

<div class="post">
	<div class="postsub">			
		<h2>Displaying a graph using databinding and styles</h2>
		<p>This
example shows&nbsp;how&nbsp;databinding and&nbsp;styles&nbsp;can be
used for displaying a set of connected nodes.&nbsp;To better illustrate
this, I've added some basic interactivity: the nodes can be dragged
using the mouse and databinding will update automatically the positions
of the lines.</p>
<p>For simplicity, I will use a set of predefined nodes and a set of
predefined lines connecting those nodes (but,&nbsp;the functionality
could be easily exteded to create&nbsp;them dynamically).</p>
<p>I've used mainly <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a>
for creating this sample, but because of some limitations&nbsp;in the
current CTP, I had to tweak a few times the code manually. The project
can be opened and edited by <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a> without any problems.</p>
<p>This time I won't create a step by step tutorial; I will explain
shortly each part of the code and how everything works. So feel free to
download the project, open it and Visual Studio or <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a>, run it and look through the code.</p>
<h4>Canvas as the Document Root</h4>
<p>We will use a Canvas as the DocumentRoot. Canvas is a simple layout
container which allows positioning children by specifying X-Y
coordinates.</p>
<p>By default, <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a>
creates the DocumentRoot a Grid. In order to create a new scene with a
Canvas, you need to uncheck the option "New Scene Creates a Grid" from
the "Tools" menu. The scenes created after that will have a Canvas as
the DocumentRoot</p>
<h4>Defining a Style for a node</h4>
<p>Styles represent a great way to reuse properties and events. This is what our style does:</p>
<ul>
<li>Sets the Stroke to black 
</li><li>Sets the Fill to red 
</li><li>Sets the Width and Height to 50 
</li><li>Sets a RenderTransform which translates to left and up
with&nbsp;25 px. This will cause the ellipse&nbsp;to be centered around
its top-left position. </li><li>Defines event handlers for MouseUp and MouseDown</li></ul><pre>	&lt;Canvas.Resources&gt;
		&lt;Style x:Key="NodeStyle" TargetType="{x:Type Ellipse}"&gt;
			&lt;Setter Property="Stroke" Value="#FF000000" /&gt;
			&lt;Setter Property="Fill" Value="sc#1, 1, 0, 0"/&gt;
			&lt;Setter Property="Width" Value="50" /&gt;
			&lt;Setter Property="Height" Value="50"/&gt;
			&lt;Setter Property="RenderTransform"&gt;
				&lt;Setter.Value&gt;
					&lt;TransformGroup&gt;
						&lt;TranslateTransform X="0" Y="0"/&gt;
						&lt;ScaleTransform ScaleX="1" ScaleY="1"/&gt;
						&lt;SkewTransform AngleX="0" AngleY="0"/&gt;
						&lt;RotateTransform Angle="0"/&gt;
						&lt;TranslateTransform X="0" Y="0"/&gt;
						&lt;TranslateTransform X="-25" Y="-25"/&gt;
					&lt;/TransformGroup&gt;
				&lt;/Setter.Value&gt;
			&lt;/Setter&gt;
			
			&lt;EventSetter Event="MouseDown" Handler="OnMouseDown" /&gt;
			&lt;EventSetter Event="MouseUp" Handler="OnMouseUp" /&gt;
		&lt;/Style&gt;
	&lt;/Canvas.Resources&gt;
</pre>
<h4>Adding a few nodes</h4>
<p>Now, when we create a new node, we just need to specify its style
and its position, because all the other properties and the event
handlers are defined inside the style. </p><pre>	&lt;Ellipse x:Name="Ellipse" Style="{DynamicResource NodeStyle}" Canvas.Left="448" Canvas.Top="133" /&gt;
</pre>
<p>You can also add new nodes using <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a>: 
</p><ul>
<li>Draw a new ellipse 
</li><li>Right click on it Edit Style - Apply Resource - NodeStyle; this will apply the existing style to the ellipse 
</li><li><a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a>
creates by default some attributes; the problem is that, in this case
they override the values defined by the style; so we need to clear
those attributes (in the Properties palette, click on the property and
select "Clear/Default"): <ul>
<li>Stroke 
</li><li>Fill 
</li><li>Width 
</li><li>Height</li></ul></li></ul>
<p></p>
<h4>Defining the lines</h4>
<p>We will define a set of predefined lines, and databind the
coordinates of the two points to the coordinates of the nodes (the
attached properties Canvas.Left and Canvas.Top). Unfortunately, the
only way to do this step manually, because <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a> has currently some limitations (we know about this issues and we hope that we will improve them in the next releases): 
</p><ul>
<li>it doesn't allow to create a Line object. 
</li><li>it doesn't support databinding to an attached property.</li></ul>
<p></p>
<p>A Line object has two pairs of values representing the coordinates
for the two points: X1, Y1 and X2, Y2. Here is how we can bind one of
the ends to the coordinates of one of the ellipses:</p><pre>	&lt;Line Stroke="#FF000000"
		X1="{Binding ElementName=Ellipse, Path=(Canvas.Left), Mode=Default}"
		Y1="{Binding ElementName=Ellipse, Path=(Canvas.Top), Mode=Default}" 
		X2="50" Y2="150" /&gt;
</pre>
<h4>The logic for moving the nodes</h4>
<p>First of all we will add an event handler for the MouseMove event of
the DocumentRoot element. We will name it OnMouseMove. This step can be
done using <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a> by selecting the DocumentRoot and using the Events palette to add the event.</p>
<p>We also need to add the events handler OnMouseUp and OnMouseDown
defined in the style. Unfortunately this step needs to be done manually
at this point.</p>
<p>The logic is simple: when we get a MouseDown notification, we store
in a private field the sender (the node) of that notification; in the
MouseMove handler we will update the position of that node. This is the
final code:</p><pre>	public partial class Scene1
	{
		
		public Scene1()
		{
			// This assumes that you are navigating to this scene.
			// If you will normally instantiate it via code and display it
			// manually, you either have to call InitializeComponent by hand or
			// uncomment the following line.
			// this.InitializeComponent();

			// Insert code required on object creation below this point.
		}

		private FrameworkElement movingObject = null;

		private void OnMouseMove(object sender, System.Windows.Input.MouseEventArgs e)
		{
			if (this.movingObject != null)
			{
				Point mousePosition = Mouse.GetPosition(this.DocumentRoot);

				this.movingObject.SetValue(Canvas.LeftProperty, mousePosition.X);
				this.movingObject.SetValue(Canvas.TopProperty, mousePosition.Y);
			}
		}


		private void OnMouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
		{
			this.movingObject = sender as FrameworkElement;
		}


		private void OnMouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
		{
			this.movingObject = null;
		}
	}
</pre>
<p>This implementation could be improved (for example, if you click on
the edge of an ellipse and move the mouse just a little bit, you will
notice that the ellipse will "jump" so that it will be centered on the
mouse pointer.</p>
<h4>Running the application</h4>
<p>Once you've got all the code in place, you just need to build and
run the application. You can click and move different nodes and the
lines will just update automatically.</p>
<p><a href="http://blogs.msdn.com/photos/adrianvinca/SimpleGraph.aspx" target="_blank"><img src="SimpleGraphSample.aspx_files/561x480.jpg" border="0"></a></p>
<p><strong>Notes:</strong></p>
<ol>
<li>The attached project requires the Feb CTP of <a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=F51C4D96-9AEA-474F-86D3-172BFA3B828B&amp;displaylang=en">WinFX Runtime Components Feb CTP</a>. The corresponding version of <a href="http://www.microsoft.com/products/expression/en/interactive_designer/default.mspx">Microsoft Expression Interactive Designer</a> is the March CTP (which should be released soon) 
</li><li>This sample shows a very simplistic implementation for the drag-drop behavior. A better approach is presented by <a href="http://blogs.msdn.com/unnir/">Unni</a> in&nbsp;his article -&nbsp;<a href="http://blogs.msdn.com/unnir/archive/2006/01/31/521065.aspx">"Panel Like" system</a>.</li></ol>
		<div class="postfoot">
			Published
			Tuesday, March 07, 2006 12:15 AM
			by
			<a id="ctl00___ctl00___ctl01___Entry___AuthorLink" href="http://blogs.msdn.com/user/Profile.aspx?UserID=18892">adrianvinca</a>
			
			<span class="CommonRateControl" id="ctl00___ctl00___ctl01___Entry___Ratings" title="Not yet rated"><img title="Poor" src="SimpleGraphSample.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Poor" src="SimpleGraphSample.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Fair" src="SimpleGraphSample.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Fair" src="SimpleGraphSample.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Average" src="SimpleGraphSample.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Average" src="SimpleGraphSample.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Good" src="SimpleGraphSample.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Good" src="SimpleGraphSample.aspx_files/star-right-off.gif" align="absmiddle" border="0"><img title="Excellent" src="SimpleGraphSample.aspx_files/star-left-off.gif" align="absmiddle" border="0"><img title="Excellent" src="SimpleGraphSample.aspx_files/star-right-off.gif" align="absmiddle" border="0"></span><input value="0" id="ctl00___ctl00___ctl01___Entry___Ratings_Value" type="hidden">
			<div><span id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel">Filed under: <a href="http://blogs.msdn.com/adrianvinca/archive/tags/Expression+Blend/default.aspx" rel="tag">Expression Blend</a>, <a href="http://blogs.msdn.com/adrianvinca/archive/tags/Samples/default.aspx" rel="tag">Samples</a>, <a href="http://blogs.msdn.com/adrianvinca/archive/tags/Expression/default.aspx" rel="tag">Expression</a>, <a href="http://blogs.msdn.com/adrianvinca/archive/tags/Designer+Tools/default.aspx" rel="tag">Designer Tools</a></span><input name="ctl00$_$ctl00$_$ctl01$_$Entry$_$InlineTagEditorPanel" id="ctl00___ctl00___ctl01___Entry___InlineTagEditorPanel_State" value="nochange" type="hidden"></div>
			
	
<br>
<b>Attachment(s): </b><a id="ctl00___ctl00___ctl01___Entry___Attachment___DownLoadLink" href="http://blogs.msdn.com/adrianvinca/attachment/545016.ashx">SimpleGraph.zip</a>
		</div>
	</div>
</div>

<div id="postToolbar">
<h2 class="CommonSubTitle">Comment Notification</h2>
<p>
	
	<a href="javascript:toggleSubscription();" id="ctl00___ctl00___ctl01___DetailedSubBar___BlogThreadButton" trackingresourcename="Weblogs_UnTrack" nottrackingresourcename="Weblogs_Track" workingresourcename="Weblogs_TrackWorking">Send me email alerts for new comments to this post</a>
</p>
<p>
	Subscribe to this post's comments using
	<a id="ctl00___ctl00___ctl01___DetailedSubBar___CommentRssLink" href="http://blogs.msdn.com/adrianvinca/commentrss.aspx?PostID=545016">RSS</a>
</p>
</div>

<h3>
	Comments
</h3>
	<div id="comments">
	
		<div class="comment">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl00_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#611386">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="611386"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Wednesday, May 31, 2006 1:14 AM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl00_NameLink" title="brij" rel="nofollow" href="http://spaces.msn.com/brijraj" target="_blank">brij</a>
				</div>
		<div class="commentsbody">
		        hi, i was trying to bind the Points property of a polyline, but i am not being able to can u plz explain hy.
<br>
<br>your code is good enough
<br> </div>
		</div>
		
		<div class="commentowner">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl01_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#612114">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="612114"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Wednesday, May 31, 2006 2:33 PM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl01_NameLink" title="adrianvinca" href="http://blogs.msdn.com/user/Profile.aspx?UserID=18892" target="_blank">adrianvinca</a>
				</div>
		<div class="commentsbody">
		        Hi,
<br>
<br>The type of Points property is a more complicated structure (it is a PointCollection).
<br>
<br>You can't databind individual Points (like I did in the Line
example) because they are not DependencyObjects and you can't define
bindings on them.
<br>
<br>But you should be able to databind the Points property to another
compatible property (e.g. a property which returns either a
PointCollection or a string representing a PointCollection). (You could
also databind to a property which returns a different type, but in that
case you might have to write a ValueConverter.)
<br>
<br>Basically you could expose a property in your code behind class,
which would calculate those points and than databind the Points
property of your Polyline to it. <br>
<br>Here is a simple example you could try: databind the Points
property of a Polyline to the Text property of a TextBox. When you run
your application, the polyline will get updated automatically based on
the text you type in the text box:
<br>
<br>	&lt;Polyline Stroke="#FF000000" Points="{Binding Path=Text, ElementName=TextBox1, Mode=OneWay}"/&gt;
<br>	&lt;TextBox x:Name="TextBox1" Width="200" Height="100" Text="448,133 143,283 535,325 294,114"/&gt;
<br>
<br>I will try to post an example in the future showing this.
<br>
<br>Hope this helps!
<br>- Adrian </div>
		</div>
		
		<div class="comment">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl02_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#613987">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="613987"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Friday, June 02, 2006 1:47 AM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl02_NameLink" title="brij" rel="nofollow" href="http://spaces.msn.com/brij" target="_blank">brij</a>
				</div>
		<div class="commentsbody">
		        Yup,
<br> &nbsp; &nbsp; it helped!!! thanks a lot.
<br>
<br>My task actually is to create a graph control in WPF, do u also know some good resources over it.
<br>
<br>Mission I M Possible :)
<br>
<br>Thanks a lot again for the above explaination....
<br>
<br>
<br>Happy Coding...
<br>
<br>
<br>
<br> </div>
		</div>
		
		<div class="commentowner">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl03_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#615451">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="615451"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Friday, June 02, 2006 8:01 PM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl03_NameLink" title="adrianvinca" href="http://blogs.msdn.com/user/Profile.aspx?UserID=18892" target="_blank">adrianvinca</a>
				</div>
		<div class="commentsbody">
		        Hi again,
<br>
<br>Regarding the WPF side of things, feel free to ask questions on the
Microsoft discussion lists for WPF or Expression Interactive Designer.
<br>
<br>This could be done in WPF in a few different ways:
<br>- (easiest) inherit a class from Canvas, and extend it with the
functionality for drawing graphs - adding lines, nodes at runtime,
using code; expose properties for setting the graph data externally or
use the existing DataSource/DataContext properties if possible.
<br>- inherit from Control, in the xaml provide a template which has a
canvas; implement the logic in code (very similar to the previous
suggestion)
<br>- (pretty complicated) try to customize an ItemsControl, by
changing the ItemPanel to a Canvas; than create DataTemplates to
generate the nodes and the connections based on the DataSource you
provide. Basically this way, you would try to get the most of logic in
Xaml.
<br>
<br>On my opinion, the most challenging part in creating a good graph
control is the layout engine. Of course, for the begining, you can use
a simplistic approach (e.g. display the nodes on a circle, on
predefined locations... or even randomly :)) <br>
<br>I encountered once an interesting tool for generating the graph layout: <a rel="nofollow" target="_new" href="http://www.graphviz.org/">http://www.graphviz.org/</a>. I don't think it has any wpf support though.
<br>
<br>Hope this helps!
<br>Happy coding to you too... I am looking forward to seeing your graph control!
<br>
<br>Regards,
<br>- Adrian
<br>--
<br>This posting is provided "AS IS" with no warranties, and confers no rights. 
<br> </div>
		</div>
		
		<div class="comment">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl04_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#695097">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="695097"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Friday, August 11, 2006 1:35 AM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl04_NameLink" title="brij" rel="nofollow" href="http://spaces.msn.com/brijraj" target="_blank">brij</a>
				</div>
		<div class="commentsbody">
		        Hi,
<br> &nbsp; &nbsp;My control is taking shape...Will share it for sure..when the client gets the delivery...
<br>
<br>My graph has two controls...one is a low level graph rendering
Canvas based control, and this control is later hosted in another
control...to provide the Legends box and some other information.. </div>
		</div>
		
		<div class="commentowner">
		<h4><a id="ctl00___ctl00___ctl01___Comments___Comments_ctl05_PermaLink" title="permalink" href="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx#699287">#</a>
		    <span>re: Displaying a graph using databinding and styles<a name="699287"></a></span>
		</h4><div class="commentssubhead"><span class="commentspan"></span>Monday, August 14, 2006 5:39 AM by <a id="ctl00___ctl00___ctl01___Comments___Comments_ctl05_NameLink" title="adrianvinca" href="http://blogs.msdn.com/user/Profile.aspx?UserID=18892" target="_blank">adrianvinca</a>
				</div>
		<div class="commentsbody">
		        Awesome! I am really happy to hear the good news!
<br>
<br>Regards,
<br>- Adrian
<br>-- 
<br>This posting is provided "AS IS" with no warranties, and confers no rights. 
<br> </div>
		</div>
		

</div>

	


	
<div id="commentform">
<h3>Leave a Comment</h3>

    <dl>
        <dt><label for="ctl00___ctl00___ctl01___form___tbTitle">Title</label> <em>(required)</em><span id="ctl00___ctl00___ctl01___form___Requiredfieldvalidator1" style="color: Red; visibility: hidden;">*</span></dt>
        <dd><input name="ctl00$_$ctl00$_$ctl01$_$form$_$tbTitle" value="re: Displaying a graph using databinding and styles" id="ctl00___ctl00___ctl01___form___tbTitle" class="smallbox" type="text"></dd>
        
        
        
        <dt><label for="ctl00___ctl00___ctl01___form___tbUrl">Your URL</label> </dt>
        <dd><input name="ctl00$_$ctl00$_$ctl01$_$form$_$tbUrl" id="ctl00___ctl00___ctl01___form___tbUrl" class="smallbox" type="text"></dd>
        
        <dt><label for="ctl00___ctl00___ctl01___form___tbComment">Comments</label> <em>(required)</em><span id="ctl00___ctl00___ctl01___form___Requiredfieldvalidator3" style="color: Red; visibility: hidden;">*</span></dt>
        <dd><textarea name="ctl00$_$ctl00$_$ctl01$_$form$_$tbComment" rows="5" cols="25" id="ctl00___ctl00___ctl01___form___tbComment"></textarea></dd>

        <dt></dt>

        <dt><input name="ctl00$_$ctl00$_$ctl01$_$form$_$btnSubmit" value="Submit" onclick='javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$_$ctl00$_$ctl01$_$form$_$btnSubmit", "", true, "", "", false, false))' id="ctl00___ctl00___ctl01___form___btnSubmit" type="submit"></dt>
    </dl>
</div>



	
   
    
			</div></div>
			<div id="contentfooter">&nbsp;</div>
		</div>
		<div id="footer">
			
		</div>
	</div>
</div>

<script type="text/javascript">
<!--
var Page_Validators =  new Array(document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator1"), document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator3"));
// -->
</script>

<script type="text/javascript">
<!--
var ctl00___ctl00___ctl01___form___Requiredfieldvalidator1 = document.all ? document.all["ctl00___ctl00___ctl01___form___Requiredfieldvalidator1"] : document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator1");
ctl00___ctl00___ctl01___form___Requiredfieldvalidator1.controltovalidate = "ctl00___ctl00___ctl01___form___tbTitle";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator1.errormessage = "*";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator1.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator1.initialvalue = "";
var ctl00___ctl00___ctl01___form___Requiredfieldvalidator3 = document.all ? document.all["ctl00___ctl00___ctl01___form___Requiredfieldvalidator3"] : document.getElementById("ctl00___ctl00___ctl01___form___Requiredfieldvalidator3");
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.controltovalidate = "ctl00___ctl00___ctl01___form___tbComment";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.errormessage = "*";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.evaluationfunction = "RequiredFieldValidatorEvaluateIsValid";
ctl00___ctl00___ctl01___form___Requiredfieldvalidator3.initialvalue = "";
// -->
</script>

<script language="javascript" type="text/javascript">
<!--
function KeyDownHandlerctl00___ctl00___bs___ws___SearchButton(event)
{
	if (event.keyCode == 13)
	{
		event.returnValue = false;
		event.cancel = true;
     __doPostBack('ctl00$_$ctl00$_$bs$_$ws$_$SearchButton','')	}
}

//-->
</script>
<script language="javascript">var ctl00___ctl00___ctl01___Entry___Ratings=new RateControl('ctl00___ctl00___ctl01___Entry___Ratings','ctl00___ctl00___ctl01___Entry___Ratings','ctl00___ctl00___ctl01___Entry___Ratings_Value', 5, '/Themes/default/images/common/', false, 'CommonRateControl','CommonRateControlActive','CommonRateControlReadOnly',['Terrible','Poor','Fair','Average','Good','Excellent'],false,true);</script>
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
rdf:about="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx"
dc:identifier="http://blogs.msdn.com/adrianvinca/archive/2006/03/07/SimpleGraphSample.aspx"
dc:title="Displaying a graph using databinding and styles"
trackback:ping="http://blogs.msdn.com/adrianvinca/trackback.aspx?PostID=545016" />
</rdf:RDF>
-->

<script type="text/javascript">
<!--
var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
// -->
</script>
        </form>
</body></html>