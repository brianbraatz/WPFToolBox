function addPhoto(g,h){if(PHOTOCOUNT>=MAX_PHOTOS)return;var c=++PHOTOCOUNT,a=new Sys.StringBuilder;a.append("    <Canvas xmlns='http://schemas.microsoft.com/client/2007' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' x:Name='photoCanvas##' Width='805' Height='535' Canvas.Top='20' Canvas.Left='1000' Background='Transparent' MouseEnter='PhotoMouseEnter' MouseLeave='PhotoMouseLeave'>");a.append("      <Canvas.RenderTransform>");a.append("        <TransformGroup>");a.append("          <ScaleTransform x:Name='photoScale##' ScaleX='.8' ScaleY='.8'/>");a.append("          <RotateTransform x:Name='photoAngle##' Angle='#angle#' CenterX='400' CenterY='265'/>");a.append("        </TransformGroup>");a.append("      </Canvas.RenderTransform>");a.append("      <Canvas.Resources>");a.append("              <Storyboard x:Name='focusInGrid##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' From='#gridx#' To='#gridx-10#' Duration='0:0:.1' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Top)' From='#gridy#' To='#gridy-10#' Duration='0:0:.1' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' To='.3' From='.24' Duration='0:0:.1' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleY' To='.3' From='.24' Duration='0:0:.1' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' From='-3' To='0' Duration='0:0:.1' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("              <Storyboard x:Name='focusOutGrid##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' From='#gridx-10#' To='#gridx#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Top)' From='#gridy-10#' To='#gridy#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' To='.24' From='.3' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleY' To='.24' From='.3' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' From='0' To='-3' Duration='0:0:.5' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("              <Storyboard x:Name='rotateRight##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' From='40' To='1000' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' From='.8' To='.1' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' From='#angle#' To='120' Duration='0:0:.5' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("              <Storyboard x:Name='rotateLeft##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' From='1000' To='40' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' From='.1' To='.8' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' From='120' To='#angle#' Duration='0:0:.5' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("              <Storyboard x:Name='slideToGrid##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' From='40' To='#gridx#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Top)' From='40' To='#gridy#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' From='.8' To='.24' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleY' From='.8' To='.24' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' From='#angle#' To='-3' Duration='0:0:.5' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("              <Storyboard x:Name='slideToStack##'>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Left)' To='40' From='#gridx#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoCanvas##' Storyboard.TargetProperty='(Canvas.Top)' To='10' From='#gridy#' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleX' To='.8' From='.24' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoScale##' Storyboard.TargetProperty='ScaleY' To='.8' From='.24' Duration='0:0:.5' AutoReverse='false'/>");a.append("                <DoubleAnimation Storyboard.TargetName='photoAngle##' Storyboard.TargetProperty='Angle' To='#angle#' From='-3' Duration='0:0:.5' AutoReverse='false'/>");a.append("              </Storyboard>");a.append("      </Canvas.Resources>");a.append("      <Canvas Width='814' Height='614' Canvas.Top='-7' Canvas.Left='-7' Background='black' Opacity='1' />");a.append("      <Canvas Width='812' Height='612' Canvas.Top='-6' Canvas.Left='-6' Background='white' Opacity='1' />");a.append("      <Canvas Width='800' Height='530' Canvas.Top='0' Canvas.Left='0' Background='black' Opacity='1' />");a.append("      <Image x:Name='image##' Width='800' Height='530'/>");a.append("      <TextBlock x:Name='title##' Width='800' Height='65' Canvas.Left='4' Canvas.Top='536' FontSize='54' Foreground='Black' FontFamily='Georgia'>");a.append("           <TextBlock.Clip><RectangleGeometry Rect='0,0,800,65' /></TextBlock.Clip></TextBlock>");a.append("      <InkPresenter x:Name='inkPresenter##' Width='800' Height='530'");a.append("        Opacity='1' Background='transparent'");a.append("        MouseLeftButtonDown='PhotoMouseDown'");a.append("        MouseMove='PhotoMouseMove'");a.append("        MouseLeftButtonUp='PhotoMouseUp'");a.append("        MouseLeave='PhotoMouseUp'/>");a.append("    </Canvas>");var b=a.toString();b=b.replace(/\##/g,c);b=b.replace(/\#angle#/g,-c);var e=(c-1)%4*220,f=parseInt((c-1)/4)*160;b=b.replace(/\#gridx#/g,e);b=b.replace(/\#gridy#/g,f);b=b.replace(/\#gridx-10#/g,e-20);b=b.replace(/\#gridy-10#/g,f-5);var d=wpf.content.createFromXaml(b);d.findName("title"+c).text=h;d.findName("image"+c).source=g;photoParent.Children.add(d);wpf.content.findname("rotateLeft"+c).Begin()}if(window.PhotoStackScriptLoaded)PhotoStackScriptLoaded()